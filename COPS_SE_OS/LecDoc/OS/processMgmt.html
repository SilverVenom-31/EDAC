From: <Saved by Blink>
Snapshot-Content-Location: https://mywiki.wooledge.org/ProcessManagement#PIDs_and_parents
Subject: ProcessManagement - Greg's Wiki
Date: Tue, 20 Oct 2020 03:34:22 -0000
MIME-Version: 1.0
Content-Type: multipart/related;
	type="text/html";
	boundary="----MultipartBoundary--uHJylNfucSsbtqAgYnu36LXsxRoM5G8mG51sk2Zn04----"


------MultipartBoundary--uHJylNfucSsbtqAgYnu36LXsxRoM5G8mG51sk2Zn04----
Content-Type: text/html
Content-ID: <frame-09FC6E140CA9B5B3D7D70AA9466A0E14@mhtml.blink>
Content-Transfer-Encoding: quoted-printable
Content-Location: https://mywiki.wooledge.org/ProcessManagement#PIDs_and_parents

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/htm=
l4/strict.dtd"><html><head><meta http-equiv=3D"Content-Type" content=3D"tex=
t/html; charset=3DUTF-8"><link rel=3D"stylesheet" type=3D"text/css" href=3D=
"cid:css-5f91df71-67e2-4e18-8171-13de9f4e911a@mhtml.blink" />


<title>ProcessManagement - Greg's Wiki</title>






<link rel=3D"stylesheet" type=3D"text/css" charset=3D"utf-8" media=3D"all" =
href=3D"https://mywiki.wooledge.org/moin_static198/modernized/css/common.cs=
s">
<link rel=3D"stylesheet" type=3D"text/css" charset=3D"utf-8" media=3D"scree=
n" href=3D"https://mywiki.wooledge.org/moin_static198/modernized/css/screen=
.css">
<link rel=3D"stylesheet" type=3D"text/css" charset=3D"utf-8" media=3D"print=
" href=3D"https://mywiki.wooledge.org/moin_static198/modernized/css/print.c=
ss">
<link rel=3D"stylesheet" type=3D"text/css" charset=3D"utf-8" media=3D"proje=
ction" href=3D"https://mywiki.wooledge.org/moin_static198/modernized/css/pr=
ojection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel=3D"stylesheet" type=3D"text/css" charset=3D"utf-8" media=3D"al=
l" href=3D"/moin_static198/modernized/css/msie.css">
<![endif]-->


<link rel=3D"alternate" title=3D"Greg's Wiki: ProcessManagement" href=3D"ht=
tps://mywiki.wooledge.org/ProcessManagement?diffs=3D1&amp;show_att=3D1&amp;=
action=3Drss_rc&amp;unique=3D0&amp;page=3DProcessManagement&amp;ddiffs=3D1"=
 type=3D"application/rss+xml">
<link rel=3D"alternate" type=3D"application/wiki" title=3D"Edit" href=3D"ht=
tps://mywiki.wooledge.org/ProcessManagement?action=3Dedit">

<link rel=3D"Start" href=3D"https://mywiki.wooledge.org/EnglishFrontPage">
<link rel=3D"Alternate" title=3D"Wiki Markup" href=3D"https://mywiki.wooled=
ge.org/ProcessManagement?action=3Draw">
<link rel=3D"Alternate" media=3D"print" title=3D"Print View" href=3D"https:=
//mywiki.wooledge.org/ProcessManagement?action=3Dprint">
<link rel=3D"Search" href=3D"https://mywiki.wooledge.org/FindPage">
<link rel=3D"Index" href=3D"https://mywiki.wooledge.org/TitleIndex">
<link rel=3D"Glossary" href=3D"https://mywiki.wooledge.org/WordIndex">
<link rel=3D"Help" href=3D"https://mywiki.wooledge.org/HelpOnFormatting">
</head>

<body lang=3D"en" dir=3D"ltr">

<div id=3D"header">

<form id=3D"searchform" method=3D"get" action=3D"https://mywiki.wooledge.or=
g/ProcessManagement">
<div>


<label for=3D"searchinput" style=3D"display: none;">Search:</label>
<input id=3D"searchinput" type=3D"text" name=3D"value" value=3D"" size=3D"2=
0" alt=3D"Search" class=3D"disabled">
<input id=3D"titlesearch" name=3D"titlesearch" type=3D"submit" value=3D"Tit=
les" alt=3D"Search Titles" disabled=3D"">
<input id=3D"fullsearch" name=3D"fullsearch" type=3D"submit" value=3D"Text"=
 alt=3D"Search Full Text" disabled=3D"">
</div>
</form>


<div id=3D"logo"><a href=3D"https://mywiki.wooledge.org/EnglishFrontPage"><=
img src=3D"https://mywiki.wooledge.org/moin_static198/common/moinmoin.png" =
alt=3D"MoinMoin Logo"></a></div>
<div id=3D"username"><a href=3D"https://mywiki.wooledge.org/ProcessManageme=
nt?action=3Dlogin" id=3D"login" rel=3D"nofollow">Login</a></div>
<h1 id=3D"locationline">

<span id=3D"pagelocation"><a href=3D"https://mywiki.wooledge.org/ProcessMan=
agement">ProcessManagement</a></span>
</h1>


<ul id=3D"navibar">
<li class=3D"wikilink"><a href=3D"https://mywiki.wooledge.org/BashGuide">Ba=
shGuide</a></li><li class=3D"wikilink"><a href=3D"https://mywiki.wooledge.o=
rg/BashFAQ">BashFAQ</a></li><li class=3D"wikilink"><a href=3D"https://mywik=
i.wooledge.org/RecentChanges">RecentChanges</a></li><li class=3D"wikilink">=
<a href=3D"https://mywiki.wooledge.org/FindPage">FindPage</a></li><li class=
=3D"wikilink"><a href=3D"https://mywiki.wooledge.org/HelpContents">HelpCont=
ents</a></li><li class=3D"current"><a href=3D"https://mywiki.wooledge.org/P=
rocessManagement">ProcessManagement</a></li>
</ul>

<div id=3D"pageline"><hr style=3D"display:none;"></div>

<ul class=3D"editbar"><li><a href=3D"https://mywiki.wooledge.org/ProcessMan=
agement?action=3Dedit&amp;editor=3Dtext" name=3D"texteditlink" rel=3D"nofol=
low">Edit (Text)</a></li><li><a href=3D"https://mywiki.wooledge.org/Process=
Management?action=3Dedit&amp;editor=3Dgui">Edit (GUI)</a></li><li class=3D"=
toggleCommentsButton" style=3D"display:none;"><a href=3D"https://mywiki.woo=
ledge.org/ProcessManagement#" class=3D"nbcomment">Comments</a></li><li><a c=
lass=3D"nbinfo" href=3D"https://mywiki.wooledge.org/ProcessManagement?actio=
n=3Dinfo" rel=3D"nofollow">Info</a></li><li><a class=3D"nbattachments" href=
=3D"https://mywiki.wooledge.org/ProcessManagement?action=3DAttachFile" rel=
=3D"nofollow">Attachments</a></li><li>
<form class=3D"actionsmenu" method=3D"GET" action=3D"https://mywiki.wooledg=
e.org/ProcessManagement">
<div>
   =20
    <select name=3D"action">
        <option value=3D"show">More Actions:</option><option value=3D"raw">=
Raw Text</option>
<option value=3D"print">Print View</option>
<option value=3D"RenderAsDocbook">Render as Docbook</option>
<option value=3D"refresh">Delete Cache</option>
<option value=3D"show" disabled=3D"" class=3D"disabled">-------------------=
-----</option>
<option value=3D"SpellCheck">Check Spelling</option>
<option value=3D"LikePages">Like Pages</option>
<option value=3D"LocalSiteMap">Local Site Map</option>
<option value=3D"show" disabled=3D"" class=3D"disabled">-------------------=
-----</option>
<option value=3D"RenamePage" disabled=3D"" class=3D"disabled">Rename Page</=
option>
<option value=3D"DeletePage" disabled=3D"" class=3D"disabled">Delete Page</=
option>
<option value=3D"show" disabled=3D"" class=3D"disabled">-------------------=
-----</option>
<option value=3D"show" disabled=3D"" class=3D"disabled">Subscribe User</opt=
ion>
<option value=3D"show" disabled=3D"" class=3D"disabled">-------------------=
-----</option>
<option value=3D"show" disabled=3D"" class=3D"disabled">Remove Spam</option=
>
<option value=3D"show" disabled=3D"" class=3D"disabled">Revert to this revi=
sion</option>
<option value=3D"PackagePages">Package Pages</option>
<option value=3D"SyncPages">Sync Pages</option>
<option value=3D"show" disabled=3D"" class=3D"disabled">-------------------=
-----</option>
<option value=3D"Load">Load</option>
<option value=3D"Save">Save</option>
<option value=3D"SlideShow">SlideShow</option>
    </select>
   =20
   =20
</div>

</form>
</li></ul>

</div>

<div id=3D"page" lang=3D"en" dir=3D"ltr">
<div dir=3D"ltr" id=3D"content" lang=3D"en"><span class=3D"anchor" id=3D"to=
p"></span>
<span class=3D"anchor" id=3D"line-1"></span><p class=3D"line874">This is st=
ill a work in progress. Expect some rough edges. <span class=3D"anchor" id=
=3D"line-2"></span><span class=3D"anchor" id=3D"line-3"></span></p><p class=
=3D"line867"></p><div class=3D"table-of-contents"><p class=3D"table-of-cont=
ents-heading">Contents</p><ol><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#The_basics">The ba=
sics</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#Simple_questions">=
Simple questions</a><ol><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#How_do_I_run_a_job=
_in_the_background.3F">How do I run a job in the background?</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#My_script_runs_a_j=
ob_in_the_background.__How_do_I_get_its_PID.3F">My script runs a job in the=
 background.  How do I get its PID?</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#OK.2C_I_have_its_P=
ID.__How_do_I_check_that_it.27s_still_running.3F">OK, I have its PID.  How =
do I check that it's still running?</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#I_want_to_do_somet=
hing_with_a_process_I_started_earlier">I want to do something with a proces=
s I started earlier</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#How_do_I_kill_a_pr=
ocess_by_name.3F__I_need_to_get_the_PID_out_of_ps_aux_.7C_grep_....">How do=
 I kill a process by name?  I need to get the PID out of ps aux | grep ....=
</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#But_I.27m_on_some_=
old_legacy_Unix_system_that_doesn.27t_have_pgrep.21__What_do_I_do.3F">But I=
'm on some old legacy Unix system that doesn't have pgrep!  What do I do?</=
a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#I_want_to_run_some=
thing_in_the_background_and_then_log_out.">I want to run something in the b=
ackground and then log out.</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#I.27m_trying_to_ki=
ll_-9_my_job_but_blah_blah_blah...">I'm trying to kill -9 my job but blah b=
lah blah...</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#Make_SURE_you_have=
_run_and_understood_these_commands:">Make SURE you have run and understood =
these commands:</a></li></ol></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#Advanced_questions=
">Advanced questions</a><ol><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#I_want_to_run_two_=
jobs_in_the_background.2C_and_then_wait_until_they_both_finish.">I want to =
run two jobs in the background, and then wait until they both finish.</a></=
li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#How_can_I_check_to=
_see_if_my_game_server_is_still_running.3F__I.27ll_put_a_script_in_crontab.=
2C_and_if_it.27s_not_running.2C_I.27ll_restart_it...">How can I check to se=
e if my game server is still running?  I'll put a script in crontab, and if=
 it's not running, I'll restart it...</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#How_do_I_make_sure=
_only_one_copy_of_my_script_can_run_at_a_time.3F">How do I make sure only o=
ne copy of my script can run at a time?</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#I_want_to_process_=
a_bunch_of_files_in_parallel.2C_and_when_one_finishes.2C_I_want_to_start_th=
e_next._And_I_want_to_make_sure_there_are_exactly_5_jobs_running_at_a_time.=
">I want to process a bunch of files in parallel, and when one finishes, I =
want to start the next. And I want to make sure there are exactly 5 jobs ru=
nning at a time.</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#My_script_runs_a_p=
ipeline.__When_the_script_is_killed.2C_I_want_the_pipeline_to_die_too.">My =
script runs a pipeline.  When the script is killed, I want the pipeline to =
die too.</a></li></ol></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#How_to_work_with_p=
rocesses">How to work with processes</a><ol><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#PIDs_and_parents">=
PIDs and parents</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#The_risk_of_lettin=
g_the_parent_die">The risk of letting the parent die</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#The_risk_of_parsin=
g_the_process_tree">The risk of parsing the process tree</a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#Doing_it_right">Do=
ing it right</a><ol><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#Starting_a_process=
_and_remembering_its_PID">Starting a process and remembering its PID</a></l=
i><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#Checking_up_on_you=
r_process_or_terminating_it">Checking up on your process or terminating it<=
/a></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#Starting_a_.22daem=
on.22_and_checking_whether_it_started_successfully">Starting a "daemon" and=
 checking whether it started successfully</a></li></ol></li></ol></li><li>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#On_processes.2C_en=
vironments_and_inheritance">On processes, environments and inheritance</a><=
/li></ol></div> <span class=3D"anchor" id=3D"line-4"></span><span class=3D"=
anchor" id=3D"line-5"></span><p class=3D"line867"><span class=3D"anchor" id=
=3D"basics"></span> <span class=3D"anchor" id=3D"line-6"></span>
</p><h1 id=3D"The_basics">The basics</h1>
<span class=3D"anchor" id=3D"line-7"></span><span class=3D"anchor" id=3D"li=
ne-8"></span><p class=3D"line862">A <strong>process</strong> is a running i=
nstance of a program in memory.  Every process is identified by a number, c=
alled the <strong>PID</strong>, or <strong>Process IDentifier</strong>.  Ea=
ch process has its own privately allocated segment of memory, which is not =
accessible from any other process.  This is where it stores its variables a=
nd other data. <span class=3D"anchor" id=3D"line-9"></span><span class=3D"a=
nchor" id=3D"line-10"></span></p><p class=3D"line862">The kernel keeps trac=
k of all these processes, and stores a little bit of basic metadata about t=
hem in a <em>process table</em>.  However, for the most part, each process =
is autonomous, within the privileges allowed to it by the kernel.  Once a p=
rocess has been started, it is difficult to do <em>anything</em> to it othe=
r than suspend (pause) it, or terminate it. <span class=3D"anchor" id=3D"li=
ne-11"></span><span class=3D"anchor" id=3D"line-12"></span></p><p class=3D"=
line862">The metadata stored by the kernel includes a process "name" and "c=
ommand line".  These are not reliable; the "name" of a process is whatever =
you said it is when you ran it, and may have no relationship whatsoever to =
the program's file name.  (On some systems, running processes can also chan=
ge their own names.  For example, sendmail uses this to show its status.)  =
Therefore, when working with a process, you <em>must</em> know its PID in o=
rder to be able to do anything with it.  Looking for processes by name is e=
xtremely fallible. <span class=3D"anchor" id=3D"line-13"></span><span class=
=3D"anchor" id=3D"line-14"></span><span class=3D"anchor" id=3D"line-15"></s=
pan></p><p class=3D"line867"><span class=3D"anchor" id=3D"simple"></span> <=
span class=3D"anchor" id=3D"line-16"></span>
</p><h1 id=3D"Simple_questions">Simple questions</h1>
<span class=3D"anchor" id=3D"line-17"></span><span class=3D"anchor" id=3D"l=
ine-18"></span><p class=3D"line867">
</p><h2 id=3D"How_do_I_run_a_job_in_the_background.3F">How do I run a job i=
n the background?</h2>
<span class=3D"anchor" id=3D"line-19"></span><span class=3D"anchor" id=3D"l=
ine-20"></span><p class=3D"line867"><span class=3D"anchor" id=3D"line-21"><=
/span><span class=3D"anchor" id=3D"line-22"></span><span class=3D"anchor" i=
d=3D"line-1-1"></span></p><div class=3D"highlight bash"><div class=3D"codea=
rea" dir=3D"ltr" lang=3D"en">


<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-b5c6e1f7bb4989322596c1a2717999f77d8e6c00" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-b5c6e1f7bb4989322596c1a2717999f77d8e6=
c00_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-b5c6e1f7bb498932=
2596c1a2717999f77d8e6c00_1"></span><span class=3D"anchor" id=3D"line-1-2"><=
/span><span class=3D"ResWord">command</span> &amp;</span>
</pre></div></div><span class=3D"anchor" id=3D"line-23"></span><span class=
=3D"anchor" id=3D"line-24"></span><p class=3D"line862">By the way, '<tt cla=
ss=3D"backtick">&amp;</tt>' is a command separator in bash and other Bourne=
 shells. It can be used any place '<tt class=3D"backtick">;</tt>' can (but =
not <em>in addition to</em> '<tt class=3D"backtick">;</tt>' -- you have to =
choose one or the other).  Thus, you can write this: <span class=3D"anchor"=
 id=3D"line-25"></span><span class=3D"anchor" id=3D"line-26"></span></p><p =
class=3D"line867"><span class=3D"anchor" id=3D"line-27"></span><span class=
=3D"anchor" id=3D"line-28"></span><span class=3D"anchor" id=3D"line-1-3"></=
span></p><div class=3D"highlight bash"><div class=3D"codearea" dir=3D"ltr" =
lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-3c0988d363cd2cde1858ab5c18a28f07a63dd5b7" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-3c0988d363cd2cde1858ab5c18a28f07a63dd=
5b7_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-3c0988d363cd2cde=
1858ab5c18a28f07a63dd5b7_1"></span><span class=3D"anchor" id=3D"line-1-4"><=
/span><span class=3D"ResWord">command </span>one &amp; <span class=3D"ResWo=
rd">command </span>two &amp; <span class=3D"ResWord">command </span>three &=
amp;</span>
</pre></div></div><span class=3D"anchor" id=3D"line-29"></span><span class=
=3D"anchor" id=3D"line-30"></span><p class=3D"line874">which runs all three=
 in the background simultaneously, and is equivalent to: <span class=3D"anc=
hor" id=3D"line-31"></span><span class=3D"anchor" id=3D"line-32"></span></p=
><p class=3D"line867"><span class=3D"anchor" id=3D"line-33"></span><span cl=
ass=3D"anchor" id=3D"line-34"></span><span class=3D"anchor" id=3D"line-35">=
</span><span class=3D"anchor" id=3D"line-36"></span><span class=3D"anchor" =
id=3D"line-1-5"></span></p><div class=3D"highlight bash"><div class=3D"code=
area" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-4d65e97a98d0feb09835c1497e15b2a545fb4649" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-4d65e97a98d0feb09835c1497e15b2a545fb4=
649_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-4d65e97a98d0feb0=
9835c1497e15b2a545fb4649_1"></span><span class=3D"anchor" id=3D"line-1-6"><=
/span><span class=3D"ResWord">command </span>one &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-4d65e97a98d0feb09835c1497e15b2a545fb4649_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-4d65e97a98d0feb09835c=
1497e15b2a545fb4649_2"></span><span class=3D"anchor" id=3D"line-2-1"></span=
><span class=3D"ResWord">command </span>two &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-4d65e97a98d0feb09835c1497e15b2a545fb4649_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-4d65e97a98d0feb09835c=
1497e15b2a545fb4649_3"></span><span class=3D"anchor" id=3D"line-3-1"></span=
><span class=3D"ResWord">command </span>three &amp;</span>
</pre></div></div><span class=3D"anchor" id=3D"line-37"></span><span class=
=3D"anchor" id=3D"line-38"></span><p class=3D"line874">Or: <span class=3D"a=
nchor" id=3D"line-39"></span><span class=3D"anchor" id=3D"line-40"></span><=
/p><p class=3D"line867"><span class=3D"anchor" id=3D"line-41"></span><span =
class=3D"anchor" id=3D"line-42"></span><span class=3D"anchor" id=3D"line-1-=
7"></span></p><div class=3D"highlight bash"><div class=3D"codearea" dir=3D"=
ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-336dc047ce5293091f8a9b1b6ace8d2f71bc054e" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-336dc047ce5293091f8a9b1b6ace8d2f71bc0=
54e_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-336dc047ce529309=
1f8a9b1b6ace8d2f71bc054e_1"></span><span class=3D"anchor" id=3D"line-1-8"><=
/span><span class=3D"ResWord">for </span>i in one two three; <span class=3D=
"ResWord">do </span><span class=3D"ResWord">command</span> <span class=3D"S=
tring">"$i"</span> &amp; <span class=3D"ResWord">done</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-43"></span><span class=
=3D"anchor" id=3D"line-44"></span><p class=3D"line862">While both <tt class=
=3D"backtick">&amp;</tt> and <tt class=3D"backtick">;</tt> can be used to s=
eparate commands, <tt class=3D"backtick">&amp;</tt> runs them in the backgr=
ound and <tt class=3D"backtick">;</tt> runs them in sequence. <span class=
=3D"anchor" id=3D"line-45"></span><span class=3D"anchor" id=3D"line-46"></s=
pan></p><p class=3D"line867">
</p><h2 id=3D"My_script_runs_a_job_in_the_background.__How_do_I_get_its_PID=
.3F">My script runs a job in the background.  How do I get its PID?</h2>
<span class=3D"anchor" id=3D"line-47"></span><span class=3D"anchor" id=3D"l=
ine-48"></span><p class=3D"line862">The <tt>$!</tt> special parameter holds=
 the PID of the most recently executed background job.  You can use that la=
ter on in your script to keep track of the job, terminate it, record it in =
a PID file <em>(shudder)</em>, or whatever. <span class=3D"anchor" id=3D"li=
ne-49"></span><span class=3D"anchor" id=3D"line-50"></span></p><p class=3D"=
line867"><span class=3D"anchor" id=3D"line-51"></span><span class=3D"anchor=
" id=3D"line-52"></span><span class=3D"anchor" id=3D"line-53"></span><span =
class=3D"anchor" id=3D"line-1-9"></span></p><div class=3D"highlight bash"><=
div class=3D"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-29b1714511b7cc2076fe126616e6a5e85c13a13e" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-29b1714511b7cc2076fe126616e6a5e85c13a=
13e_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-29b1714511b7cc20=
76fe126616e6a5e85c13a13e_1"></span><span class=3D"anchor" id=3D"line-1-10">=
</span>myjob &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-29b1714511b7cc2076fe126616e6a5e85c13a13e_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-29b1714511b7cc2076fe1=
26616e6a5e85c13a13e_2"></span><span class=3D"anchor" id=3D"line-2-2"></span=
><span class=3D"ID">jobpid</span>=3D<span class=3D"ID">$!</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-54"></span><span class=
=3D"anchor" id=3D"line-55"></span><p class=3D"line867">
</p><h2 id=3D"OK.2C_I_have_its_PID.__How_do_I_check_that_it.27s_still_runni=
ng.3F">OK, I have its PID.  How do I check that it's still running?</h2>
<span class=3D"anchor" id=3D"line-56"></span><span class=3D"anchor" id=3D"l=
ine-57"></span><p class=3D"line867"><tt>kill&nbsp;-0&nbsp;"$pid"</tt> will =
check to see whether a signal is deliverable (<em>i.e.</em>, the process st=
ill exists).  If you need to check on a single child process asynchronously=
, that's the most portable solution.  You might also be able to use the <tt=
>wait</tt> shell command to block until the child (or children) terminate -=
- it depends on what your program has to do. <span class=3D"anchor" id=3D"l=
ine-58"></span><span class=3D"anchor" id=3D"line-59"></span></p><p class=3D=
"line862">There is no shell scripting equivalent to the <tt>select(2)</tt> =
or <tt>poll(2)</tt> system calls.  If you need to manage a complex suite of=
 child processes and events, don't try to do it in a shell script.  (That s=
aid, there are a few tricks in the <a href=3D"https://mywiki.wooledge.org/P=
rocessManagement#advanced">advanced</a> section of this page.) <span class=
=3D"anchor" id=3D"line-60"></span><span class=3D"anchor" id=3D"line-61"></s=
pan></p><p class=3D"line867">
</p><h2 id=3D"I_want_to_do_something_with_a_process_I_started_earlier">I wa=
nt to do something with a process I started earlier</h2>
<span class=3D"anchor" id=3D"line-62"></span><span class=3D"anchor" id=3D"l=
ine-63"></span><p class=3D"line874">Store the PID when you start the proces=
s and use that PID later on: <span class=3D"anchor" id=3D"line-64"></span><=
span class=3D"anchor" id=3D"line-65"></span></p><p class=3D"line867"><span =
class=3D"anchor" id=3D"line-66"></span><span class=3D"anchor" id=3D"line-67=
"></span><span class=3D"anchor" id=3D"line-68"></span><span class=3D"anchor=
" id=3D"line-69"></span><span class=3D"anchor" id=3D"line-1-11"></span></p>=
<div class=3D"highlight bash"><div class=3D"codearea" dir=3D"ltr" lang=3D"e=
n">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-8f6e24b2ca57e2a60a2f8947838c4e0cf6750f28" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-8f6e24b2ca57e2a60a2f8947838c4e0cf6750=
f28_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-8f6e24b2ca57e2a6=
0a2f8947838c4e0cf6750f28_1"></span><span class=3D"anchor" id=3D"line-1-12">=
</span>    <span class=3D"Comment"># Bourne</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8f6e24b2ca57e2a60a2f8947838c4e0cf6750f28_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-8f6e24b2ca57e2a60a2f8=
947838c4e0cf6750f28_2"></span><span class=3D"anchor" id=3D"line-2-3"></span=
><span class=3D"Comment"></span>    my child process &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8f6e24b2ca57e2a60a2f8947838c4e0cf6750f28_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-8f6e24b2ca57e2a60a2f8=
947838c4e0cf6750f28_3"></span><span class=3D"anchor" id=3D"line-3-2"></span=
>    <span class=3D"ID">childpid</span>=3D<span class=3D"ID">$!</span></spa=
n>
</pre></div></div><span class=3D"anchor" id=3D"line-70"></span><span class=
=3D"anchor" id=3D"line-71"></span><p class=3D"line862">If you're still in t=
he parent process that started the child process you want to do something w=
ith, that's perfect.  You're guaranteed the PID is your child process (dead=
 or alive), for the reasons <a href=3D"https://mywiki.wooledge.org/ProcessM=
anagement#parents">explained below</a>.  You can use <tt class=3D"backtick"=
>kill</tt> to signal it, terminate it, or just check whether it's still run=
ning.  You can use <tt class=3D"backtick">wait</tt> to wait for it to end o=
r to get its exit code if it has ended. <span class=3D"anchor" id=3D"line-7=
2"></span><span class=3D"anchor" id=3D"line-73"></span></p><p class=3D"line=
874">If you're NOT in the parent process that started the child process you=
 want to do something with, that's a shame.  Try restructuring your logic s=
o that you can be.  If that's not possible, the things you can do are a lit=
tle more limited and a little more risky. <span class=3D"anchor" id=3D"line=
-74"></span><span class=3D"anchor" id=3D"line-75"></span></p><p class=3D"li=
ne862">The parent process that created the child process should've written =
its PID to some place where you can access it.  Read the PID in from wherev=
er the parent stored it, and hope that no other process has accidentally ta=
ken control of the PID while you weren't looking.  You can use <tt class=3D=
"backtick">kill</tt> to signal it, terminate it, or just check whether it's=
 still running.  You <strong>cannot</strong> use <tt class=3D"backtick">wai=
t</tt> to wait for it or get its exit code; this is only possible from the =
child's parent process.  If you really want to wait for the process to end,=
 you can poll <tt class=3D"backtick">kill&nbsp;-0</tt>: <span class=3D"anch=
or" id=3D"line-76"></span><span class=3D"anchor" id=3D"line-77"></span><spa=
n class=3D"anchor" id=3D"line-78"></span><span class=3D"anchor" id=3D"line-=
79"></span><span class=3D"anchor" id=3D"line-80"></span><span class=3D"anch=
or" id=3D"line-1-13"></span></p><div class=3D"highlight bash"><div class=3D=
"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-6745697199eed02420235541df3ff196443e525e" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-6745697199eed02420235541df3ff196443e5=
25e_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-6745697199eed024=
20235541df3ff196443e525e_1"></span><span class=3D"anchor" id=3D"line-1-14">=
</span><span class=3D"ResWord">while </span><span class=3D"ResWord">kill</s=
pan> -0 <span class=3D"String">"$pid"</span>; <span class=3D"ResWord">do</s=
pan></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6745697199eed02420235541df3ff196443e525e_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-6745697199eed02420235=
541df3ff196443e525e_2"></span><span class=3D"anchor" id=3D"line-2-4"></span=
><span class=3D"ResWord">    </span>sleep 1</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6745697199eed02420235541df3ff196443e525e_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-6745697199eed02420235=
541df3ff196443e525e_3"></span><span class=3D"anchor" id=3D"line-3-3"></span=
><span class=3D"ResWord">done</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-81"></span><span class=
=3D"anchor" id=3D"line-82"></span><p class=3D"line862">Using PID files is r=
isky.  The PID in the file may have been recycled before you even got there=
.  The PID could be recycled <em>after</em> you read it from the file but <=
em>before</em> you send a fatal signal (a <a href=3D"https://mywiki.wooledg=
e.org/RaceCondition">RaceCondition</a>).  Even the loop shown above is risk=
y: the PID could be recycled in the middle of your polling loop, leaving yo=
u in an infinite loop. <span class=3D"anchor" id=3D"line-83"></span><span c=
lass=3D"anchor" id=3D"line-84"></span></p><p class=3D"line862">If you need =
to write programs that manage a process without maintaining a parent/child =
relationship, your best bet is to make sure that <em>all</em> of those prog=
rams run with the same User ID (UID) which is not used by any other program=
s on the system.  That way, if the PID gets recycled, your attempt to query=
/kill it will fail.  This is infinitely preferable to your sending <tt clas=
s=3D"backtick">SIGTERM</tt> to some innocent process. <span class=3D"anchor=
" id=3D"line-85"></span><span class=3D"anchor" id=3D"line-86"></span></p><p=
 class=3D"line867">
</p><h2 id=3D"How_do_I_kill_a_process_by_name.3F__I_need_to_get_the_PID_out=
_of_ps_aux_.7C_grep_....">How do I kill a process by name?  I need to get t=
he PID out of ps aux | grep ....</h2>
<span class=3D"anchor" id=3D"line-87"></span><span class=3D"anchor" id=3D"l=
ine-88"></span><p class=3D"line862">No, you don't.  Firstly, you probably d=
o NOT want to find a process by name AT ALL.  Make sure you have the PID of=
 the process and do what the above answer says.  If you don't know how to g=
et the PID: Only the process that created your process knows the real PID. =
 It should have stored it in a file for you.  If you are IN the parent proc=
ess, that's even better.  Put the PID in a variable (<tt>process&nbsp;&amp;=
&nbsp;mypid=3D$!</tt>) and use that. <span class=3D"anchor" id=3D"line-89">=
</span><span class=3D"anchor" id=3D"line-90"></span></p><p class=3D"line862=
">If for some silly reason you really want to get to a process purely by na=
me, you understand that this is a broken method, you don't care that this m=
ay set your hair on fire, and you want to do it anyway, you should probably=
 use a command called <tt>pkill</tt>.  You might also take a look at the co=
mmand <tt>killall</tt> if you're on a legacy GNU/Linux system, but <strong>=
be warned</strong>: <tt>killall</tt> on some systems kills <strong>every</s=
trong> process on the entire system.  It's best to avoid it unless you <em>=
really</em> need it. <span class=3D"anchor" id=3D"line-91"></span><span cla=
ss=3D"anchor" id=3D"line-92"></span></p><p class=3D"line862">(Mac OS X come=
s with <tt>killall</tt> but not <tt>pkill</tt>.  To get <tt>pkill</tt>, go =
to <a class=3D"http" href=3D"http://proctools.sourceforge.net/">http://proc=
tools.sourceforge.net/</a>.) <span class=3D"anchor" id=3D"line-93"></span><=
span class=3D"anchor" id=3D"line-94"></span></p><p class=3D"line862">If you=
 just wanted to check for the <em>existence</em> of a process by name, use =
<tt>pgrep</tt>. <span class=3D"anchor" id=3D"line-95"></span><span class=3D=
"anchor" id=3D"line-96"></span></p><p class=3D"line862">Please note that ch=
ecking/killing processes by name is <em>insecure</em>, because processes ca=
n lie about their names, and there is nothing unique about the name of a pr=
ocess. <span class=3D"anchor" id=3D"line-97"></span><span class=3D"anchor" =
id=3D"line-98"></span></p><p class=3D"line867">
</p><h2 id=3D"But_I.27m_on_some_old_legacy_Unix_system_that_doesn.27t_have_=
pgrep.21__What_do_I_do.3F">But I'm on some old legacy Unix system that does=
n't have pgrep!  What do I do?</h2>
<span class=3D"anchor" id=3D"line-99"></span><span class=3D"anchor" id=3D"l=
ine-100"></span><p class=3D"line862">As stated above, checking or killing p=
rocesses by name is an extremely bad idea in the first place.  So rather th=
an agonize about shortcut tools like <tt class=3D"backtick">pgrep</tt> that=
 you don't have, you'd do better to implement some sort of robust process m=
anagement using the techniques we'll talk about later.  But people love sho=
rtcuts, so let me fill in some legacy Unix issues and tricks here, <strong>=
even though you should not be using such things</strong>. <span class=3D"an=
chor" id=3D"line-101"></span><span class=3D"anchor" id=3D"line-102"></span>=
</p><p class=3D"line862">A legacy Unix system typically has no tool besides=
 <tt class=3D"backtick">ps</tt> for inspecting running processes as a human=
 system administrator.  People then think that this is an appropriate tool =
to use in a script, even though it isn't.  They fall into the mental trap o=
f thinking that since this is the only tool provided by the OS for troubles=
hooting runaway processes as a human being, that it must be an appropriate =
tool for setting up services. <span class=3D"anchor" id=3D"line-103"></span=
><span class=3D"anchor" id=3D"line-104"></span></p><p class=3D"line862">The=
re are two entirely different <tt class=3D"backtick">ps</tt> commands on le=
gacy Unix systems: System V Unix style (<tt class=3D"backtick">ps&nbsp;-ef<=
/tt>) and BSD Unix style (<tt class=3D"backtick">ps&nbsp;auxw</tt>).  In so=
me slightly-less-old Unix systems, the two different syntaxes are combined,=
 and the presence or absence of a hyphen tells <tt class=3D"backtick">ps</t=
t> which set of option letters is being used.  (If you ever see <tt class=
=3D"backtick">ps&nbsp;-auxw</tt> with a hyphen, throw the program away imme=
diately.)  POSIX uses the System V style, and adds a <tt class=3D"backtick"=
>-o</tt> option to tell <tt class=3D"backtick">ps</tt> which fields you wan=
t, so you don't have to write things like <tt class=3D"backtick">ps&nbsp;..=
.&nbsp;|&nbsp;awk&nbsp;'{print&nbsp;$2}'</tt> any more. <span class=3D"anch=
or" id=3D"line-105"></span><span class=3D"anchor" id=3D"line-106"></span></=
p><p class=3D"line862">Now, the second <em>real</em> problem with <tt class=
=3D"backtick">ps&nbsp;-ef&nbsp;|&nbsp;grep&nbsp;foo</tt> (after the fact th=
at process names are inherently unreliable) is that there is a <a href=3D"h=
ttps://mywiki.wooledge.org/RaceCondition">RaceCondition</a> in the output. =
 In this pipeline, both the <tt class=3D"backtick">ps</tt> and the <tt clas=
s=3D"backtick">grep</tt> are spawned either simultaneously or nearly simult=
aneously.  Depending on just how nearly simultaneously they are spawned, th=
e <tt class=3D"backtick">grep</tt> process might <em>or might not</em> show=
 up in the <tt class=3D"backtick">ps</tt> output.  And the <tt class=3D"bac=
ktick">grep&nbsp;foo</tt> command is going to match both processes -- the <=
tt class=3D"backtick">foo</tt> daemon or whatever, and the <tt class=3D"bac=
ktick">grep&nbsp;foo</tt> command as well.  Assuming both of them show up. =
 You might get just one. <span class=3D"anchor" id=3D"line-107"></span><spa=
n class=3D"anchor" id=3D"line-108"></span></p><p class=3D"line862">There ar=
e two workarounds for that issue.  The first is to filter out the <tt class=
=3D"backtick">grep</tt> command.  This is typically done by running <tt cla=
ss=3D"backtick">ps&nbsp;-ef&nbsp;|&nbsp;grep&nbsp;-v&nbsp;grep&nbsp;|&nbsp;=
grep&nbsp;foo</tt>.  Note that the <tt class=3D"backtick">grep&nbsp;-v</tt>=
 is done <em>first</em> so that it is not the final command in the pipeline=
.  This is so that the final command in the pipeline is the one whose exit =
status actually matters.  This allows commands like the following to work p=
roperly: <span class=3D"anchor" id=3D"line-109"></span><span class=3D"ancho=
r" id=3D"line-110"></span></p><p class=3D"line867"><span class=3D"anchor" i=
d=3D"line-111"></span><span class=3D"anchor" id=3D"line-112"></span><span c=
lass=3D"anchor" id=3D"line-1-15"></span></p><div class=3D"highlight bash"><=
div class=3D"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-652d431b37e5ff3da65f76b153d4f786639f0f07" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-652d431b37e5ff3da65f76b153d4f786639f0=
f07_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-652d431b37e5ff3d=
a65f76b153d4f786639f0f07_1"></span><span class=3D"anchor" id=3D"line-1-16">=
</span>  <span class=3D"ResWord">if </span>ps -ef | grep -v grep | grep -q =
foo; <span class=3D"ResWord">then</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-113"></span><span class=
=3D"anchor" id=3D"line-114"></span><p class=3D"line862">The second workarou=
nd involves crafting a <tt class=3D"backtick">grep&nbsp;command</tt> that w=
ill match the <tt class=3D"backtick">foo</tt> process but not the <tt class=
=3D"backtick">grep</tt> itself.  There are many variants on this theme, but=
 one of the most common is: <span class=3D"anchor" id=3D"line-115"></span><=
span class=3D"anchor" id=3D"line-116"></span></p><p class=3D"line867"><span=
 class=3D"anchor" id=3D"line-117"></span><span class=3D"anchor" id=3D"line-=
118"></span><span class=3D"anchor" id=3D"line-1-17"></span></p><div class=
=3D"highlight bash"><div class=3D"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-406b022e5e60ee59929e3a3d1d4affc9668d9dca" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-406b022e5e60ee59929e3a3d1d4affc9668d9=
dca_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-406b022e5e60ee59=
929e3a3d1d4affc9668d9dca_1"></span><span class=3D"anchor" id=3D"line-1-18">=
</span>  <span class=3D"ResWord">if </span>ps -ef | grep <span class=3D"Str=
ing">'[f]oo'</span>; <span class=3D"ResWord">then</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-119"></span><span class=
=3D"anchor" id=3D"line-120"></span><p class=3D"line862">You'll likely run i=
nto this a few times.  The <a href=3D"https://mywiki.wooledge.org/RegularEx=
pression">RegularExpression</a> <tt class=3D"backtick">[f]oo</tt> matches o=
nly the literal string <tt class=3D"backtick">foo</tt>; it does not match t=
he literal string <tt class=3D"backtick">[f]oo</tt>, and therefore the <tt =
class=3D"backtick">grep</tt> command won't be matched either.  This approac=
h saves one forked process (the <tt class=3D"backtick">grep&nbsp;-v</tt>), =
and some people find it clever. <span class=3D"anchor" id=3D"line-121"></sp=
an><span class=3D"anchor" id=3D"line-122"></span></p><p class=3D"line874">I=
've seen one person try to do this: <span class=3D"anchor" id=3D"line-123">=
</span><span class=3D"anchor" id=3D"line-124"></span></p><p class=3D"line86=
7"><span class=3D"anchor" id=3D"line-125"></span><span class=3D"anchor" id=
=3D"line-126"></span><span class=3D"anchor" id=3D"line-127"></span><span cl=
ass=3D"anchor" id=3D"line-1-19"></span></p><div class=3D"highlight bash"><d=
iv class=3D"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-0bdd4ff5ac304572bcdd6140ae47dab6e6f4b2a0" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-0bdd4ff5ac304572bcdd6140ae47dab6e6f4b=
2a0_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-0bdd4ff5ac304572=
bcdd6140ae47dab6e6f4b2a0_1"></span><span class=3D"anchor" id=3D"line-1-20">=
</span>  <span class=3D"Comment"># THIS IS BAD!  DO NOT USE THIS!</span></s=
pan>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0bdd4ff5ac304572bcdd6140ae47dab6e6f4b2a0_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-0bdd4ff5ac304572bcdd6=
140ae47dab6e6f4b2a0_2"></span><span class=3D"anchor" id=3D"line-2-5"></span=
><span class=3D"Comment"></span>  <span class=3D"ResWord">if </span>ps -ef =
| grep -q -m 1 foo; <span class=3D"ResWord">then</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-128"></span><span class=
=3D"anchor" id=3D"line-129"></span><p class=3D"line862">Not only does this =
use a nonstandard GNU extension (<tt class=3D"backtick">grep&nbsp;-m</tt> -=
- stop after M matches), but it completely fails to avoid the race conditio=
n.  If the race condition produces both <tt class=3D"backtick">grep</tt> an=
d <tt class=3D"backtick">foo</tt> lines, there's no guarantee the <tt class=
=3D"backtick">foo</tt> one will be first!  So, this is even worse than what=
 we started with. <span class=3D"anchor" id=3D"line-130"></span><span class=
=3D"anchor" id=3D"line-131"></span></p><p class=3D"line874">Anyway, these a=
re just explanations of tricks you might see in other people's code, so tha=
t you can guess what they're attempting to do.  You won't be writing such h=
acks, I hope. <span class=3D"anchor" id=3D"line-132"></span><span class=3D"=
anchor" id=3D"line-133"></span></p><p class=3D"line867">
</p><h2 id=3D"I_want_to_run_something_in_the_background_and_then_log_out.">=
I want to run something in the background and then log out.</h2>
<span class=3D"anchor" id=3D"line-134"></span><span class=3D"anchor" id=3D"=
line-135"></span><p class=3D"line862">If you want to be able to reconnect t=
o it later, use <tt>screen</tt> or <tt>tmux</tt>.  Launch either, then run =
whatever you want to run in the foreground, and detach (screen with <strong=
>Ctrl-A d</strong> and tmux with <strong>Ctrl-B d</strong>).  You can reatt=
ach (as long as you didn't reboot the server) with <tt>screen&nbsp;-x</tt> =
to screen and with <tt>tmux&nbsp;attach</tt> to tmux.  You can even attach =
multiple times, and each attached terminal will see (and control) the same =
thing.  This is also great for remote teaching situations. <span class=3D"a=
nchor" id=3D"line-136"></span><span class=3D"anchor" id=3D"line-137"></span=
></p><p class=3D"line862">If you can't or don't want to do that, the tradit=
ional approach still works: <tt>nohup&nbsp;something&nbsp;&amp;</tt> <span =
class=3D"anchor" id=3D"line-138"></span><span class=3D"anchor" id=3D"line-1=
39"></span></p><p class=3D"line862">Bash also has a <tt>disown</tt> command=
, if you want to log out with a background job running, and you forgot to <=
tt>nohup</tt> it initially. <span class=3D"anchor" id=3D"line-140"></span><=
span class=3D"anchor" id=3D"line-141"></span></p><p class=3D"line867"><span=
 class=3D"anchor" id=3D"line-142"></span><span class=3D"anchor" id=3D"line-=
143"></span><span class=3D"anchor" id=3D"line-144"></span><span class=3D"an=
chor" id=3D"line-145"></span><span class=3D"anchor" id=3D"line-146"></span>=
<span class=3D"anchor" id=3D"line-1-21"></span></p><div class=3D"highlight =
bash"><div class=3D"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-358190bc504a1f2fb02afd989fb468d692731fdc" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-358190bc504a1f2fb02afd989fb468d692731=
fdc_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-358190bc504a1f2f=
b02afd989fb468d692731fdc_1"></span><span class=3D"anchor" id=3D"line-1-22">=
</span>sleep 1000</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-358190bc504a1f2fb02afd989fb468d692731fdc_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-358190bc504a1f2fb02af=
d989fb468d692731fdc_2"></span><span class=3D"anchor" id=3D"line-2-6"></span=
>Ctrl-Z</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-358190bc504a1f2fb02afd989fb468d692731fdc_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-358190bc504a1f2fb02af=
d989fb468d692731fdc_3"></span><span class=3D"anchor" id=3D"line-3-4"></span=
><span class=3D"ResWord">bg</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-358190bc504a1f2fb02afd989fb468d692731fdc_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-358190bc504a1f2fb02af=
d989fb468d692731fdc_4"></span><span class=3D"anchor" id=3D"line-4-1"></span=
><span class=3D"ResWord"></span><span class=3D"ResWord">disown</span></span=
>
</pre></div></div><span class=3D"anchor" id=3D"line-147"></span><span class=
=3D"anchor" id=3D"line-148"></span><p class=3D"line862">If you need to logo=
ut of an ssh session with background jobs still running, make sure their fi=
le descriptors have been redirected so they aren't holding the terminal ope=
n, or <a href=3D"https://mywiki.wooledge.org/BashFAQ/063">the ssh client ma=
y hang</a>. <span class=3D"anchor" id=3D"line-149"></span><span class=3D"an=
chor" id=3D"line-150"></span></p><p class=3D"line867">
</p><h2 id=3D"I.27m_trying_to_kill_-9_my_job_but_blah_blah_blah...">I'm try=
ing to kill -9 my job but blah blah blah...</h2>
<span class=3D"anchor" id=3D"line-151"></span><span class=3D"anchor" id=3D"=
line-152"></span><p class=3D"line862">Woah!  <strong>Stop right there!</str=
ong>  Do <em>not</em> use <tt>kill&nbsp;-9</tt>, ever.  For any reason.  Un=
less you <em>wrote</em> the program to which you're sending the SIGKILL, an=
d <em>know</em> that you can clean up the mess it leaves.  Because you're d=
ebugging it. <span class=3D"anchor" id=3D"line-153"></span><span class=3D"a=
nchor" id=3D"line-154"></span></p><p class=3D"line862">If a process is not =
responding to normal signals, it's probably in "state D" (as shown on <tt>p=
s&nbsp;u</tt>), which means it's currently executing a system call.  If tha=
t's the case, you're probably looking at a dead hard drive, or a dead NFS s=
erver, or a kernel bug, or something else along those lines.  And you won't=
 be able to kill the process <em>anyway</em>, SIGKILL or not. <span class=
=3D"anchor" id=3D"line-155"></span><span class=3D"anchor" id=3D"line-156"><=
/span></p><p class=3D"line862">If the process is ignoring normal SIGTERMs, =
then <em>get the source code and fix it</em>! <span class=3D"anchor" id=3D"=
line-157"></span><span class=3D"anchor" id=3D"line-158"></span></p><p class=
=3D"line874">If you have an employee whose first instinct any time a job ne=
eds to be terminated is to break out the fucking howitzers, then fire him o=
r her.  Now. <span class=3D"anchor" id=3D"line-159"></span><span class=3D"a=
nchor" id=3D"line-160"></span></p><p class=3D"line867">
</p><h2 id=3D"Make_SURE_you_have_run_and_understood_these_commands:">Make S=
URE you have run and understood these commands:</h2>
<span class=3D"anchor" id=3D"line-161"></span><ul><li><p class=3D"line891">=
<tt>help&nbsp;kill</tt> <span class=3D"anchor" id=3D"line-162"></span></p><=
/li><li><p class=3D"line891"><tt>help&nbsp;trap</tt> <span class=3D"anchor"=
 id=3D"line-163"></span></p></li><li><p class=3D"line891"><tt>man&nbsp;pkil=
l</tt> <span class=3D"anchor" id=3D"line-164"></span></p></li><li><p class=
=3D"line891"><tt>man&nbsp;pgrep</tt> <span class=3D"anchor" id=3D"line-165"=
></span><span class=3D"anchor" id=3D"line-166"></span></p></li></ul><p clas=
s=3D"line867"><em>OK, now let's move on to the interesting stuff....</em> <=
span class=3D"anchor" id=3D"line-167"></span><span class=3D"anchor" id=3D"l=
ine-168"></span></p><p class=3D"line867"><span class=3D"anchor" id=3D"advan=
ced"></span> <span class=3D"anchor" id=3D"line-169"></span>
</p><h1 id=3D"Advanced_questions">Advanced questions</h1>
<span class=3D"anchor" id=3D"line-170"></span><span class=3D"anchor" id=3D"=
line-171"></span><p class=3D"line867">
</p><h2 id=3D"I_want_to_run_two_jobs_in_the_background.2C_and_then_wait_unt=
il_they_both_finish.">I want to run two jobs in the background, and then wa=
it until they both finish.</h2>
<span class=3D"anchor" id=3D"line-172"></span><span class=3D"anchor" id=3D"=
line-173"></span><p class=3D"line862">By default, <tt>wait</tt> waits for a=
ll of your shell's children to exit. <span class=3D"anchor" id=3D"line-174"=
></span><span class=3D"anchor" id=3D"line-175"></span></p><p class=3D"line8=
67"><span class=3D"anchor" id=3D"line-176"></span><span class=3D"anchor" id=
=3D"line-177"></span><span class=3D"anchor" id=3D"line-178"></span><span cl=
ass=3D"anchor" id=3D"line-179"></span><span class=3D"anchor" id=3D"line-1-2=
3"></span></p><div class=3D"highlight bash"><div class=3D"codearea" dir=3D"=
ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-ca93553f1b5af4657f9f8e643988302c19e82b58" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-ca93553f1b5af4657f9f8e643988302c19e82=
b58_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-ca93553f1b5af465=
7f9f8e643988302c19e82b58_1"></span><span class=3D"anchor" id=3D"line-1-24">=
</span>job1 &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-ca93553f1b5af4657f9f8e643988302c19e82b58_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-ca93553f1b5af4657f9f8=
e643988302c19e82b58_2"></span><span class=3D"anchor" id=3D"line-2-7"></span=
>job2 &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-ca93553f1b5af4657f9f8e643988302c19e82b58_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-ca93553f1b5af4657f9f8=
e643988302c19e82b58_3"></span><span class=3D"anchor" id=3D"line-3-5"></span=
><span class=3D"ResWord">wait</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-180"></span><span class=
=3D"anchor" id=3D"line-181"></span><p class=3D"line862">You can specify one=
 or more jobs (either by PID, or by <em>jobspec</em> -- see Job Control for=
 that).  The <tt class=3D"backtick">help&nbsp;wait</tt> page is misleading =
(implying that only one argument may be given); refer to the full Bash manu=
al instead. <span class=3D"anchor" id=3D"line-182"></span><span class=3D"an=
chor" id=3D"line-183"></span></p><p class=3D"line862">There is no way to wa=
it for "child process foo to end, OR something else to happen", other than =
<a href=3D"https://mywiki.wooledge.org/SignalTrap">setting a trap</a>, whic=
h will only help if "something else to happen" is a signal being sent to th=
e script. <span class=3D"anchor" id=3D"line-184"></span><span class=3D"anch=
or" id=3D"line-185"></span></p><p class=3D"line874">There is also no way to=
 wait for a process that is not your child.  You can't hang around the scho=
olyard and pick up someone else's kids. <span class=3D"anchor" id=3D"line-1=
86"></span><span class=3D"anchor" id=3D"line-187"></span></p><p class=3D"li=
ne867"><span class=3D"anchor" id=3D"respawning"></span> <span class=3D"anch=
or" id=3D"line-188"></span>
</p><h2 id=3D"How_can_I_check_to_see_if_my_game_server_is_still_running.3F_=
_I.27ll_put_a_script_in_crontab.2C_and_if_it.27s_not_running.2C_I.27ll_rest=
art_it...">How can I check to see if my game server is still running?  I'll=
 put a script in crontab, and if it's not running, I'll restart it...</h2>
<span class=3D"anchor" id=3D"line-189"></span><span class=3D"anchor" id=3D"=
line-190"></span><p class=3D"line862">We get that question (in various form=
s) <em>way</em> too often.  A user has some daemon, and they want to restar=
t it whenever it dies.  Yes, one could probably write a bash script that wo=
uld try to parse the output of <tt>ps</tt> (or preferably <tt>pgrep</tt> if=
 your system has it), and try to <em>guess</em> which process ID belongs to=
 the daemon we want, and try to <em>guess</em> whether it's not there any m=
ore.  But that's haphazard and dangerous.  There are much better ways. <spa=
n class=3D"anchor" id=3D"line-191"></span><span class=3D"anchor" id=3D"line=
-192"></span></p><p class=3D"line862">Most Unix systems already <em>have</e=
m> a feature that allows you to respawn dead processes: <tt>init</tt> and <=
tt>inittab</tt>.  If you want to make a new daemon instance pop up whenever=
 the old one dies, typically all you need to do is put an appropriate line =
into <tt>/etc/inittab</tt> with the "respawn" action in column 3, and your =
process's invocation in column 4.  Then run <tt class=3D"backtick">telinit&=
nbsp;q</tt> or your system's equivalent to make init re-read its <tt class=
=3D"backtick">inittab</tt>. <span class=3D"anchor" id=3D"line-193"></span><=
span class=3D"anchor" id=3D"line-194"></span></p><p class=3D"line862">Some =
Unix systems don't have <tt>inittab</tt>, and some system administrators mi=
ght want finer control over the daemons and their logging.  Those people ma=
y want to look into <a class=3D"http" href=3D"http://cr.yp.to/daemontools.h=
tml">daemontools</a>, or <a class=3D"http" href=3D"http://smarden.org/runit=
/">runit</a>. <span class=3D"anchor" id=3D"line-195"></span><span class=3D"=
anchor" id=3D"line-196"></span></p><p class=3D"line862">This leads into the=
 issue of self-daemonizing programs.  There was a trend during the 1980s fo=
r Unix daemons such as <tt>inetd</tt> to put themselves into the background=
 automatically.  It seems to be particularly common on BSD systems, althoug=
h it's widespread across all flavors of Unix. <span class=3D"anchor" id=3D"=
line-197"></span><span class=3D"anchor" id=3D"line-198"></span></p><p class=
=3D"line862">The problem with this is that any sane method of managing a da=
emon requires that you <em>keep track of it after starting it</em>.  If <tt=
>init</tt> is told to respawn a command, it simply launches that command as=
 a child, then uses the <tt>wait()</tt> system call; so, when the child exi=
ts, the parent can spawn another one.  Daemontools works the same way: a us=
er-supplied <tt>run</tt> script establishes the environment, and then <tt>e=
xec</tt>s the process, thereby giving the daemontools supervisor direct par=
ental authority over the process, including standard input and output, etc.=
 <span class=3D"anchor" id=3D"line-199"></span><span class=3D"anchor" id=3D=
"line-200"></span></p><p class=3D"line862">If a process double-forks itself=
 into the background (the way <tt class=3D"backtick">inetd</tt> and <tt cla=
ss=3D"backtick">sendmail</tt> and <tt class=3D"backtick">named</tt> do), it=
 breaks the connection to its parent -- intentionally.  This makes it unman=
ageable; the parent can no longer receive the child's output, and can no lo=
nger <tt>wait()</tt> for the child in order to be informed of its death.  A=
nd the parent won't even know the new daemon's process ID.  The child has r=
un away from home without even leaving a note. <span class=3D"anchor" id=3D=
"line-201"></span><span class=3D"anchor" id=3D"line-202"></span></p><p clas=
s=3D"line862">So, the Unix/BSD people came up with workarounds... they crea=
ted "PID files", in which a long-running daemon would write its process ID,=
 since the parent had no other way to determine it.  But PID files are not =
reliable.  A daemon could have died, and then some other process could have=
 taken over its PID, rendering the PID file useless.  Or the PID file could=
 simply get deleted, or corrupted.  They came up with <tt>pgrep</tt> and <t=
t>pkill</tt> to attempt to track down processes by name instead of by numbe=
r... but what if the process doesn't have a unique name?  What if there's m=
ore than one of it at a time, like <tt>nfsd</tt> or Apache? <span class=3D"=
anchor" id=3D"line-203"></span><span class=3D"anchor" id=3D"line-204"></spa=
n></p><p class=3D"line862">These workarounds and tricks are only in place b=
ecause of the <em>original</em> hack of self-backgrounding.  Get rid of <em=
>that</em>, and everything else becomes easy!  Init or daemontools or runit=
 can just control the child process directly.  And even the most raw beginn=
er could write their own <a href=3D"https://mywiki.wooledge.org/WrapperScri=
pt">wrapper script</a>: <span class=3D"anchor" id=3D"line-205"></span><span=
 class=3D"anchor" id=3D"line-206"></span></p><p class=3D"line867"><span cla=
ss=3D"anchor" id=3D"line-207"></span><span class=3D"anchor" id=3D"line-208"=
></span><span class=3D"anchor" id=3D"line-209"></span><span class=3D"anchor=
" id=3D"line-210"></span><span class=3D"anchor" id=3D"line-211"></span><spa=
n class=3D"anchor" id=3D"line-1-25"></span></p><div class=3D"highlight bash=
"><div class=3D"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-7b609b4d1e5d39bb3658bd4d05d0f2818a13a160" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-7b609b4d1e5d39bb3658bd4d05d0f2818a13a=
160_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-7b609b4d1e5d39bb=
3658bd4d05d0f2818a13a160_1"></span><span class=3D"anchor" id=3D"line-1-26">=
</span>   <span class=3D"Comment">#!/bin/sh</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-7b609b4d1e5d39bb3658bd4d05d0f2818a13a160_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-7b609b4d1e5d39bb3658b=
d4d05d0f2818a13a160_2"></span><span class=3D"anchor" id=3D"line-2-8"></span=
><span class=3D"Comment"></span>   <span class=3D"ResWord">while</span> :; =
<span class=3D"ResWord">do</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-7b609b4d1e5d39bb3658bd4d05d0f2818a13a160_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-7b609b4d1e5d39bb3658b=
d4d05d0f2818a13a160_3"></span><span class=3D"anchor" id=3D"line-3-6"></span=
>      /my/game/server -foo -bar -baz &gt;&gt; /var/log/mygameserver 2&gt;&=
amp;1</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-7b609b4d1e5d39bb3658bd4d05d0f2818a13a160_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-7b609b4d1e5d39bb3658b=
d4d05d0f2818a13a160_4"></span><span class=3D"anchor" id=3D"line-4-2"></span=
>   <span class=3D"ResWord">done</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-212"></span><span class=
=3D"anchor" id=3D"line-213"></span><p class=3D"line862">Then simply arrange=
 for that to be executed at boot time, with a simple <tt>&amp;</tt> to put =
it in the background, and <em>voila</em>!  An instant one-shot respawn. <sp=
an class=3D"anchor" id=3D"line-214"></span><span class=3D"anchor" id=3D"lin=
e-215"></span></p><p class=3D"line862">Most modern software packages no lon=
ger require self-backgrounding; even for those where it's the default behav=
ior (for compatibility with older versions), there's often a switch or a se=
t of switches which allows one to control the process.  For instance, Samba=
's <tt>smbd</tt> now has a <tt>-F</tt> switch specifically for use with dae=
montools and other such programs. <span class=3D"anchor" id=3D"line-216"></=
span><span class=3D"anchor" id=3D"line-217"></span></p><p class=3D"line862"=
>If all else fails, you can try using <a class=3D"http" href=3D"http://cr.y=
p.to/daemontools/fghack.html">fghack</a> (from the daemontools package) to =
prevent the self-backgrounding. <span class=3D"anchor" id=3D"line-218"></sp=
an><span class=3D"anchor" id=3D"line-219"></span></p><p class=3D"line867">
</p><h2 id=3D"How_do_I_make_sure_only_one_copy_of_my_script_can_run_at_a_ti=
me.3F">How do I make sure only one copy of my script can run at a time?</h2=
>
<span class=3D"anchor" id=3D"line-220"></span><span class=3D"anchor" id=3D"=
line-221"></span><p class=3D"line862">First, ask yourself <em>why</em> you =
think that restriction is necessary.  Are you using a temporary file with a=
 fixed name, rather than <a href=3D"https://mywiki.wooledge.org/BashFAQ/062=
">generating a new temporary file in a secure manner</a> each time?  If so,=
 correct that bug in your script.  Are you using some system resource witho=
ut locking it to prevent corruption if multiple processes use it simultaneo=
usly?  In that case, you should probably use file locking, by rewriting you=
r application in a language that supports it. <span class=3D"anchor" id=3D"=
line-222"></span><span class=3D"anchor" id=3D"line-223"></span></p><p class=
=3D"line862">The naive answer to this question, which is given all too freq=
uently by well-meaning but inexperienced scripters, would be to run some va=
riant of <tt>ps&nbsp;-ef&nbsp;|&nbsp;grep&nbsp;-v&nbsp;grep&nbsp;|&nbsp;gre=
p&nbsp;"$(basename&nbsp;"$0")"&nbsp;|&nbsp;wc&nbsp;-l</tt> to count how man=
y copies of the script are in existence at the moment.  I won't even attemp=
t to describe how horribly wrong that approach is... if you can't see it fo=
r yourself, you'll simply have to take my word for it. <span class=3D"ancho=
r" id=3D"line-224"></span><span class=3D"anchor" id=3D"line-225"></span></p=
><p class=3D"line862">Unfortunately, bash has no facility for locking a fil=
e.  <a href=3D"https://mywiki.wooledge.org/BashFAQ/045">Bash FAQ #45</a> co=
ntains examples of using a directory, a symlink, etc. as a means of mutual =
exclusion; but you cannot lock a file directly. <span class=3D"anchor" id=
=3D"line-226"></span><span class=3D"anchor" id=3D"line-227"></span></p><ul>=
<li style=3D"list-style-type:none"><p class=3D"line891"><em>I believe you c=
an use <tt>(set&nbsp;-C;&nbsp;&gt;lockfile)</tt> to atomically create a loc=
kfile, please verify this. (see: <a href=3D"https://mywiki.wooledge.org/Bas=
hFAQ/045">Bash FAQ #45</a>) --Andy753421</em> <span class=3D"anchor" id=3D"=
line-228"></span><span class=3D"anchor" id=3D"line-229"></span></p></li></u=
l><p class=3D"line862">You could also run your program or shell script unde=
r the <a class=3D"http" href=3D"http://cr.yp.to/daemontools/setlock.html">s=
etlock</a> program from the daemontools package.  Presuming that you use th=
e same lockfile to prevent concurrent or simultaneous execution of your scr=
ipt(s), you have effectively made sure that your script will only run once.=
  Here's an example where we want to make sure that only one "sleep" is run=
ning at a given time. <span class=3D"anchor" id=3D"line-230"></span><span c=
lass=3D"anchor" id=3D"line-231"></span></p><p class=3D"line867"><span class=
=3D"anchor" id=3D"line-232"></span><span class=3D"anchor" id=3D"line-233"><=
/span><span class=3D"anchor" id=3D"line-234"></span><span class=3D"anchor" =
id=3D"line-235"></span><span class=3D"anchor" id=3D"line-236"></span><span =
class=3D"anchor" id=3D"line-1-27"></span></p><div class=3D"highlight bash">=
<div class=3D"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-23fd76b5c81a51e568e5334bc16fe354940dd27a" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-23fd76b5c81a51e568e5334bc16fe354940dd=
27a_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-23fd76b5c81a51e5=
68e5334bc16fe354940dd27a_1"></span><span class=3D"anchor" id=3D"line-1-28">=
</span><span class=3D"ID">$ </span>setlock -nX lockfile sleep 100 &amp;</sp=
an>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-23fd76b5c81a51e568e5334bc16fe354940dd27a_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-23fd76b5c81a51e568e53=
34bc16fe354940dd27a_2"></span><span class=3D"anchor" id=3D"line-2-9"></span=
>[1] 1169</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-23fd76b5c81a51e568e5334bc16fe354940dd27a_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-23fd76b5c81a51e568e53=
34bc16fe354940dd27a_3"></span><span class=3D"anchor" id=3D"line-3-7"></span=
><span class=3D"ID">$ </span>setlock -nX lockfile sleep 100</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-23fd76b5c81a51e568e5334bc16fe354940dd27a_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-23fd76b5c81a51e568e53=
34bc16fe354940dd27a_4"></span><span class=3D"anchor" id=3D"line-4-3"></span=
>setlock: fatal: unable to lock lockfile: temporary failure</span>
</pre></div></div><span class=3D"anchor" id=3D"line-237"></span><span class=
=3D"anchor" id=3D"line-238"></span><p class=3D"line862">If environmental re=
strictions <em>require</em> the use of a shell script, then you may be stuc=
k using that.  Otherwise, you should <em>seriously</em> consider rewriting =
the functionality you require in a more powerful language. <span class=3D"a=
nchor" id=3D"line-239"></span><span class=3D"anchor" id=3D"line-240"></span=
></p><p class=3D"line867">
</p><h2 id=3D"I_want_to_process_a_bunch_of_files_in_parallel.2C_and_when_on=
e_finishes.2C_I_want_to_start_the_next._And_I_want_to_make_sure_there_are_e=
xactly_5_jobs_running_at_a_time.">I want to process a bunch of files in par=
allel, and when one finishes, I want to start the next. And I want to make =
sure there are exactly 5 jobs running at a time.</h2>
<span class=3D"anchor" id=3D"line-241"></span><span class=3D"anchor" id=3D"=
line-242"></span><p class=3D"line874">For most of these examples, we will a=
ssume the task you want to run is a command, which takes a filename as an a=
rgument.  Thus, you'll be feeding a stream of filenames into something that=
 dispatches the job-commands. <span class=3D"anchor" id=3D"line-243"></span=
><span class=3D"anchor" id=3D"line-244"></span></p><p class=3D"line862">Man=
y <tt class=3D"backtick">xargs</tt> allow running tasks in parallel, includ=
ing FreeBSD, OpenBSD and GNU (but not POSIX).  If your <tt class=3D"backtic=
k">xargs</tt> has <tt class=3D"backtick">-0</tt> and <tt class=3D"backtick"=
>-P</tt> options, it's a great choice for this task. <span class=3D"anchor"=
 id=3D"line-245"></span><span class=3D"anchor" id=3D"line-246"></span></p><=
p class=3D"line867"><span class=3D"anchor" id=3D"line-247"></span><span cla=
ss=3D"anchor" id=3D"line-248"></span><span class=3D"anchor" id=3D"line-1-29=
"></span></p><div class=3D"highlight bash"><div class=3D"codearea" dir=3D"l=
tr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-2be85c252b150bed011b2b4c1f17b7607ca07ede" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-2be85c252b150bed011b2b4c1f17b7607ca07=
ede_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-2be85c252b150bed=
011b2b4c1f17b7607ca07ede_1"></span><span class=3D"anchor" id=3D"line-1-30">=
</span>find . -print0 | xargs -0 -n 1 -P 5 <span class=3D"ResWord">command<=
/span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-249"></span><span class=
=3D"anchor" id=3D"line-250"></span><p class=3D"line862">One may also choose=
 to use GNU Parallel (if available) instead of <tt class=3D"backtick">xargs=
</tt>, as GNU Parallel makes sure the output from different jobs do not mix=
. <span class=3D"anchor" id=3D"line-251"></span><span class=3D"anchor" id=
=3D"line-252"></span></p><p class=3D"line867"><span class=3D"anchor" id=3D"=
line-253"></span><span class=3D"anchor" id=3D"line-254"></span><span class=
=3D"anchor" id=3D"line-1-31"></span></p><div class=3D"highlight bash"><div =
class=3D"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-998720639311863dc8c0da7c2cea92920eb5018f" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-998720639311863dc8c0da7c2cea92920eb50=
18f_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-998720639311863d=
c8c0da7c2cea92920eb5018f_1"></span><span class=3D"anchor" id=3D"line-1-32">=
</span>find . -print0 | parallel -0 <span class=3D"ResWord">command</span> =
| use_output_if_needed</span>
</pre></div></div><span class=3D"anchor" id=3D"line-255"></span><span class=
=3D"anchor" id=3D"line-256"></span><p class=3D"line862">In a script where t=
he loop is very big you can use <tt class=3D"backtick">sem</tt> from GNU Pa=
rallel. Here 10 jobs are run in parallel: <span class=3D"anchor" id=3D"line=
-257"></span><span class=3D"anchor" id=3D"line-258"></span></p><p class=3D"=
line867"><span class=3D"anchor" id=3D"line-259"></span><span class=3D"ancho=
r" id=3D"line-260"></span><span class=3D"anchor" id=3D"line-261"></span><sp=
an class=3D"anchor" id=3D"line-262"></span><span class=3D"anchor" id=3D"lin=
e-263"></span><span class=3D"anchor" id=3D"line-264"></span><span class=3D"=
anchor" id=3D"line-265"></span><span class=3D"anchor" id=3D"line-1-33"></sp=
an></p><div class=3D"highlight bash"><div class=3D"codearea" dir=3D"ltr" la=
ng=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-55b7a220ff231d02bd88f9f46cf6f4621d8654b1" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-55b7a220ff231d02bd88f9f46cf6f4621d865=
4b1_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-55b7a220ff231d02=
bd88f9f46cf6f4621d8654b1_1"></span><span class=3D"anchor" id=3D"line-1-34">=
</span><span class=3D"ResWord">for </span>i in ./*.log ; <span class=3D"Res=
Word">do</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-55b7a220ff231d02bd88f9f46cf6f4621d8654b1_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-55b7a220ff231d02bd88f=
9f46cf6f4621d8654b1_2"></span><span class=3D"anchor" id=3D"line-2-10"></spa=
n><span class=3D"ResWord">  </span><span class=3D"ResWord">printf</span> <s=
pan class=3D"String">'%s\n'</span> <span class=3D"String">"$i"</span></span=
>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-55b7a220ff231d02bd88f9f46cf6f4621d8654b1_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-55b7a220ff231d02bd88f=
9f46cf6f4621d8654b1_3"></span><span class=3D"anchor" id=3D"line-3-8"></span=
>  [...do other needed stuff...]</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-55b7a220ff231d02bd88f9f46cf6f4621d8654b1_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-55b7a220ff231d02bd88f=
9f46cf6f4621d8654b1_4"></span><span class=3D"anchor" id=3D"line-4-4"></span=
>  sem -j10 gzip <span class=3D"String">"$i"</span> <span class=3D"String">=
";"</span> <span class=3D"ResWord">printf</span> <span class=3D"String">'do=
ne\n'</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-55b7a220ff231d02bd88f9f46cf6f4621d8654b1_5=
">   5</a> </span><span class=3D"LineAnchor" id=3D"CA-55b7a220ff231d02bd88f=
9f46cf6f4621d8654b1_5"></span><span class=3D"anchor" id=3D"line-5-1"></span=
><span class=3D"ResWord">done</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-55b7a220ff231d02bd88f9f46cf6f4621d8654b1_6=
">   6</a> </span><span class=3D"LineAnchor" id=3D"CA-55b7a220ff231d02bd88f=
9f46cf6f4621d8654b1_6"></span><span class=3D"anchor" id=3D"line-6-1"></span=
><span class=3D"ResWord"></span>sem --wait</span>
</pre></div></div><span class=3D"anchor" id=3D"line-266"></span><span class=
=3D"anchor" id=3D"line-267"></span><p class=3D"line862">Bash 4.3 introduced=
 wait -n, which waits for <em>any</em> single job to complete. This can be =
used to run <em>N</em> processes in parallel: <span class=3D"anchor" id=3D"=
line-268"></span><span class=3D"anchor" id=3D"line-269"></span></p><p class=
=3D"line867"><span class=3D"anchor" id=3D"line-270"></span><span class=3D"a=
nchor" id=3D"line-271"></span><span class=3D"anchor" id=3D"line-272"></span=
><span class=3D"anchor" id=3D"line-273"></span><span class=3D"anchor" id=3D=
"line-274"></span><span class=3D"anchor" id=3D"line-275"></span><span class=
=3D"anchor" id=3D"line-276"></span><span class=3D"anchor" id=3D"line-277"><=
/span><span class=3D"anchor" id=3D"line-278"></span><span class=3D"anchor" =
id=3D"line-279"></span><span class=3D"anchor" id=3D"line-280"></span><span =
class=3D"anchor" id=3D"line-281"></span><span class=3D"anchor" id=3D"line-2=
82"></span><span class=3D"anchor" id=3D"line-283"></span><span class=3D"anc=
hor" id=3D"line-284"></span><span class=3D"anchor" id=3D"line-285"></span><=
span class=3D"anchor" id=3D"line-286"></span><span class=3D"anchor" id=3D"l=
ine-287"></span><span class=3D"anchor" id=3D"line-288"></span><span class=
=3D"anchor" id=3D"line-289"></span><span class=3D"anchor" id=3D"line-290"><=
/span><span class=3D"anchor" id=3D"line-291"></span><span class=3D"anchor" =
id=3D"line-1-35"></span></p><div class=3D"highlight bash"><div class=3D"cod=
earea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b=
47a_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb=
5e3e79190be3b0a29d77b47a_1"></span><span class=3D"anchor" id=3D"line-1-36">=
</span><span class=3D"Comment">#!/usr/bin/env bash</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e7=
9190be3b0a29d77b47a_2"></span><span class=3D"anchor" id=3D"line-2-11"></spa=
n><span class=3D"Comment"></span><span class=3D"ResWord">set</span> -m     =
<span class=3D"Comment"># See below</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e7=
9190be3b0a29d77b47a_3"></span><span class=3D"anchor" id=3D"line-3-9"></span=
><span class=3D"Comment"></span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e7=
9190be3b0a29d77b47a_4"></span><span class=3D"anchor" id=3D"line-4-5"></span=
><span class=3D"Comment"># number of processes to run in parallel</span></s=
pan>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_5=
">   5</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e7=
9190be3b0a29d77b47a_5"></span><span class=3D"anchor" id=3D"line-5-2"></span=
><span class=3D"Comment"></span><span class=3D"ID">num_procs</span>=3D5</sp=
an>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_6=
">   6</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e7=
9190be3b0a29d77b47a_6"></span><span class=3D"anchor" id=3D"line-6-2"></span=
></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_7=
">   7</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e7=
9190be3b0a29d77b47a_7"></span><span class=3D"anchor" id=3D"line-7-1"></span=
><span class=3D"Comment"># function that processes one item</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_8=
">   8</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e7=
9190be3b0a29d77b47a_8"></span><span class=3D"anchor" id=3D"line-8-1"></span=
><span class=3D"Comment"></span>my_job() {</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_9=
">   9</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e7=
9190be3b0a29d77b47a_9"></span><span class=3D"anchor" id=3D"line-9-1"></span=
>    <span class=3D"ResWord">printf</span> <span class=3D"String">'Processi=
ng %s\n'</span> <span class=3D"String">"$1"</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_1=
0">  10</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e=
79190be3b0a29d77b47a_10"></span><span class=3D"anchor" id=3D"line-10-1"></s=
pan>    sleep <span class=3D"String">"$(( RANDOM % 5 + 1 ))"</span> </span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_1=
1">  11</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e=
79190be3b0a29d77b47a_11"></span><span class=3D"anchor" id=3D"line-11-1"></s=
pan>}</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_1=
2">  12</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e=
79190be3b0a29d77b47a_12"></span><span class=3D"anchor" id=3D"line-12-1"></s=
pan></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_1=
3">  13</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e=
79190be3b0a29d77b47a_13"></span><span class=3D"anchor" id=3D"line-13-1"></s=
pan><span class=3D"ID">i</span>=3D0</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_1=
4">  14</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e=
79190be3b0a29d77b47a_14"></span><span class=3D"anchor" id=3D"line-14-1"></s=
pan><span class=3D"ResWord">while </span><span class=3D"ID">IFS</span>=3D <=
span class=3D"ResWord">read</span> -r line; <span class=3D"ResWord">do</spa=
n></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_1=
5">  15</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e=
79190be3b0a29d77b47a_15"></span><span class=3D"anchor" id=3D"line-15-1"></s=
pan><span class=3D"ResWord">    </span><span class=3D"ResWord">if</span> ((=
 i++ &gt;=3D num_procs )); <span class=3D"ResWord">then</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_1=
6">  16</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e=
79190be3b0a29d77b47a_16"></span><span class=3D"anchor" id=3D"line-16-1"></s=
pan><span class=3D"ResWord">        </span><span class=3D"ResWord">wait</sp=
an> -n   <span class=3D"Comment"># wait for any job to complete. New in 4.3=
</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_1=
7">  17</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e=
79190be3b0a29d77b47a_17"></span><span class=3D"anchor" id=3D"line-17-1"></s=
pan><span class=3D"Comment"></span>    <span class=3D"ResWord">fi</span></s=
pan>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_1=
8">  18</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e=
79190be3b0a29d77b47a_18"></span><span class=3D"anchor" id=3D"line-18-1"></s=
pan><span class=3D"ResWord">    </span>my_job <span class=3D"String">"$line=
"</span> &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_1=
9">  19</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e=
79190be3b0a29d77b47a_19"></span><span class=3D"anchor" id=3D"line-19-1"></s=
pan><span class=3D"ResWord">done</span> &lt; inputlist</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_2=
0">  20</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e=
79190be3b0a29d77b47a_20"></span><span class=3D"anchor" id=3D"line-20-1"></s=
pan></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_2=
1">  21</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e=
79190be3b0a29d77b47a_21"></span><span class=3D"anchor" id=3D"line-21-1"></s=
pan><span class=3D"ResWord">wait</span>     <span class=3D"Comment"># wait =
for the remaining processes</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-8965fa95b15855fb5e3e79190be3b0a29d77b47a_2=
2">  22</a> </span><span class=3D"LineAnchor" id=3D"CA-8965fa95b15855fb5e3e=
79190be3b0a29d77b47a_22"></span><span class=3D"anchor" id=3D"line-22-1"></s=
pan><span class=3D"Comment"></span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-292"></span><span class=
=3D"anchor" id=3D"line-293"></span><p class=3D"line862">See <a class=3D"htt=
ps" href=3D"https://lists.gnu.org/archive/html/bug-bash/2019-03/msg00116.ht=
ml">Chet Ramey's notes about wait -n</a> to see why <tt class=3D"backtick">=
set&nbsp;-m</tt> is used. <span class=3D"anchor" id=3D"line-294"></span><sp=
an class=3D"anchor" id=3D"line-295"></span></p><p class=3D"line862">It seem=
s a few people are perplexed by the preceding example.  Bash retains a list=
 of all completed-but-not-waited-for jobs in memory.  When <tt class=3D"bac=
ktick">wait&nbsp;-n</tt> is called, if there's a job in this list, it gets =
removed from the list, <tt class=3D"backtick">$?</tt> is set appropriately,=
 and the <tt class=3D"backtick">wait</tt> command terminates quickly.  If t=
here are no jobs in this list, <tt class=3D"backtick">wait</tt> blocks unti=
l a job completes. <span class=3D"anchor" id=3D"line-296"></span><span clas=
s=3D"anchor" id=3D"line-297"></span></p><p class=3D"line862">For older vers=
ions of bash, one way is to divide the job into <em>N</em> "equal" parts, a=
nd then just launch them all in parallel.  Here's an example: <span class=
=3D"anchor" id=3D"line-298"></span><span class=3D"anchor" id=3D"line-299"><=
/span></p><p class=3D"line867"><span class=3D"anchor" id=3D"line-300"></spa=
n><span class=3D"anchor" id=3D"line-301"></span><span class=3D"anchor" id=
=3D"line-302"></span><span class=3D"anchor" id=3D"line-303"></span><span cl=
ass=3D"anchor" id=3D"line-304"></span><span class=3D"anchor" id=3D"line-305=
"></span><span class=3D"anchor" id=3D"line-306"></span><span class=3D"ancho=
r" id=3D"line-307"></span><span class=3D"anchor" id=3D"line-308"></span><sp=
an class=3D"anchor" id=3D"line-309"></span><span class=3D"anchor" id=3D"lin=
e-310"></span><span class=3D"anchor" id=3D"line-311"></span><span class=3D"=
anchor" id=3D"line-312"></span><span class=3D"anchor" id=3D"line-313"></spa=
n><span class=3D"anchor" id=3D"line-314"></span><span class=3D"anchor" id=
=3D"line-315"></span><span class=3D"anchor" id=3D"line-316"></span><span cl=
ass=3D"anchor" id=3D"line-317"></span><span class=3D"anchor" id=3D"line-318=
"></span><span class=3D"anchor" id=3D"line-319"></span><span class=3D"ancho=
r" id=3D"line-320"></span><span class=3D"anchor" id=3D"line-321"></span><sp=
an class=3D"anchor" id=3D"line-322"></span><span class=3D"anchor" id=3D"lin=
e-323"></span><span class=3D"anchor" id=3D"line-324"></span><span class=3D"=
anchor" id=3D"line-325"></span><span class=3D"anchor" id=3D"line-326"></spa=
n><span class=3D"anchor" id=3D"line-327"></span><span class=3D"anchor" id=
=3D"line-1-37"></span></p><div class=3D"highlight bash"><div class=3D"codea=
rea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6=
d9d_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc870=
44185d7eef5c9ea7433c6d9d_1"></span><span class=3D"anchor" id=3D"line-1-38">=
</span><span class=3D"Comment">#!/usr/bin/env bash</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc87044185=
d7eef5c9ea7433c6d9d_2"></span><span class=3D"anchor" id=3D"line-2-12"></spa=
n><span class=3D"Comment"></span><span class=3D"Comment"># Read all the fil=
es (from a text file, 1 per line) into an array.</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc87044185=
d7eef5c9ea7433c6d9d_3"></span><span class=3D"anchor" id=3D"line-3-10"></spa=
n><span class=3D"Comment"></span>mapfile -t files &lt; inputlist</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc87044185=
d7eef5c9ea7433c6d9d_4"></span><span class=3D"anchor" id=3D"line-4-6"></span=
></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_5=
">   5</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc87044185=
d7eef5c9ea7433c6d9d_5"></span><span class=3D"anchor" id=3D"line-5-3"></span=
><span class=3D"Comment"># Here's what we plan to do to them.</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_6=
">   6</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc87044185=
d7eef5c9ea7433c6d9d_6"></span><span class=3D"anchor" id=3D"line-6-3"></span=
><span class=3D"Comment"></span>do_it() {</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_7=
">   7</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc87044185=
d7eef5c9ea7433c6d9d_7"></span><span class=3D"anchor" id=3D"line-7-2"></span=
>   <span class=3D"ResWord">for </span>f; <span class=3D"ResWord">do</span>=
 [[ -f <span class=3D"ID">$f</span> ]] &amp;&amp; my_job <span class=3D"Str=
ing">"$f"</span>; <span class=3D"ResWord">done</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_8=
">   8</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc87044185=
d7eef5c9ea7433c6d9d_8"></span><span class=3D"anchor" id=3D"line-8-2"></span=
>}</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_9=
">   9</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc87044185=
d7eef5c9ea7433c6d9d_9"></span><span class=3D"anchor" id=3D"line-9-2"></span=
></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_1=
0">  10</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_10"></span><span class=3D"anchor" id=3D"line-10-2"></s=
pan><span class=3D"Comment"># Divide the list into 5 sub-lists.</span></spa=
n>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_1=
1">  11</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_11"></span><span class=3D"anchor" id=3D"line-11-2"></s=
pan><span class=3D"Comment"></span><span class=3D"ID">i</span>=3D0 <span cl=
ass=3D"ID">n</span>=3D0 <span class=3D"ID">a</span>=3D() <span class=3D"ID"=
>b</span>=3D() <span class=3D"ID">c</span>=3D() <span class=3D"ID">d</span>=
=3D() <span class=3D"ID">e</span>=3D()</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_1=
2">  12</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_12"></span><span class=3D"anchor" id=3D"line-12-2"></s=
pan><span class=3D"ResWord">while</span> ((i &lt; <span class=3D"ResWord">$=
{#</span><span class=3D"ID">files</span>[*]<span class=3D"ResWord">}</span>=
)); <span class=3D"ResWord">do</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_1=
3">  13</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_13"></span><span class=3D"anchor" id=3D"line-13-2"></s=
pan><span class=3D"ResWord">    </span>a[n]=3D<span class=3D"ResWord">${</s=
pan><span class=3D"ID">files</span>[i]<span class=3D"ResWord">}</span></spa=
n>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_1=
4">  14</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_14"></span><span class=3D"anchor" id=3D"line-14-2"></s=
pan>    b[n]=3D<span class=3D"ResWord">${</span><span class=3D"ID">files</s=
pan>[i+1]<span class=3D"ResWord">}</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_1=
5">  15</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_15"></span><span class=3D"anchor" id=3D"line-15-2"></s=
pan>    c[n]=3D<span class=3D"ResWord">${</span><span class=3D"ID">files</s=
pan>[i+2]<span class=3D"ResWord">}</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_1=
6">  16</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_16"></span><span class=3D"anchor" id=3D"line-16-2"></s=
pan>    d[n]=3D<span class=3D"ResWord">${</span><span class=3D"ID">files</s=
pan>[i+3]<span class=3D"ResWord">}</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_1=
7">  17</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_17"></span><span class=3D"anchor" id=3D"line-17-2"></s=
pan>    e[n]=3D<span class=3D"ResWord">${</span><span class=3D"ID">files</s=
pan>[i+4]<span class=3D"ResWord">}</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_1=
8">  18</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_18"></span><span class=3D"anchor" id=3D"line-18-2"></s=
pan>    ((i+=3D5, n++))</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_1=
9">  19</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_19"></span><span class=3D"anchor" id=3D"line-19-2"></s=
pan><span class=3D"ResWord">done</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_2=
0">  20</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_20"></span><span class=3D"anchor" id=3D"line-20-2"></s=
pan></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_2=
1">  21</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_21"></span><span class=3D"anchor" id=3D"line-21-2"></s=
pan><span class=3D"Comment"># Process the sub-lists in parallel</span></spa=
n>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_2=
2">  22</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_22"></span><span class=3D"anchor" id=3D"line-22-2"></s=
pan><span class=3D"Comment"></span>do_it <span class=3D"String">"${a[@]}"</=
span> &gt; a.out 2&gt;&amp;1 &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_2=
3">  23</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_23"></span><span class=3D"anchor" id=3D"line-23-1"></s=
pan>do_it <span class=3D"String">"${b[@]}"</span> &gt; b.out 2&gt;&amp;1 &a=
mp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_2=
4">  24</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_24"></span><span class=3D"anchor" id=3D"line-24-1"></s=
pan>do_it <span class=3D"String">"${c[@]}"</span> &gt; c.out 2&gt;&amp;1 &a=
mp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_2=
5">  25</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_25"></span><span class=3D"anchor" id=3D"line-25-1"></s=
pan>do_it <span class=3D"String">"${d[@]}"</span> &gt; d.out 2&gt;&amp;1 &a=
mp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_2=
6">  26</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_26"></span><span class=3D"anchor" id=3D"line-26-1"></s=
pan>do_it <span class=3D"String">"${e[@]}"</span> &gt; e.out 2&gt;&amp;1 &a=
mp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6dc59934786cc87044185d7eef5c9ea7433c6d9d_2=
7">  27</a> </span><span class=3D"LineAnchor" id=3D"CA-6dc59934786cc8704418=
5d7eef5c9ea7433c6d9d_27"></span><span class=3D"anchor" id=3D"line-27-1"></s=
pan><span class=3D"ResWord">wait</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-328"></span><span class=
=3D"anchor" id=3D"line-329"></span><p class=3D"line862">See <a href=3D"http=
s://mywiki.wooledge.org/BashFAQ/001">reading a file line-by-line</a> and <a=
 href=3D"https://mywiki.wooledge.org/BashFAQ/005">arrays</a> and <a href=3D=
"https://mywiki.wooledge.org/ArithmeticExpression">ArithmeticExpression</a>=
 for explanations of the syntax used in this example. <span class=3D"anchor=
" id=3D"line-330"></span><span class=3D"anchor" id=3D"line-331"></span></p>=
<p class=3D"line862">Even if the lists aren't quite identical in terms of t=
he amount of work required, this approach is <em>close enough</em> for many=
 purposes. <span class=3D"anchor" id=3D"line-332"></span><span class=3D"anc=
hor" id=3D"line-333"></span></p><p class=3D"line862">Another approach invol=
ves using a <a href=3D"https://mywiki.wooledge.org/NamedPipes">named pipe</=
a> to tell a "manager" when a job is finished, so it can launch the next jo=
b.  Here is an example of that approach: <span class=3D"anchor" id=3D"line-=
334"></span><span class=3D"anchor" id=3D"line-335"></span></p><p class=3D"l=
ine867"><span class=3D"anchor" id=3D"line-336"></span><span class=3D"anchor=
" id=3D"line-337"></span><span class=3D"anchor" id=3D"line-338"></span><spa=
n class=3D"anchor" id=3D"line-339"></span><span class=3D"anchor" id=3D"line=
-340"></span><span class=3D"anchor" id=3D"line-341"></span><span class=3D"a=
nchor" id=3D"line-342"></span><span class=3D"anchor" id=3D"line-343"></span=
><span class=3D"anchor" id=3D"line-344"></span><span class=3D"anchor" id=3D=
"line-345"></span><span class=3D"anchor" id=3D"line-346"></span><span class=
=3D"anchor" id=3D"line-347"></span><span class=3D"anchor" id=3D"line-348"><=
/span><span class=3D"anchor" id=3D"line-349"></span><span class=3D"anchor" =
id=3D"line-350"></span><span class=3D"anchor" id=3D"line-351"></span><span =
class=3D"anchor" id=3D"line-352"></span><span class=3D"anchor" id=3D"line-3=
53"></span><span class=3D"anchor" id=3D"line-354"></span><span class=3D"anc=
hor" id=3D"line-355"></span><span class=3D"anchor" id=3D"line-356"></span><=
span class=3D"anchor" id=3D"line-357"></span><span class=3D"anchor" id=3D"l=
ine-1-39"></span></p><div class=3D"highlight bash"><div class=3D"codearea" =
dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3=
f8b_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c89=
58a12dabfed7a8d574de3f8b_1"></span><span class=3D"anchor" id=3D"line-1-40">=
</span><span class=3D"Comment">#!/usr/bin/env bash</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a12=
dabfed7a8d574de3f8b_2"></span><span class=3D"anchor" id=3D"line-2-13"></spa=
n><span class=3D"Comment"></span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a12=
dabfed7a8d574de3f8b_3"></span><span class=3D"anchor" id=3D"line-3-11"></spa=
n><span class=3D"Comment"># FD 3 will be tied to a named pipe.</span></span=
>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a12=
dabfed7a8d574de3f8b_4"></span><span class=3D"anchor" id=3D"line-4-7"></span=
><span class=3D"Comment"></span>mkfifo pipe; <span class=3D"ResWord">exec <=
/span>3&lt;&gt;pipe</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_5=
">   5</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a12=
dabfed7a8d574de3f8b_5"></span><span class=3D"anchor" id=3D"line-5-4"></span=
></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_6=
">   6</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a12=
dabfed7a8d574de3f8b_6"></span><span class=3D"anchor" id=3D"line-6-4"></span=
><span class=3D"Comment"># This is the job we're running.</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_7=
">   7</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a12=
dabfed7a8d574de3f8b_7"></span><span class=3D"anchor" id=3D"line-7-3"></span=
><span class=3D"Comment"></span>s() {</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_8=
">   8</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a12=
dabfed7a8d574de3f8b_8"></span><span class=3D"anchor" id=3D"line-8-3"></span=
>  <span class=3D"ResWord">printf</span> <span class=3D"String">'Sleeping %=
s\n'</span> <span class=3D"String">"$1"</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_9=
">   9</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a12=
dabfed7a8d574de3f8b_9"></span><span class=3D"anchor" id=3D"line-9-3"></span=
>  sleep <span class=3D"String">"$1"</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_1=
0">  10</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a1=
2dabfed7a8d574de3f8b_10"></span><span class=3D"anchor" id=3D"line-10-3"></s=
pan>}</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_1=
1">  11</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a1=
2dabfed7a8d574de3f8b_11"></span><span class=3D"anchor" id=3D"line-11-3"></s=
pan></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_1=
2">  12</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a1=
2dabfed7a8d574de3f8b_12"></span><span class=3D"anchor" id=3D"line-12-3"></s=
pan><span class=3D"Comment"># Start off with 3 instances of it.</span></spa=
n>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_1=
3">  13</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a1=
2dabfed7a8d574de3f8b_13"></span><span class=3D"anchor" id=3D"line-13-3"></s=
pan><span class=3D"Comment"></span><span class=3D"Comment"># Each time an i=
nstance terminates, write a newline to the named pipe.</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_1=
4">  14</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a1=
2dabfed7a8d574de3f8b_14"></span><span class=3D"anchor" id=3D"line-14-3"></s=
pan><span class=3D"Comment"></span>{ s 5; <span class=3D"ResWord">printf</s=
pan> <span class=3D"String">'\n'</span> &gt;&amp;3; } &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_1=
5">  15</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a1=
2dabfed7a8d574de3f8b_15"></span><span class=3D"anchor" id=3D"line-15-3"></s=
pan>{ s 7; <span class=3D"ResWord">printf</span> <span class=3D"String">'\n=
'</span> &gt;&amp;3; } &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_1=
6">  16</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a1=
2dabfed7a8d574de3f8b_16"></span><span class=3D"anchor" id=3D"line-16-3"></s=
pan>{ s 8; <span class=3D"ResWord">printf</span> <span class=3D"String">'\n=
'</span> &gt;&amp;3; } &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_1=
7">  17</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a1=
2dabfed7a8d574de3f8b_17"></span><span class=3D"anchor" id=3D"line-17-3"></s=
pan></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_1=
8">  18</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a1=
2dabfed7a8d574de3f8b_18"></span><span class=3D"anchor" id=3D"line-18-3"></s=
pan><span class=3D"Comment"># Each time we get a line from the named pipe, =
launch another job.</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_1=
9">  19</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a1=
2dabfed7a8d574de3f8b_19"></span><span class=3D"anchor" id=3D"line-19-3"></s=
pan><span class=3D"Comment"></span><span class=3D"ResWord">while </span><sp=
an class=3D"ResWord">read</span>; <span class=3D"ResWord">do</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_2=
0">  20</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a1=
2dabfed7a8d574de3f8b_20"></span><span class=3D"anchor" id=3D"line-20-3"></s=
pan>  { s <span class=3D"String">"$(( RANDOM % 5 + 7 ))"</span>; <span clas=
s=3D"ResWord">printf</span> <span class=3D"String">'\n'</span> &gt;&amp;3; =
} &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-db37f0dbb0bd9c8958a12dabfed7a8d574de3f8b_2=
1">  21</a> </span><span class=3D"LineAnchor" id=3D"CA-db37f0dbb0bd9c8958a1=
2dabfed7a8d574de3f8b_21"></span><span class=3D"anchor" id=3D"line-21-3"></s=
pan><span class=3D"ResWord">done</span> &lt;&amp;3</span>
</pre></div></div><span class=3D"anchor" id=3D"line-358"></span><span class=
=3D"anchor" id=3D"line-359"></span><p class=3D"line862">If you need somethi=
ng more sophisticated than these, you're probably looking at the wrong lang=
uage.  A C program could fork 5 children and manage them closely using <tt =
class=3D"backtick">select()</tt> or similar, to assign the next file in lin=
e to whichever child is ready to handle it.  But bash has nothing equivalen=
t to <tt class=3D"backtick">select</tt> or <tt class=3D"backtick">poll</tt>=
. <span class=3D"anchor" id=3D"line-360"></span><span class=3D"anchor" id=
=3D"line-361"></span></p><p class=3D"line867">
</p><h2 id=3D"My_script_runs_a_pipeline.__When_the_script_is_killed.2C_I_wa=
nt_the_pipeline_to_die_too.">My script runs a pipeline.  When the script is=
 killed, I want the pipeline to die too.</h2>
<span class=3D"anchor" id=3D"line-362"></span><span class=3D"anchor" id=3D"=
line-363"></span><p class=3D"line862">One approach is to set up a <a href=
=3D"https://mywiki.wooledge.org/SignalTrap">signal handler</a> (or an <tt c=
lass=3D"backtick">EXIT</tt> trap) to kill your child processes right before=
 you die.  Then, you need the PIDs of the children -- which, in the case of=
 a pipeline, is not so easy.  You can use a <a href=3D"https://mywiki.woole=
dge.org/NamedPipes">named pipe</a> instead of a pipeline, so that you can c=
ollect the PIDs yourself: <span class=3D"anchor" id=3D"line-364"></span><sp=
an class=3D"anchor" id=3D"line-365"></span></p><p class=3D"line867"><span c=
lass=3D"anchor" id=3D"line-366"></span><span class=3D"anchor" id=3D"line-36=
7"></span><span class=3D"anchor" id=3D"line-368"></span><span class=3D"anch=
or" id=3D"line-369"></span><span class=3D"anchor" id=3D"line-370"></span><s=
pan class=3D"anchor" id=3D"line-371"></span><span class=3D"anchor" id=3D"li=
ne-372"></span><span class=3D"anchor" id=3D"line-373"></span><span class=3D=
"anchor" id=3D"line-374"></span><span class=3D"anchor" id=3D"line-1-41"></s=
pan></p><div class=3D"highlight bash"><div class=3D"codearea" dir=3D"ltr" l=
ang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-5e9557df0ab83437bee94e2f13340a9686369ba9" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-5e9557df0ab83437bee94e2f13340a9686369=
ba9_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-5e9557df0ab83437=
bee94e2f13340a9686369ba9_1"></span><span class=3D"anchor" id=3D"line-1-42">=
</span><span class=3D"Comment">#!/usr/bin/env bash</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-5e9557df0ab83437bee94e2f13340a9686369ba9_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-5e9557df0ab83437bee94=
e2f13340a9686369ba9_2"></span><span class=3D"anchor" id=3D"line-2-14"></spa=
n><span class=3D"Comment"></span><span class=3D"ResWord">unset </span>kids<=
/span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-5e9557df0ab83437bee94e2f13340a9686369ba9_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-5e9557df0ab83437bee94=
e2f13340a9686369ba9_3"></span><span class=3D"anchor" id=3D"line-3-12"></spa=
n><span class=3D"ID">fifo</span>=3D/tmp/foo<span class=3D"ID">$$</span></sp=
an>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-5e9557df0ab83437bee94e2f13340a9686369ba9_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-5e9557df0ab83437bee94=
e2f13340a9686369ba9_4"></span><span class=3D"anchor" id=3D"line-4-8"></span=
><span class=3D"ResWord">trap</span> <span class=3D"String">'kill "${kids[@=
]}"; rm -f "$fifo"'</span> EXIT</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-5e9557df0ab83437bee94e2f13340a9686369ba9_5=
">   5</a> </span><span class=3D"LineAnchor" id=3D"CA-5e9557df0ab83437bee94=
e2f13340a9686369ba9_5"></span><span class=3D"anchor" id=3D"line-5-5"></span=
>mkfifo <span class=3D"String">"$fifo"</span> || <span class=3D"ResWord">ex=
it </span>1</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-5e9557df0ab83437bee94e2f13340a9686369ba9_6=
">   6</a> </span><span class=3D"LineAnchor" id=3D"CA-5e9557df0ab83437bee94=
e2f13340a9686369ba9_6"></span><span class=3D"anchor" id=3D"line-6-5"></span=
><span class=3D"ResWord">command </span>1 &gt; <span class=3D"String">"$fif=
o"</span> &amp; kids+=3D(<span class=3D"ID">$!</span>)</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-5e9557df0ab83437bee94e2f13340a9686369ba9_7=
">   7</a> </span><span class=3D"LineAnchor" id=3D"CA-5e9557df0ab83437bee94=
e2f13340a9686369ba9_7"></span><span class=3D"anchor" id=3D"line-7-4"></span=
><span class=3D"ResWord">command </span>2 &lt; <span class=3D"String">"$fif=
o"</span> &amp; kids+=3D(<span class=3D"ID">$!</span>)</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-5e9557df0ab83437bee94e2f13340a9686369ba9_8=
">   8</a> </span><span class=3D"LineAnchor" id=3D"CA-5e9557df0ab83437bee94=
e2f13340a9686369ba9_8"></span><span class=3D"anchor" id=3D"line-8-4"></span=
><span class=3D"ResWord">wait</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-375"></span><span class=
=3D"anchor" id=3D"line-376"></span><p class=3D"line862">This example sets u=
p a FIFO with one writer and one reader, and stores their PIDs in an array =
named <tt class=3D"backtick">kids</tt>.  The <tt class=3D"backtick">EXIT</t=
t> trap sends SIGTERM to them all, removes the FIFO, and exits.  See <a hre=
f=3D"https://mywiki.wooledge.org/BashFAQ/062">Bash FAQ #62</a> for notes on=
 the use of temporary files. <span class=3D"anchor" id=3D"line-377"></span>=
<span class=3D"anchor" id=3D"line-378"></span></p><p class=3D"line862">Anot=
her approach is to enable <em>job control</em>, which allows whole pipeline=
s to be treated as units. <span class=3D"anchor" id=3D"line-379"></span><sp=
an class=3D"anchor" id=3D"line-380"></span></p><p class=3D"line867"><span c=
lass=3D"anchor" id=3D"line-381"></span><span class=3D"anchor" id=3D"line-38=
2"></span><span class=3D"anchor" id=3D"line-383"></span><span class=3D"anch=
or" id=3D"line-384"></span><span class=3D"anchor" id=3D"line-385"></span><s=
pan class=3D"anchor" id=3D"line-386"></span><span class=3D"anchor" id=3D"li=
ne-1-43"></span></p><div class=3D"highlight bash"><div class=3D"codearea" d=
ir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-f54ddd0d932a57eb9789a13f937bd3d251089886" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-f54ddd0d932a57eb9789a13f937bd3d251089=
886_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-f54ddd0d932a57eb=
9789a13f937bd3d251089886_1"></span><span class=3D"anchor" id=3D"line-1-44">=
</span><span class=3D"Comment">#!/usr/bin/env bash</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-f54ddd0d932a57eb9789a13f937bd3d251089886_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-f54ddd0d932a57eb9789a=
13f937bd3d251089886_2"></span><span class=3D"anchor" id=3D"line-2-15"></spa=
n><span class=3D"Comment"></span><span class=3D"ResWord">set</span> -m</spa=
n>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-f54ddd0d932a57eb9789a13f937bd3d251089886_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-f54ddd0d932a57eb9789a=
13f937bd3d251089886_3"></span><span class=3D"anchor" id=3D"line-3-13"></spa=
n><span class=3D"ResWord">trap</span> <span class=3D"String">'kill %%'</spa=
n> EXIT</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-f54ddd0d932a57eb9789a13f937bd3d251089886_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-f54ddd0d932a57eb9789a=
13f937bd3d251089886_4"></span><span class=3D"anchor" id=3D"line-4-9"></span=
>command1 | command2 &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-f54ddd0d932a57eb9789a13f937bd3d251089886_5=
">   5</a> </span><span class=3D"LineAnchor" id=3D"CA-f54ddd0d932a57eb9789a=
13f937bd3d251089886_5"></span><span class=3D"anchor" id=3D"line-5-6"></span=
><span class=3D"ResWord">wait</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-387"></span><span class=
=3D"anchor" id=3D"line-388"></span><p class=3D"line862">In this example, we=
 enable job control with <tt class=3D"backtick">set&nbsp;-m</tt>.  The <tt =
class=3D"backtick">%%</tt> in the <tt class=3D"backtick">EXIT</tt> trap ref=
ers to the <em>current job</em> (the most recently executed background pipe=
line qualifies for that).  Telling bash to kill the current job takes out t=
he entire pipeline, rather than just the last command in the pipeline (whic=
h is what we would get if we had stored and used <tt class=3D"backtick">$!<=
/tt> instead of <tt class=3D"backtick">%%</tt>). <span class=3D"anchor" id=
=3D"line-389"></span><span class=3D"anchor" id=3D"line-390"></span></p><p c=
lass=3D"line867"><span class=3D"anchor" id=3D"howto"></span> <span class=3D=
"anchor" id=3D"line-391"></span>
</p><h1 id=3D"How_to_work_with_processes">How to work with processes</h1>
<span class=3D"anchor" id=3D"line-392"></span><span class=3D"anchor" id=3D"=
line-393"></span><p class=3D"line874">The best way to do process management=
 in Bash is to start the managed process(es) from your script, remember its=
 PID, and use that PID to do things with your process later on. <span class=
=3D"anchor" id=3D"line-394"></span><span class=3D"anchor" id=3D"line-395"><=
/span></p><p class=3D"line867"><strong>If at ALL possible, AVOID <tt class=
=3D"backtick">ps</tt>, <tt class=3D"backtick">pgrep</tt>, <tt class=3D"back=
tick">killall</tt>, and any other process table parsing tools.</strong>  Th=
ese tools have no clue what process YOU WANT to talk to.  They only guess a=
t it based on filtering unreliable information.  These tools may work fine =
in your little test environment, they may work fine in production for a whi=
le, but <em>inevitably</em> they WILL fail, because they ARE a broken appro=
ach to process management. <span class=3D"anchor" id=3D"line-396"></span><s=
pan class=3D"anchor" id=3D"line-397"></span></p><p class=3D"line867"><span =
class=3D"anchor" id=3D"parents"></span> <span class=3D"anchor" id=3D"line-3=
98"></span>
</p><h2 id=3D"PIDs_and_parents">PIDs and parents</h2>
<span class=3D"anchor" id=3D"line-399"></span><span class=3D"anchor" id=3D"=
line-400"></span><p class=3D"line862">In UNIX, processes are identified by =
a number called a PID (for Process IDentifier).  Each running process has a=
 unique identifier.  You cannot reliably determine when or how a process wa=
s started purely from the identifier number: for all intents and purposes, =
it is <em>random</em>.  (On some systems, it is <em>literally</em> random, =
but even on ones which use sequential PID allocation, you cannot safely ass=
ume anything about processes based on their PID numbers.) <span class=3D"an=
chor" id=3D"line-401"></span><span class=3D"anchor" id=3D"line-402"></span>=
</p><p class=3D"line862">Each UNIX process also has a <em>parent process</e=
m>.  This parent process is the process that started it, but can change to =
the <tt class=3D"backtick">init</tt> process if the parent process ends bef=
ore the new process does.  (That is, <tt class=3D"backtick">init</tt> will =
pick up orphaned processes.)  Understanding this parent/child relationship =
is vital because it is the key to reliable process management in UNIX.  A p=
rocess's PID will NEVER be freed up for use after the process dies UNTIL th=
e parent process <tt class=3D"backtick">wait</tt>s for the PID to see wheth=
er it ended and retrieve its exit code.  If the parent ends, the process is=
 returned to <tt class=3D"backtick">init</tt>, which does this for you. <sp=
an class=3D"anchor" id=3D"line-403"></span><span class=3D"anchor" id=3D"lin=
e-404"></span></p><p class=3D"line862">This is important for one major reas=
on: if the parent process manages its child process, it can be absolutely c=
ertain that, even if the child process dies, no other new process can accid=
entally recycle the child process's PID until the parent process has <tt cl=
ass=3D"backtick">wait</tt>ed for that PID and noticed the child died.  This=
 gives the parent process the guarantee that the PID it has for the child p=
rocess will ALWAYS point to that child process, whether it is alive or a "z=
ombie".  Nobody else has that guarantee. <span class=3D"anchor" id=3D"line-=
405"></span><span class=3D"anchor" id=3D"line-406"></span></p><p class=3D"l=
ine867"><strong>Unfortunately</strong>, this guarantee doesn't apply to she=
ll scripts.  Shells aggressively reap their child processes and store the e=
xit status in memory, where it becomes available to your script upon callin=
g <tt class=3D"backtick">wait</tt>.  But because the child has already been=
 reaped <em>before</em> you call <tt class=3D"backtick">wait</tt>, there is=
 no zombie to hold the PID.  The kernel is free to reuse that PID, and your=
 guarantee has been violated. <span class=3D"anchor" id=3D"line-407"></span=
><span class=3D"anchor" id=3D"line-408"></span></p><p class=3D"line862">The=
refore, you <strong>cannot</strong> write a general purpose service manager=
 in a shell.  You need a real language, or an existing tool.  Don't try to =
reinvent this wheel.  There are <a class=3D"https" href=3D"https://jdebp.eu=
/FGA/daemontools-family.html">lots of service managers</a> out there (daemo=
ntools, runit, <a class=3D"https" href=3D"https://www.freedesktop.org/wiki/=
Software/systemd/">systemd</a>, etc.).  Your system may already be using on=
e of them.  If it isn't, runit or daemontools or one of their siblings can =
be installed and used.  (As of this writing [2019], the wiki you're reading=
 right now is launched by a daemontools run script on a pre-systemd Debian =
system.  You are <em>not</em> locked into your vendor's choice of init syst=
em, even on older operating systems.) <span class=3D"anchor" id=3D"line-409=
"></span><span class=3D"anchor" id=3D"line-410"></span></p><p class=3D"line=
867">
</p><h2 id=3D"The_risk_of_letting_the_parent_die">The risk of letting the p=
arent die</h2>
<span class=3D"anchor" id=3D"line-411"></span><span class=3D"anchor" id=3D"=
line-412"></span><p class=3D"line874">Why is this all so important?  Why sh=
ould you care?  Consider what happens if we use a "PID file".  Assume the f=
ollowing sequence of events: <span class=3D"anchor" id=3D"line-413"></span>=
</p><ol type=3D"1"><li><p class=3D"line862">You're a boot script (for examp=
le, one in <tt class=3D"backtick">/etc/init.d</tt>).  You are told to start=
 the foodaemon. <span class=3D"anchor" id=3D"line-414"></span></p></li><li>=
You start a foodaemon child process in the background and grab its PID. <sp=
an class=3D"anchor" id=3D"line-415"></span></li><li>You write this PID to a=
 file. <span class=3D"anchor" id=3D"line-416"></span></li><li>You exit, ass=
uming you've done your job. <span class=3D"anchor" id=3D"line-417"></span><=
/li><li>Later, you're started up again and told to kill the foodaemon. <spa=
n class=3D"anchor" id=3D"line-418"></span></li><li>You look for the child p=
rocess's PID in a file. <span class=3D"anchor" id=3D"line-419"></span></li>=
<li><p class=3D"line862">You send the <tt class=3D"backtick">SIGTERM</tt> s=
ignal to this PID, telling it to clean up and exit. <span class=3D"anchor" =
id=3D"line-420"></span><span class=3D"anchor" id=3D"line-421"></span></p></=
li></ol><p class=3D"line862">There is absolutely no way you can be certain =
that the process you told to exit is actually the one you started.  The pro=
cess you wanted to check up on <em>could</em> have died and another random =
new process could have easily recycled its PID that was released by <tt cla=
ss=3D"backtick">init</tt>. <span class=3D"anchor" id=3D"line-422"></span><s=
pan class=3D"anchor" id=3D"line-423"></span></p><p class=3D"line874">This i=
s why sysv-rc and PID files are fundamentally broken.  This is why almost e=
very Linux system is finally moving away from sysv-rc. <span class=3D"ancho=
r" id=3D"line-424"></span><span class=3D"anchor" id=3D"line-425"></span></p=
><p class=3D"line867">
</p><h2 id=3D"The_risk_of_parsing_the_process_tree">The risk of parsing the=
 process tree</h2>
<span class=3D"anchor" id=3D"line-426"></span><span class=3D"anchor" id=3D"=
line-427"></span><p class=3D"line862">UNIX comes with a set of handy tools,=
 among which is <tt class=3D"backtick">ps</tt>.  This is a very helpful uti=
lity that you can use from the command line to get an overview of what proc=
esses are running on your box and what their status is. <span class=3D"anch=
or" id=3D"line-428"></span><span class=3D"anchor" id=3D"line-429"></span></=
p><p class=3D"line862">All too many people, however, assume that computers =
and humans work the same way.  They think that "<em>I can read <tt class=3D=
"backtick">ps</tt> and see if my process is in there, why shouldn't my scri=
pt do the same?</em>".  Here's why:  You are (hopefully) smarter than your =
script.  You see <tt class=3D"backtick">ps</tt> output and you see all sort=
s of information in context.  Your brain determines, "<em>Is this the proce=
ss I'm looking for?</em>" and based on what you see it <em>guesses</em> "<e=
m>Yeah, it looks like it.</em>".  Firstly, your script can't process contex=
t the way your brain can (no, <tt class=3D"backtick">awk</tt>'ing out colum=
n 4 and seeing if that contains your process's command name isn't good enou=
gh).  Secondly, even if it could do a good job, your script shouldn't be do=
ing any guessing whatsoever.  It shouldn't need to. <span class=3D"anchor" =
id=3D"line-430"></span><span class=3D"anchor" id=3D"line-431"></span></p><p=
 class=3D"line867"><tt class=3D"backtick">ps</tt> output is unpredictable, =
highly OS-dependent, and not built for parsing.  It is next to impossible f=
or your script to distinguish <tt class=3D"backtick">ping</tt> as a command=
 name from another process's command line which may contain a similar word =
like <tt class=3D"backtick">piping</tt>, or a user named <tt class=3D"backt=
ick">ping</tt>, etc. <span class=3D"anchor" id=3D"line-432"></span><span cl=
ass=3D"anchor" id=3D"line-433"></span></p><p class=3D"line862">The same goe=
s for almost any other tool that parses the process list.  Some are worse t=
han others, but in the end, they all do the <em>wrong thing</em>. <span cla=
ss=3D"anchor" id=3D"line-434"></span><span class=3D"anchor" id=3D"line-435"=
></span></p><p class=3D"line867">
</p><h2 id=3D"Doing_it_right">Doing it right</h2>
<span class=3D"anchor" id=3D"line-436"></span><span class=3D"anchor" id=3D"=
line-437"></span><p class=3D"line874">As mentioned before, the right way to=
 do something with your child process is by using its PID, preferably (if a=
t all possible) from the parent process that created it. <span class=3D"anc=
hor" id=3D"line-438"></span><span class=3D"anchor" id=3D"line-439"></span><=
/p><p class=3D"line862">You may have come here hoping for a quick hint on h=
ow to finish your script only to find these recommendations don't apply to =
any of your existing code or setup.  That's probably <em>not</em> because y=
our code or setup is an exception and you should disregard this; but more l=
ikely because you need to take the time and <em>re-evaluate</em> your exist=
ing code or setup and rework it.  This will require you to think for a mome=
nt.  Take that moment and do it right. <span class=3D"anchor" id=3D"line-44=
0"></span><span class=3D"anchor" id=3D"line-441"></span></p><p class=3D"lin=
e867">
</p><h3 id=3D"Starting_a_process_and_remembering_its_PID">Starting a proces=
s and remembering its PID</h3>
<span class=3D"anchor" id=3D"line-442"></span><span class=3D"anchor" id=3D"=
line-443"></span><p class=3D"line862">To start a process asynchronously (so=
 the main script can continue while the process runs in the "background"), =
use the <tt class=3D"backtick">&amp;</tt> operator.  To get the PID that wa=
s assigned to it, expand the <tt class=3D"backtick">!</tt> parameter.  You =
can, for example, save it in a variable: <span class=3D"anchor" id=3D"line-=
444"></span><span class=3D"anchor" id=3D"line-445"></span></p><p class=3D"l=
ine867"><span class=3D"anchor" id=3D"line-446"></span><span class=3D"anchor=
" id=3D"line-447"></span><span class=3D"anchor" id=3D"line-448"></span><spa=
n class=3D"anchor" id=3D"line-449"></span><span class=3D"anchor" id=3D"line=
-1-45"></span></p><div class=3D"highlight bash"><div class=3D"codearea" dir=
=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-0e8a3940264e67c65520f9f10117abed0ba163d2" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-0e8a3940264e67c65520f9f10117abed0ba16=
3d2_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-0e8a3940264e67c6=
5520f9f10117abed0ba163d2_1"></span><span class=3D"anchor" id=3D"line-1-46">=
</span><span class=3D"Comment"># Bourne shell</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0e8a3940264e67c65520f9f10117abed0ba163d2_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-0e8a3940264e67c65520f=
9f10117abed0ba163d2_2"></span><span class=3D"anchor" id=3D"line-2-16"></spa=
n><span class=3D"Comment"></span>myprocess -o myfile -i &amp;</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0e8a3940264e67c65520f9f10117abed0ba163d2_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-0e8a3940264e67c65520f=
9f10117abed0ba163d2_3"></span><span class=3D"anchor" id=3D"line-3-14"></spa=
n><span class=3D"ID">mypid</span>=3D<span class=3D"ID">$!</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-450"></span><span class=
=3D"anchor" id=3D"line-451"></span><p class=3D"line867">
</p><h3 id=3D"Checking_up_on_your_process_or_terminating_it">Checking up on=
 your process or terminating it</h3>
<span class=3D"anchor" id=3D"line-452"></span><span class=3D"anchor" id=3D"=
line-453"></span><p class=3D"line874">At a later time, you may be intereste=
d in whether your process is still running and if it is, you may decide it'=
s time to terminate it.  If it's not running anymore, you may be interested=
 in its exit code to see whether it experienced a problem or ended successf=
ully. <span class=3D"anchor" id=3D"line-454"></span><span class=3D"anchor" =
id=3D"line-455"></span></p><p class=3D"line862">To <a href=3D"https://mywik=
i.wooledge.org/SignalTrap">send a process a signal</a>, we use the <tt clas=
s=3D"backtick">kill</tt> command.  Signals can be used to tell a process to=
 do something, but <tt class=3D"backtick">kill</tt> can also be used to che=
ck if the process is still alive: <span class=3D"anchor" id=3D"line-456"></=
span><span class=3D"anchor" id=3D"line-457"></span></p><p class=3D"line867"=
><span class=3D"anchor" id=3D"line-458"></span><span class=3D"anchor" id=3D=
"line-459"></span><span class=3D"anchor" id=3D"line-460"></span><span class=
=3D"anchor" id=3D"line-461"></span><span class=3D"anchor" id=3D"line-1-47">=
</span></p><div class=3D"highlight bash"><div class=3D"codearea" dir=3D"ltr=
" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-60e5026348587264e6cfeadae7b82af14e05c77b" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-60e5026348587264e6cfeadae7b82af14e05c=
77b_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-60e5026348587264=
e6cfeadae7b82af14e05c77b_1"></span><span class=3D"anchor" id=3D"line-1-48">=
</span><span class=3D"Comment"># Bourne</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-60e5026348587264e6cfeadae7b82af14e05c77b_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-60e5026348587264e6cfe=
adae7b82af14e05c77b_2"></span><span class=3D"anchor" id=3D"line-2-17"></spa=
n><span class=3D"Comment"></span><span class=3D"ResWord">kill</span> -0 <sp=
an class=3D"String">"$mypid"</span> &amp;&amp; <span class=3D"ResWord">echo=
</span> <span class=3D"String">"My process is still alive."</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-60e5026348587264e6cfeadae7b82af14e05c77b_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-60e5026348587264e6cfe=
adae7b82af14e05c77b_3"></span><span class=3D"anchor" id=3D"line-3-15"></spa=
n><span class=3D"ResWord">kill</span>    <span class=3D"String">"$mypid"</s=
pan> ;  <span class=3D"ResWord">echo</span> <span class=3D"String">"I just =
asked my process to shut down."</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-462"></span><span class=
=3D"anchor" id=3D"line-463"></span><p class=3D"line867"><tt class=3D"backti=
ck">kill</tt> sends the <tt class=3D"backtick">SIGTERM</tt> signal, by defa=
ult.  This tells a program it's time to terminate.  You can use the <tt cla=
ss=3D"backtick">-0</tt> option to kill if you don't want to terminate the p=
rocess but just check up on whether it's still running.  In either case, th=
e <tt class=3D"backtick">kill</tt> command will have a <tt class=3D"backtic=
k">0</tt> exit code (success) if it managed to send the signal (or found th=
e process to still be alive). <span class=3D"anchor" id=3D"line-464"></span=
><span class=3D"anchor" id=3D"line-465"></span></p><p class=3D"line862">Unl=
ess you intend to send a very specific signal to a process, do not use any =
other <tt class=3D"backtick">kill</tt> options; in particular, <em>avoid us=
ing <tt class=3D"backtick">-9</tt> or <tt class=3D"backtick">SIGKILL</tt> a=
t all cost</em>.  The <tt class=3D"backtick">KILL</tt> signal is a very dan=
gerous signal to send to a process and using it is almost always a bug.  Se=
nd the default <tt class=3D"backtick">SIGTERM</tt> instead and have patienc=
e. <span class=3D"anchor" id=3D"line-466"></span><span class=3D"anchor" id=
=3D"line-467"></span></p><p class=3D"line862">To wait for a child process t=
o finish or to read in the exit code of a process that you know has already=
 finished (because you did a <tt class=3D"backtick">kill&nbsp;-0</tt> check=
, for example), use the <tt class=3D"backtick">wait</tt> built-in command: =
<span class=3D"anchor" id=3D"line-468"></span><span class=3D"anchor" id=3D"=
line-469"></span></p><p class=3D"line867"><span class=3D"anchor" id=3D"line=
-470"></span><span class=3D"anchor" id=3D"line-471"></span><span class=3D"a=
nchor" id=3D"line-472"></span><span class=3D"anchor" id=3D"line-473"></span=
><span class=3D"anchor" id=3D"line-474"></span><span class=3D"anchor" id=3D=
"line-475"></span><span class=3D"anchor" id=3D"line-476"></span><span class=
=3D"anchor" id=3D"line-477"></span><span class=3D"anchor" id=3D"line-478"><=
/span><span class=3D"anchor" id=3D"line-479"></span><span class=3D"anchor" =
id=3D"line-480"></span><span class=3D"anchor" id=3D"line-481"></span><span =
class=3D"anchor" id=3D"line-482"></span><span class=3D"anchor" id=3D"line-4=
83"></span><span class=3D"anchor" id=3D"line-1-49"></span></p><div class=3D=
"highlight bash"><div class=3D"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d8b4" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d=
8b4_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-fb8b9d7929b7a6f8=
4ec166391df4f789dfb3d8b4_1"></span><span class=3D"anchor" id=3D"line-1-50">=
</span>night() { sleep 10; }              <span class=3D"Comment"># Define =
'night' as a function that takes 10 seconds.</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d8b4_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-fb8b9d7929b7a6f84ec16=
6391df4f789dfb3d8b4_2"></span><span class=3D"anchor" id=3D"line-2-18"></spa=
n><span class=3D"Comment"></span>                                   <span c=
lass=3D"Comment"># Adjust seconds according to current season and latitude<=
/span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d8b4_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-fb8b9d7929b7a6f84ec16=
6391df4f789dfb3d8b4_3"></span><span class=3D"anchor" id=3D"line-3-16"></spa=
n><span class=3D"Comment"></span>                                   <span c=
lass=3D"Comment"># for a more realistic simulation.</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d8b4_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-fb8b9d7929b7a6f84ec16=
6391df4f789dfb3d8b4_4"></span><span class=3D"anchor" id=3D"line-4-10"></spa=
n><span class=3D"Comment"></span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d8b4_5=
">   5</a> </span><span class=3D"LineAnchor" id=3D"CA-fb8b9d7929b7a6f84ec16=
6391df4f789dfb3d8b4_5"></span><span class=3D"anchor" id=3D"line-5-7"></span=
>night &amp; <span class=3D"ID">nightpid</span>=3D<span class=3D"ID">$!</sp=
an></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d8b4_6=
">   6</a> </span><span class=3D"LineAnchor" id=3D"CA-fb8b9d7929b7a6f84ec16=
6391df4f789dfb3d8b4_6"></span><span class=3D"anchor" id=3D"line-6-6"></span=
><span class=3D"ID">sheep</span>=3D0</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d8b4_7=
">   7</a> </span><span class=3D"LineAnchor" id=3D"CA-fb8b9d7929b7a6f84ec16=
6391df4f789dfb3d8b4_7"></span><span class=3D"anchor" id=3D"line-7-5"></span=
><span class=3D"ResWord">while </span>sleep 1; <span class=3D"ResWord">do</=
span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d8b4_8=
">   8</a> </span><span class=3D"LineAnchor" id=3D"CA-fb8b9d7929b7a6f84ec16=
6391df4f789dfb3d8b4_8"></span><span class=3D"anchor" id=3D"line-8-5"></span=
><span class=3D"ResWord">    </span><span class=3D"ResWord">kill</span> -0 =
<span class=3D"String">"$nightpid"</span> || <span class=3D"ResWord">break<=
/span>     <span class=3D"Comment"># Break the loop when we see the process=
 has gone away.</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d8b4_9=
">   9</a> </span><span class=3D"LineAnchor" id=3D"CA-fb8b9d7929b7a6f84ec16=
6391df4f789dfb3d8b4_9"></span><span class=3D"anchor" id=3D"line-9-4"></span=
><span class=3D"Comment"></span>    <span class=3D"ResWord">echo</span> <sp=
an class=3D"String">"$(( ++sheep )) sheep jumped over the fence."</span></s=
pan>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d8b4_1=
0">  10</a> </span><span class=3D"LineAnchor" id=3D"CA-fb8b9d7929b7a6f84ec1=
66391df4f789dfb3d8b4_10"></span><span class=3D"anchor" id=3D"line-10-4"></s=
pan><span class=3D"ResWord">done</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d8b4_1=
1">  11</a> </span><span class=3D"LineAnchor" id=3D"CA-fb8b9d7929b7a6f84ec1=
66391df4f789dfb3d8b4_11"></span><span class=3D"anchor" id=3D"line-11-4"></s=
pan><span class=3D"ResWord"></span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d8b4_1=
2">  12</a> </span><span class=3D"LineAnchor" id=3D"CA-fb8b9d7929b7a6f84ec1=
66391df4f789dfb3d8b4_12"></span><span class=3D"anchor" id=3D"line-12-4"></s=
pan><span class=3D"ResWord"></span><span class=3D"ResWord">wait</span> <spa=
n class=3D"String">"$nightpid"</span>; <span class=3D"ID">nightexit</span>=
=3D<span class=3D"ID">$?</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-fb8b9d7929b7a6f84ec166391df4f789dfb3d8b4_1=
3">  13</a> </span><span class=3D"LineAnchor" id=3D"CA-fb8b9d7929b7a6f84ec1=
66391df4f789dfb3d8b4_13"></span><span class=3D"anchor" id=3D"line-13-4"></s=
pan><span class=3D"ResWord">echo</span> <span class=3D"String">"The night e=
nded with exit code $nightexit.  We counted $sheep sheep."</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-484"></span><span class=
=3D"anchor" id=3D"line-485"></span><p class=3D"line867">
</p><h3 id=3D"Starting_a_.22daemon.22_and_checking_whether_it_started_succe=
ssfully">Starting a "daemon" and checking whether it started successfully</=
h3>
<span class=3D"anchor" id=3D"line-486"></span><span class=3D"anchor" id=3D"=
line-487"></span><p class=3D"line862">This is a very common request.  The p=
roblem is that there <em>is no answer!</em>  There is no such thing as "the=
 daemon started up successfully", and if your specific daemon were to have =
a relevant definition to that statement, it would be so completely daemon-s=
pecific, that there is no generic way for us to tell you how to check for t=
hat condition. <span class=3D"anchor" id=3D"line-488"></span><span class=3D=
"anchor" id=3D"line-489"></span></p><p class=3D"line862">What people genera=
lly resort to in an attempt to provide something "good enough", is: "<em>Le=
t's start the daemon, wait a few seconds, check whether the daemon process =
is still running, and if so, let's assume it's doing the right thing.</em>"=
.  Ignoring the fact that this is a totally lousy check which could easily =
be defeated by a stressed kernel, timing issues, latency or delay in the da=
emon's operations, and many other conditions, let's just see how we would i=
mplement this if we actually wanted to do this: <span class=3D"anchor" id=
=3D"line-490"></span><span class=3D"anchor" id=3D"line-491"></span></p><p c=
lass=3D"line867"><span class=3D"anchor" id=3D"line-492"></span><span class=
=3D"anchor" id=3D"line-493"></span><span class=3D"anchor" id=3D"line-494"><=
/span><span class=3D"anchor" id=3D"line-495"></span><span class=3D"anchor" =
id=3D"line-496"></span><span class=3D"anchor" id=3D"line-497"></span><span =
class=3D"anchor" id=3D"line-498"></span><span class=3D"anchor" id=3D"line-4=
99"></span><span class=3D"anchor" id=3D"line-500"></span><span class=3D"anc=
hor" id=3D"line-1-51"></span></p><div class=3D"highlight bash"><div class=
=3D"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-6c942d18ac1fac122b24af9f7bb73946d044449f" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-6c942d18ac1fac122b24af9f7bb73946d0444=
49f_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-6c942d18ac1fac12=
2b24af9f7bb73946d044449f_1"></span><span class=3D"anchor" id=3D"line-1-52">=
</span>mydaemon &amp; <span class=3D"ID">daemonpid</span>=3D<span class=3D"=
ID">$!</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6c942d18ac1fac122b24af9f7bb73946d044449f_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-6c942d18ac1fac122b24a=
f9f7bb73946d044449f_2"></span><span class=3D"anchor" id=3D"line-2-19"></spa=
n>sleep 2</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6c942d18ac1fac122b24af9f7bb73946d044449f_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-6c942d18ac1fac122b24a=
f9f7bb73946d044449f_3"></span><span class=3D"anchor" id=3D"line-3-17"></spa=
n><span class=3D"ResWord">if </span><span class=3D"ResWord">kill</span> -0 =
<span class=3D"String">"$daemonpid"</span>; <span class=3D"ResWord">then</s=
pan></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6c942d18ac1fac122b24af9f7bb73946d044449f_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-6c942d18ac1fac122b24a=
f9f7bb73946d044449f_4"></span><span class=3D"anchor" id=3D"line-4-11"></spa=
n><span class=3D"ResWord">    </span><span class=3D"ResWord">echo</span> <s=
pan class=3D"String">"Daemon started successfully.  I think."</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6c942d18ac1fac122b24af9f7bb73946d044449f_5=
">   5</a> </span><span class=3D"LineAnchor" id=3D"CA-6c942d18ac1fac122b24a=
f9f7bb73946d044449f_5"></span><span class=3D"anchor" id=3D"line-5-8"></span=
><span class=3D"ResWord">else</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6c942d18ac1fac122b24af9f7bb73946d044449f_6=
">   6</a> </span><span class=3D"LineAnchor" id=3D"CA-6c942d18ac1fac122b24a=
f9f7bb73946d044449f_6"></span><span class=3D"anchor" id=3D"line-6-7"></span=
><span class=3D"ResWord">    </span><span class=3D"ResWord">wait</span> <sp=
an class=3D"String">"$daemonpid"</span>; <span class=3D"ID">daemonexit</spa=
n>=3D<span class=3D"ID">$?</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6c942d18ac1fac122b24af9f7bb73946d044449f_7=
">   7</a> </span><span class=3D"LineAnchor" id=3D"CA-6c942d18ac1fac122b24a=
f9f7bb73946d044449f_7"></span><span class=3D"anchor" id=3D"line-7-6"></span=
>    <span class=3D"ResWord">echo</span> <span class=3D"String">"Daemon pro=
cess disappeared.  I suppose something may have gone wrong.  Its exit code =
was $daemonexit."</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-6c942d18ac1fac122b24af9f7bb73946d044449f_8=
">   8</a> </span><span class=3D"LineAnchor" id=3D"CA-6c942d18ac1fac122b24a=
f9f7bb73946d044449f_8"></span><span class=3D"anchor" id=3D"line-8-6"></span=
><span class=3D"ResWord">fi</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-501"></span><span class=
=3D"anchor" id=3D"line-502"></span><p class=3D"line862">To be honest, this =
problem is much better solved by doing a daemon-specific check.  For exampl=
e, say you're starting a web server called <tt class=3D"backtick">httpd</tt=
>.  The sensible thing to check in order to determine whether the web serve=
r started successfully... is whether it's actually serving your web content=
!  Who'd have thought! <span class=3D"anchor" id=3D"line-503"></span><span =
class=3D"anchor" id=3D"line-504"></span></p><p class=3D"line867"><span clas=
s=3D"anchor" id=3D"line-505"></span><span class=3D"anchor" id=3D"line-506">=
</span><span class=3D"anchor" id=3D"line-507"></span><span class=3D"anchor"=
 id=3D"line-508"></span><span class=3D"anchor" id=3D"line-509"></span><span=
 class=3D"anchor" id=3D"line-510"></span><span class=3D"anchor" id=3D"line-=
511"></span><span class=3D"anchor" id=3D"line-1-53"></span></p><div class=
=3D"highlight bash"><div class=3D"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-e10e58a97d1d27eae729cb1cfbe8632614087ba7" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-e10e58a97d1d27eae729cb1cfbe8632614087=
ba7_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-e10e58a97d1d27ea=
e729cb1cfbe8632614087ba7_1"></span><span class=3D"anchor" id=3D"line-1-54">=
</span>httpd -h 127.0.0.1 &amp; <span class=3D"ID">httpdpid</span>=3D<span =
class=3D"ID">$!</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-e10e58a97d1d27eae729cb1cfbe8632614087ba7_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-e10e58a97d1d27eae729c=
b1cfbe8632614087ba7_2"></span><span class=3D"anchor" id=3D"line-2-20"></spa=
n><span class=3D"ResWord">while </span>sleep 1; <span class=3D"ResWord">do<=
/span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-e10e58a97d1d27eae729cb1cfbe8632614087ba7_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-e10e58a97d1d27eae729c=
b1cfbe8632614087ba7_3"></span><span class=3D"anchor" id=3D"line-3-18"></spa=
n><span class=3D"ResWord">    </span>nc -z 127.0.0.1 80 &amp;&amp; <span cl=
ass=3D"ResWord">break</span>             <span class=3D"Comment"># See if w=
e can establish a TCP connection to port 80.</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-e10e58a97d1d27eae729cb1cfbe8632614087ba7_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-e10e58a97d1d27eae729c=
b1cfbe8632614087ba7_4"></span><span class=3D"anchor" id=3D"line-4-12"></spa=
n><span class=3D"Comment"></span><span class=3D"ResWord">done</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-e10e58a97d1d27eae729cb1cfbe8632614087ba7_5=
">   5</a> </span><span class=3D"LineAnchor" id=3D"CA-e10e58a97d1d27eae729c=
b1cfbe8632614087ba7_5"></span><span class=3D"anchor" id=3D"line-5-9"></span=
><span class=3D"ResWord"></span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-e10e58a97d1d27eae729cb1cfbe8632614087ba7_6=
">   6</a> </span><span class=3D"LineAnchor" id=3D"CA-e10e58a97d1d27eae729c=
b1cfbe8632614087ba7_6"></span><span class=3D"anchor" id=3D"line-6-8"></span=
><span class=3D"ResWord"></span><span class=3D"ResWord">echo</span> <span c=
lass=3D"String">"httpd ready for duty."</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-512"></span><span class=
=3D"anchor" id=3D"line-513"></span><p class=3D"line862">If something goes w=
rong, though, this will wait forever trying to connect to port 80.  So let'=
s check whether <tt class=3D"backtick">httpd</tt> died unexpectedly or whet=
her a certain "timeout" time elapsed: <span class=3D"anchor" id=3D"line-514=
"></span><span class=3D"anchor" id=3D"line-515"></span></p><p class=3D"line=
867"><span class=3D"anchor" id=3D"line-516"></span><span class=3D"anchor" i=
d=3D"line-517"></span><span class=3D"anchor" id=3D"line-518"></span><span c=
lass=3D"anchor" id=3D"line-519"></span><span class=3D"anchor" id=3D"line-52=
0"></span><span class=3D"anchor" id=3D"line-521"></span><span class=3D"anch=
or" id=3D"line-522"></span><span class=3D"anchor" id=3D"line-523"></span><s=
pan class=3D"anchor" id=3D"line-524"></span><span class=3D"anchor" id=3D"li=
ne-525"></span><span class=3D"anchor" id=3D"line-526"></span><span class=3D=
"anchor" id=3D"line-527"></span><span class=3D"anchor" id=3D"line-528"></sp=
an><span class=3D"anchor" id=3D"line-529"></span><span class=3D"anchor" id=
=3D"line-530"></span><span class=3D"anchor" id=3D"line-531"></span><span cl=
ass=3D"anchor" id=3D"line-532"></span><span class=3D"anchor" id=3D"line-533=
"></span><span class=3D"anchor" id=3D"line-534"></span><span class=3D"ancho=
r" id=3D"line-535"></span><span class=3D"anchor" id=3D"line-1-55"></span></=
p><div class=3D"highlight bash"><div class=3D"codearea" dir=3D"ltr" lang=3D=
"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d=
1e6_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306=
bae4e3104368bbd6f7c4d1e6_1"></span><span class=3D"anchor" id=3D"line-1-56">=
</span>httpd -h 127.0.0.1 &amp; <span class=3D"ID">httpdpid</span>=3D<span =
class=3D"ID">$!</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4e=
3104368bbd6f7c4d1e6_2"></span><span class=3D"anchor" id=3D"line-2-21"></spa=
n><span class=3D"ResWord">time</span>=3D0 <span class=3D"ID">timeout</span>=
=3D60</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4e=
3104368bbd6f7c4d1e6_3"></span><span class=3D"anchor" id=3D"line-3-19"></spa=
n><span class=3D"ResWord">while </span>sleep 1; <span class=3D"ResWord">do<=
/span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4e=
3104368bbd6f7c4d1e6_4"></span><span class=3D"anchor" id=3D"line-4-13"></spa=
n><span class=3D"ResWord">    </span>nc -z 127.0.0.1 80 &amp;&amp; <span cl=
ass=3D"ResWord">break</span>             <span class=3D"Comment"># See if w=
e can establish a TCP connection to port 80.</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_5=
">   5</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4e=
3104368bbd6f7c4d1e6_5"></span><span class=3D"anchor" id=3D"line-5-10"></spa=
n><span class=3D"Comment"></span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_6=
">   6</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4e=
3104368bbd6f7c4d1e6_6"></span><span class=3D"anchor" id=3D"line-6-9"></span=
>    <span class=3D"Comment"># Connection not yet available.</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_7=
">   7</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4e=
3104368bbd6f7c4d1e6_7"></span><span class=3D"anchor" id=3D"line-7-7"></span=
><span class=3D"Comment"></span>    <span class=3D"ResWord">if</span> ! <sp=
an class=3D"ResWord">kill</span> -0 <span class=3D"String">"$httpdpid"</spa=
n>; <span class=3D"ResWord">then</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_8=
">   8</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4e=
3104368bbd6f7c4d1e6_8"></span><span class=3D"anchor" id=3D"line-8-7"></span=
><span class=3D"ResWord">        </span><span class=3D"ResWord">wait</span>=
 <span class=3D"String">"$httpdpid"</span>; <span class=3D"ID">httpdexit</s=
pan>=3D<span class=3D"ID">$?</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_9=
">   9</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4e=
3104368bbd6f7c4d1e6_9"></span><span class=3D"anchor" id=3D"line-9-5"></span=
>        <span class=3D"ResWord">echo</span> <span class=3D"String">"httpd =
died unexpectedly with exit code: $httpdexit"</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_1=
0">  10</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4=
e3104368bbd6f7c4d1e6_10"></span><span class=3D"anchor" id=3D"line-10-5"></s=
pan>        <span class=3D"ResWord">exit</span> <span class=3D"String">"$ht=
tpdexit"</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_1=
1">  11</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4=
e3104368bbd6f7c4d1e6_11"></span><span class=3D"anchor" id=3D"line-11-5"></s=
pan>    <span class=3D"ResWord">fi</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_1=
2">  12</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4=
e3104368bbd6f7c4d1e6_12"></span><span class=3D"anchor" id=3D"line-12-5"></s=
pan><span class=3D"ResWord">    </span><span class=3D"ResWord">if</span> ((=
 ++time &gt; timeout )); <span class=3D"ResWord">then</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_1=
3">  13</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4=
e3104368bbd6f7c4d1e6_13"></span><span class=3D"anchor" id=3D"line-13-5"></s=
pan><span class=3D"ResWord">        </span><span class=3D"ResWord">echo</sp=
an> <span class=3D"String">"httpd hasn't gotten ready after $time seconds. =
 Something must've gone wrong.."</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_1=
4">  14</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4=
e3104368bbd6f7c4d1e6_14"></span><span class=3D"anchor" id=3D"line-14-4"></s=
pan>        <span class=3D"Comment"># kill "$httpdpid"; wait "$httpdpid"   =
 # You could terminate httpd here, if you like.</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_1=
5">  15</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4=
e3104368bbd6f7c4d1e6_15"></span><span class=3D"anchor" id=3D"line-15-4"></s=
pan><span class=3D"Comment"></span>        <span class=3D"ResWord">exit</sp=
an></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_1=
6">  16</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4=
e3104368bbd6f7c4d1e6_16"></span><span class=3D"anchor" id=3D"line-16-4"></s=
pan><span class=3D"ResWord">    </span><span class=3D"ResWord">fi</span></s=
pan>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_1=
7">  17</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4=
e3104368bbd6f7c4d1e6_17"></span><span class=3D"anchor" id=3D"line-17-4"></s=
pan><span class=3D"ResWord"></span><span class=3D"ResWord">done</span></spa=
n>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_1=
8">  18</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4=
e3104368bbd6f7c4d1e6_18"></span><span class=3D"anchor" id=3D"line-18-4"></s=
pan><span class=3D"ResWord"></span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-0ffe75e98612d306bae4e3104368bbd6f7c4d1e6_1=
9">  19</a> </span><span class=3D"LineAnchor" id=3D"CA-0ffe75e98612d306bae4=
e3104368bbd6f7c4d1e6_19"></span><span class=3D"anchor" id=3D"line-19-4"></s=
pan><span class=3D"ResWord"></span><span class=3D"ResWord">echo</span> <spa=
n class=3D"String">"httpd ready for duty."</span></span>
</pre></div></div><span class=3D"anchor" id=3D"line-536"></span><span class=
=3D"anchor" id=3D"line-537"></span><p class=3D"line867"><span class=3D"anch=
or" id=3D"theory"></span> <span class=3D"anchor" id=3D"line-538"></span>
</p><h1 id=3D"On_processes.2C_environments_and_inheritance">On processes, e=
nvironments and inheritance</h1>
<span class=3D"anchor" id=3D"line-539"></span><span class=3D"anchor" id=3D"=
line-540"></span><p class=3D"line862">Every process on a Unix system (excep=
t <tt class=3D"backtick">init</tt>) has a parent process from which it inhe=
rits certain things.  A process can change some of these things, and not ot=
hers.  You cannot change things inside another process other than by being =
its parent, or attaching (attacking?) it with a debugger. <span class=3D"an=
chor" id=3D"line-541"></span><span class=3D"anchor" id=3D"line-542"></span>=
</p><p class=3D"line862">It is of paramount importance that you understand =
this model if you plan to use or administer a Unix system successfully.  Fo=
r example, a user with 10 windows open might wonder why he can't tell all o=
f his shells to change the contents of their PATH variable, short of going =
to each one individually and running a command.  And even then, the changed=
 PATH variable won't be set in the user's window manager or desktop environ=
ment, which means any <em>new</em> windows he creates will still get the ol=
d variable. <span class=3D"anchor" id=3D"line-543"></span><span class=3D"an=
chor" id=3D"line-544"></span></p><p class=3D"line862">The solution, of cour=
se, is that the user needs to edit a shell <a href=3D"https://mywiki.wooled=
ge.org/DotFiles">dot file</a>, then logout and back in, so that his top-lev=
el processes will get the new variable, and can pass it along to their chil=
dren. <span class=3D"anchor" id=3D"line-545"></span><span class=3D"anchor" =
id=3D"line-546"></span></p><p class=3D"line862">Likewise, a system administ=
rator might want to tell her <tt class=3D"backtick">in.ftpd</tt> to use a d=
efault <a href=3D"https://mywiki.wooledge.org/Permissions#umask">umask</a> =
of 002 instead of whatever it's currently using.  Achieving that goal will =
require an understanding of how <tt class=3D"backtick">in.ftpd</tt> is laun=
ched on her system, either as a child of <tt class=3D"backtick">inetd</tt> =
or as a standalone daemon with some sort of <a class=3D"nonexistent" href=
=3D"https://mywiki.wooledge.org/BootScript">boot script</a>; making the app=
ropriate modifications; and restarting the appropriate daemons, if any. <sp=
an class=3D"anchor" id=3D"line-547"></span><span class=3D"anchor" id=3D"lin=
e-548"></span></p><p class=3D"line874">So, let's take a closer look at how =
processes are created. <span class=3D"anchor" id=3D"line-549"></span><span =
class=3D"anchor" id=3D"line-550"></span></p><p class=3D"line862">The Unix p=
rocess creation model revolves around two system calls: <tt class=3D"backti=
ck">fork()</tt> and <tt class=3D"backtick">exec()</tt>.  (There is actually=
 a family of related system calls that begin with <tt class=3D"backtick">ex=
ec</tt> which all behave in slightly different manners, but we'll treat the=
m all equally for now.)  <tt class=3D"backtick">fork()</tt> creates a child=
 process which is a <em>duplicate</em> of the parent who called <tt class=
=3D"backtick">fork()</tt> (with a few exceptions).  The parent receives the=
 child process's PID (Process ID) number as the return value of the <tt cla=
ss=3D"backtick">fork()</tt> function, while the child gets a "0" to tell it=
 that it's the child.  <tt class=3D"backtick">exec()</tt> replaces the curr=
ent process with a different program. <span class=3D"anchor" id=3D"line-551=
"></span><span class=3D"anchor" id=3D"line-552"></span></p><p class=3D"line=
874">So, the usual sequence is: <span class=3D"anchor" id=3D"line-553"></sp=
an><span class=3D"anchor" id=3D"line-554"></span></p><ul><li><p class=3D"li=
ne862">A program calls <tt class=3D"backtick">fork()</tt> and checks the re=
turn value of the system call.  If the status is greater than 0, then it's =
the parent process, so it calls <tt class=3D"backtick">wait()</tt> on the c=
hild process ID (unless we want it to continue running while the child runs=
 in the background). <span class=3D"anchor" id=3D"line-555"></span></p></li=
><li><p class=3D"line862">If the status is 0, then it's the child process, =
so it calls <tt class=3D"backtick">exec()</tt> to do whatever it's supposed=
 to be doing. <span class=3D"anchor" id=3D"line-556"></span></p></li><li><p=
 class=3D"line862">But before that, the child might decide to <tt class=3D"=
backtick">close()</tt> some file descriptors, <tt class=3D"backtick">open()=
</tt> new ones, set environment variables, change resource limits, and so o=
n.  All of these changes will remain in effect after the <tt class=3D"backt=
ick">exec()</tt> and will affect the task that is executed. <span class=3D"=
anchor" id=3D"line-557"></span></p></li><li><p class=3D"line862">If the ret=
urn value of <tt class=3D"backtick">fork()</tt> is negative, something bad =
happened (we ran out of memory, or the process table filled up, etc.). <spa=
n class=3D"anchor" id=3D"line-558"></span><span class=3D"anchor" id=3D"line=
-559"></span></p></li></ul><p class=3D"line874">Let's take an example of a =
shell command: <span class=3D"anchor" id=3D"line-560"></span><span class=3D=
"anchor" id=3D"line-561"></span></p><p class=3D"line867"><span class=3D"anc=
hor" id=3D"line-562"></span><span class=3D"anchor" id=3D"line-563"></span><=
span class=3D"anchor" id=3D"line-1-57"></span></p><div class=3D"highlight b=
ash"><div class=3D"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-df0d0d68c918d326edd4babe83e4e54da8731a63" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-df0d0d68c918d326edd4babe83e4e54da8731=
a63_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-df0d0d68c918d326=
edd4babe83e4e54da8731a63_1"></span><span class=3D"anchor" id=3D"line-1-58">=
</span><span class=3D"ResWord">echo </span>hello world 1&gt;&amp;2</span>
</pre></div></div><span class=3D"anchor" id=3D"line-564"></span><span class=
=3D"anchor" id=3D"line-565"></span><p class=3D"line862">The process executi=
ng this is a shell, which reads commands and executes them.  For external c=
ommands, it uses the standard <tt class=3D"backtick">fork()</tt>/<tt class=
=3D"backtick">exec()</tt> model to do so.  Let's show it step by step: <spa=
n class=3D"anchor" id=3D"line-566"></span><span class=3D"anchor" id=3D"line=
-567"></span></p><ul><li><p class=3D"line862">The parent shell calls <tt cl=
ass=3D"backtick">fork()</tt>. <span class=3D"anchor" id=3D"line-568"></span=
></p></li><li><p class=3D"line862">The parent gets the child's process ID a=
s the return value of <tt class=3D"backtick">fork()</tt> and waits for it t=
o terminate. <span class=3D"anchor" id=3D"line-569"></span></p></li><li><p =
class=3D"line862">The child gets a 0 from <tt class=3D"backtick">fork()</tt=
> so it knows it's the child. <span class=3D"anchor" id=3D"line-570"></span=
></p></li><li><p class=3D"line862">The child is supposed to redirect standa=
rd output to standard error (due to the <tt class=3D"backtick">1&gt;&amp;2<=
/tt> directive).  It does this now: <span class=3D"anchor" id=3D"line-571">=
</span></p><ul><li>Close file descriptor 1. <span class=3D"anchor" id=3D"li=
ne-572"></span></li><li>Duplicate file descriptor 2, and make sure the dupl=
icate is FD 1. <span class=3D"anchor" id=3D"line-573"></span></li></ul></li=
><li><p class=3D"line862">The child calls <tt class=3D"backtick">exec("echo=
",&nbsp;"echo",&nbsp;"hello",&nbsp;"world",&nbsp;(char&nbsp;*)NULL)</tt> or=
 something similar to execute the command.  (Here, we're assuming <tt class=
=3D"backtick">echo</tt> is an external command.) <span class=3D"anchor" id=
=3D"line-574"></span></p></li><li><p class=3D"line862">Once the <tt class=
=3D"backtick">echo</tt> terminates, the parent's <tt class=3D"backtick">wai=
t</tt> call also terminates, and the parent resumes normal operation. <span=
 class=3D"anchor" id=3D"line-575"></span><span class=3D"anchor" id=3D"line-=
576"></span></p></li></ul><p class=3D"line874">There are other things the c=
hild of the shell might do before executing the final command.  For example=
, it might set environment variables: <span class=3D"anchor" id=3D"line-577=
"></span><span class=3D"anchor" id=3D"line-578"></span></p><p class=3D"line=
867"><span class=3D"anchor" id=3D"line-579"></span><span class=3D"anchor" i=
d=3D"line-580"></span><span class=3D"anchor" id=3D"line-1-59"></span></p><d=
iv class=3D"highlight bash"><div class=3D"codearea" dir=3D"ltr" lang=3D"en"=
>
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-706942572b6f9cb59e71757fed406fb0ea6743bd" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-706942572b6f9cb59e71757fed406fb0ea674=
3bd_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-706942572b6f9cb5=
9e71757fed406fb0ea6743bd_1"></span><span class=3D"anchor" id=3D"line-1-60">=
</span><span class=3D"ID">http_proxy</span>=3Dhttp://tempproxy:3128/ lynx h=
ttp://someURL/</span>
</pre></div></div><span class=3D"anchor" id=3D"line-581"></span><span class=
=3D"anchor" id=3D"line-582"></span><p class=3D"line862">In this case, the c=
hild will put <tt class=3D"backtick">http_proxy=3Dhttp://tempproxy:3128/</t=
t> into the environment before calling <tt class=3D"backtick">exec()</tt>. =
 The parent's environment is unaffected. <span class=3D"anchor" id=3D"line-=
583"></span><span class=3D"anchor" id=3D"line-584"></span></p><p class=3D"l=
ine874">A child process inherits many things from its parent: <span class=
=3D"anchor" id=3D"line-585"></span><span class=3D"anchor" id=3D"line-586"><=
/span></p><ul><li>Open file descriptors.  The child gets copies of these, r=
eferring to the same files. <span class=3D"anchor" id=3D"line-587"></span><=
/li><li><p class=3D"line862">Environment variables.  The child gets its own=
 copies of these, and <a href=3D"https://mywiki.wooledge.org/BashFAQ/060">c=
hanges made by the child do not affect the parent's copy</a>. <span class=
=3D"anchor" id=3D"line-588"></span></p></li><li><p class=3D"line862">Curren=
t working directory.  If the child changes its working directory, <a href=
=3D"https://mywiki.wooledge.org/BashFAQ/060">the parent will never know abo=
ut it</a>. <span class=3D"anchor" id=3D"line-589"></span></p></li><li>User =
ID, group ID and supplementary groups.  A child process is spawned with the=
 same privileges as its parent.  Unless the child process is running with s=
uperuser UID (UID 0), it cannot change these privileges. <span class=3D"anc=
hor" id=3D"line-590"></span></li><li><p class=3D"line862">System resource l=
imits.  The child inherits the limits of its parent.  A process that runs a=
s superuser UID can raise its resource limits (<tt class=3D"backtick">setrl=
imit(2)</tt>).  A process running as non-superuser can only lower its resou=
rce limits; it can't raise them. <span class=3D"anchor" id=3D"line-591"></s=
pan></p></li><li><p class=3D"line891"><a href=3D"https://mywiki.wooledge.or=
g/Permissions#umask">umask</a>. <span class=3D"anchor" id=3D"line-592"></sp=
an><span class=3D"anchor" id=3D"line-593"></span></p></li></ul><p class=3D"=
line862">An active Unix system may be perceived as a <em>tree</em> of proce=
sses, with parent/child relationships shown as vertical ("branch") connecti=
ons between nodes.  For example, <span class=3D"anchor" id=3D"line-594"></s=
pan><span class=3D"anchor" id=3D"line-595"></span></p><p class=3D"line867">=
<span class=3D"anchor" id=3D"line-596"></span><span class=3D"anchor" id=3D"=
line-597"></span><span class=3D"anchor" id=3D"line-598"></span><span class=
=3D"anchor" id=3D"line-599"></span><span class=3D"anchor" id=3D"line-600"><=
/span><span class=3D"anchor" id=3D"line-601"></span><span class=3D"anchor" =
id=3D"line-602"></span><span class=3D"anchor" id=3D"line-603"></span><span =
class=3D"anchor" id=3D"line-604"></span><span class=3D"anchor" id=3D"line-6=
05"></span><span class=3D"anchor" id=3D"line-606"></span><span class=3D"anc=
hor" id=3D"line-607"></span><span class=3D"anchor" id=3D"line-608"></span><=
span class=3D"anchor" id=3D"line-609"></span><span class=3D"anchor" id=3D"l=
ine-610"></span><span class=3D"anchor" id=3D"line-611"></span><span class=
=3D"anchor" id=3D"line-612"></span><span class=3D"anchor" id=3D"line-613"><=
/span><span class=3D"anchor" id=3D"line-1-61"></span></p><div class=3D"high=
light bash"><div class=3D"codearea" dir=3D"ltr" lang=3D"en">
<a href=3D"https://mywiki.wooledge.org/ProcessManagement#" class=3D"codenum=
bers">Toggle line numbers</a>
<pre dir=3D"ltr" id=3D"CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb" lang=3D=
"en"><span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://myw=
iki.wooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c986=
4eb_1">   1</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4=
f3ad91ee74482d7e0c9864eb_1"></span><span class=3D"anchor" id=3D"line-1-62">=
</span>        (init)</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_2=
">   2</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad9=
1ee74482d7e0c9864eb_2"></span><span class=3D"anchor" id=3D"line-2-22"></spa=
n>           |</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_3=
">   3</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad9=
1ee74482d7e0c9864eb_3"></span><span class=3D"anchor" id=3D"line-3-20"></spa=
n>        (login)</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_4=
">   4</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad9=
1ee74482d7e0c9864eb_4"></span><span class=3D"anchor" id=3D"line-4-14"></spa=
n>           |</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_5=
">   5</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad9=
1ee74482d7e0c9864eb_5"></span><span class=3D"anchor" id=3D"line-5-11"></spa=
n>         startx</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_6=
">   6</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad9=
1ee74482d7e0c9864eb_6"></span><span class=3D"anchor" id=3D"line-6-10"></spa=
n>           |</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_7=
">   7</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad9=
1ee74482d7e0c9864eb_7"></span><span class=3D"anchor" id=3D"line-7-8"></span=
>         xinit</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_8=
">   8</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad9=
1ee74482d7e0c9864eb_8"></span><span class=3D"anchor" id=3D"line-8-8"></span=
>           |</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_9=
">   9</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad9=
1ee74482d7e0c9864eb_9"></span><span class=3D"anchor" id=3D"line-9-6"></span=
>     bash .xinitrc</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_1=
0">  10</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad=
91ee74482d7e0c9864eb_10"></span><span class=3D"anchor" id=3D"line-10-6"></s=
pan>     /     |    <span class=3D"SPChar">\</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_1=
1">  11</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad=
91ee74482d7e0c9864eb_11"></span><span class=3D"anchor" id=3D"line-11-6"></s=
pan><span class=3D"SPChar"></span> rxvt    rxvt   fvwm2</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_1=
2">  12</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad=
91ee74482d7e0c9864eb_12"></span><span class=3D"anchor" id=3D"line-12-6"></s=
pan>  |        |        <span class=3D"SPChar">\</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_1=
3">  13</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad=
91ee74482d7e0c9864eb_13"></span><span class=3D"anchor" id=3D"line-13-6"></s=
pan><span class=3D"SPChar"></span> bash   screen       <span class=3D"SPCha=
r">\_</span>___________________</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_1=
4">  14</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad=
91ee74482d7e0c9864eb_14"></span><span class=3D"anchor" id=3D"line-14-5"></s=
pan>       /   |  <span class=3D"SPChar">\ </span>             |      |    =
 <span class=3D"SPChar">\</span></span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_1=
5">  15</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad=
91ee74482d7e0c9864eb_15"></span><span class=3D"anchor" id=3D"line-15-5"></s=
pan><span class=3D"SPChar"></span>    bash bash  bash        xclock  xload =
 firefox ...</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_1=
6">  16</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad=
91ee74482d7e0c9864eb_16"></span><span class=3D"anchor" id=3D"line-16-5"></s=
pan>           |     |</span>
<span class=3D"line"><span class=3D"LineNumber"><a href=3D"https://mywiki.w=
ooledge.org/ProcessManagement#CA-d974af7edeec2ba4f3ad91ee74482d7e0c9864eb_1=
7">  17</a> </span><span class=3D"LineAnchor" id=3D"CA-d974af7edeec2ba4f3ad=
91ee74482d7e0c9864eb_17"></span><span class=3D"anchor" id=3D"line-17-5"></s=
pan>         mutt  rtorrent</span>
</pre></div></div><span class=3D"anchor" id=3D"line-614"></span><span class=
=3D"anchor" id=3D"line-615"></span><p class=3D"line862">This is a simplifie=
d version of an actual set of processes run by one user on a real system.  =
I have omitted many, to keep things readable.  The root of the tree, shown =
as <tt class=3D"backtick">(init)</tt>, as well as the first child process <=
tt class=3D"backtick">(login)</tt>, are running as root (superuser UID 0). =
 Here is how this scenario came about: <span class=3D"anchor" id=3D"line-61=
6"></span><span class=3D"anchor" id=3D"line-617"></span></p><ul><li><p clas=
s=3D"line862">The kernel (Linux in this case) is hard-coded to run <tt clas=
s=3D"backtick">/sbin/init</tt> as process number 1 when it has finished its=
 startup.  <tt class=3D"backtick">init</tt> never dies; it is the ultimate =
ancestor of every process on the system. <span class=3D"anchor" id=3D"line-=
618"></span></p></li><li><p class=3D"line891"><tt class=3D"backtick">init</=
tt> reads <tt class=3D"backtick">/etc/inittab</tt> which tells it to spawn =
some <tt class=3D"backtick">getty</tt> processes on some of the Linux virtu=
al terminal devices (among other things). <span class=3D"anchor" id=3D"line=
-619"></span></p></li><li><p class=3D"line862">Each <tt class=3D"backtick">=
getty</tt> process presents a bit of information plus a login prompt. <span=
 class=3D"anchor" id=3D"line-620"></span></p></li><li><p class=3D"line862">=
After reading a username, <tt class=3D"backtick">getty</tt> <tt class=3D"ba=
cktick">exec()</tt>s <tt class=3D"backtick">/bin/login</tt> to read the pas=
sword.  (Thus, <tt class=3D"backtick">getty</tt> no longer appears in the t=
ree; it has replaced itself.) <span class=3D"anchor" id=3D"line-621"></span=
></p></li><li><p class=3D"line862">If the password is valid, <tt class=3D"b=
acktick">login</tt> <tt class=3D"backtick">fork()</tt>s the user's login sh=
ell (in this case bash).  Presumably, it hangs around (instead of using <tt=
 class=3D"backtick">exec()</tt>) because it wants to do some clean-up after=
 the user's shell has terminated. <span class=3D"anchor" id=3D"line-622"></=
span></p></li><li><p class=3D"line862">The user types <tt class=3D"backtick=
">exec&nbsp;startx</tt> at the bash shell prompt.  This causes bash to <tt =
class=3D"backtick">exec()</tt> <tt class=3D"backtick">startx</tt> (and ther=
efore the login shell no longer appears in the tree). <span class=3D"anchor=
" id=3D"line-623"></span></p></li><li><p class=3D"line891"><tt class=3D"bac=
ktick">startx</tt> is a wrapper that launches an X session, which includes =
an X server process (not shown -- it runs as root), and a whole slew of cli=
ent programs.  On this particular system, <tt class=3D"backtick">.xinitrc</=
tt> in the user's home directory is a script that tells which X client prog=
rams to run. <span class=3D"anchor" id=3D"line-624"></span></p></li><li><p =
class=3D"line862">Two <tt class=3D"backtick">rxvt</tt> terminal emulators a=
re launched from the <tt class=3D"backtick">.xinitrc</tt> file (in the back=
ground using <tt class=3D"backtick">&amp;</tt>), and each of them runs a ne=
w copy of the user's shell, bash. <span class=3D"anchor" id=3D"line-625"></=
span></p><ul><li><p class=3D"line862">In one of them, the user has typed <t=
t class=3D"backtick">exec&nbsp;screen</tt> (or something similar) to replac=
e bash with screen.  Screen, in turn, has three bash child processes of its=
 own, two of which have terminal-based programs running in them (mutt, rtor=
rent). <span class=3D"anchor" id=3D"line-626"></span></p></li></ul></li><li=
><p class=3D"line862">The user's window manager, <tt class=3D"backtick">fvw=
m2</tt>, is run in the foreground by the <tt class=3D"backtick">.xinitrc</t=
t> script.  A window manager or desktop environment is usually the last thi=
ng run by the <tt class=3D"backtick">.xinitrc</tt> script; when the WM or D=
E terminates, the script terminates, and brings down the whole session. <sp=
an class=3D"anchor" id=3D"line-627"></span></p></li><li>The window manager =
runs several processes of its own (xclock, xload, firefox, ...).  It typica=
lly has a menu, or icons, or a control panel, or some other means of launch=
ing new programs.  We will not cover window manager configurations here. <s=
pan class=3D"anchor" id=3D"line-628"></span><span class=3D"anchor" id=3D"li=
ne-629"></span></li></ul><p class=3D"line862">Other parts of a Unix system =
use similar process trees to accomplish their goals, although few of them a=
re quite as deep or complex as an X session.  For example, <tt class=3D"bac=
ktick">inetd</tt> runs as a daemon which listens on several UDP and TCP por=
ts, and launches programs (<tt class=3D"backtick">ftpd</tt>, <tt class=3D"b=
acktick">telnetd</tt>, etc.) when it receives network connections.  <tt cla=
ss=3D"backtick">lpd</tt> runs as a managing daemon for printer jobs, and wi=
ll launch children to handle individual jobs when a printer is ready.  <tt =
class=3D"backtick">sshd</tt> listens for incoming SSH connections, and laun=
ches children when it receives them.  Some electronic mail systems (particu=
larly <a href=3D"https://mywiki.wooledge.org/CategoryQmail">qmail</a>) use =
relatively large numbers of small processes working together. <span class=
=3D"anchor" id=3D"line-630"></span><span class=3D"anchor" id=3D"line-631"><=
/span></p><p class=3D"line874">Understanding the relationship among a set o=
f processes is vital to administering a system.  For example, suppose you w=
ould like to change the way your FTP service behaves.  You've located a con=
figuration file that it is known to read at startup time, and you've change=
d it.  Now what?  You could reboot the entire system to be sure your change=
 takes effect, but most people consider that overkill.  Generally, people p=
refer to restart only the minimal number of processes, thereby causing the =
least amount of disruption to the other services and the other users of the=
 system. <span class=3D"anchor" id=3D"line-632"></span><span class=3D"ancho=
r" id=3D"line-633"></span></p><p class=3D"line862">So, you need to understa=
nd how your FTP service starts up.  Is it a standalone daemon?  If so, you =
probably have some system-specific way of restarting it (either by running =
a <a class=3D"nonexistent" href=3D"https://mywiki.wooledge.org/BootScript">=
BootScript</a>, or manually killing and restarting it, or perhaps by issuin=
g some special service management command).  More commonly, an FTP service =
runs under the control of <tt class=3D"backtick">inetd</tt>.  If this is th=
e case, you don't need to restart anything at all.  <tt class=3D"backtick">=
inetd</tt> will launch a fresh FTP service daemon every time it receives a =
connection, and the fresh daemon will read the changed configuration file e=
very time. <span class=3D"anchor" id=3D"line-634"></span><span class=3D"anc=
hor" id=3D"line-635"></span></p><p class=3D"line862">On the other hand, sup=
pose your FTP service doesn't have its own configuration file that lets you=
 make the change you want (for example, changing its umask for the default =
<a href=3D"https://mywiki.wooledge.org/Permissions">Permissions</a> of uplo=
aded files).  In this case, you know that it inherits its umask from <tt cl=
ass=3D"backtick">inetd</tt>, which in turn gets its umask from whatever boo=
t script launched it.  If you would like to change FTP's umask in this scen=
ario, you would have to edit <tt class=3D"backtick">inetd</tt>'s boot scrip=
t, and then kill and restart <tt class=3D"backtick">inetd</tt> so that the =
FTP service daemons (<tt class=3D"backtick">inetd</tt>'s children) will inh=
erit the new value.  And by doing this, you are also changing the default u=
mask of every <em>other</em> service that <tt class=3D"backtick">inetd</tt>=
 manages!  Is that acceptable?  Only you can answer that.  If not, then you=
 may have to change how your FTP service runs, possibly moving it to a stan=
dalone daemon.  This is a system administrator's job. <span class=3D"anchor=
" id=3D"line-636"></span><span class=3D"anchor" id=3D"line-637"></span></p>=
<p class=3D"line867"></p><hr><p class=3D"line874"> <span class=3D"anchor" i=
d=3D"line-638"></span><a href=3D"https://mywiki.wooledge.org/CategoryShell"=
>CategoryShell</a> <a href=3D"https://mywiki.wooledge.org/CategoryUnix">Cat=
egoryUnix</a> <span class=3D"anchor" id=3D"line-639"></span><span class=3D"=
anchor" id=3D"bottom"></span></p></div><p id=3D"pageinfo" class=3D"info" la=
ng=3D"en" dir=3D"ltr">ProcessManagement  (last edited 2020-06-26 03:42:46 b=
y <span title=3D"larryv @ pool-100-12-184-246.nycmny.fios.verizon.net[100.1=
2.184.246]"><a class=3D"nonexistent" href=3D"https://mywiki.wooledge.org/la=
rryv" title=3D"larryv @ pool-100-12-184-246.nycmny.fios.verizon.net[100.12.=
184.246]">larryv</a></span>)</p>

<div id=3D"pagebottom"></div>
</div>


<div id=3D"footer">
<ul class=3D"editbar"><li><a href=3D"https://mywiki.wooledge.org/ProcessMan=
agement?action=3Dedit&amp;editor=3Dtext" name=3D"texteditlink" rel=3D"nofol=
low">Edit (Text)</a></li><li><a href=3D"https://mywiki.wooledge.org/Process=
Management?action=3Dedit&amp;editor=3Dgui">Edit (GUI)</a></li><li class=3D"=
toggleCommentsButton" style=3D"display:none;"><a href=3D"https://mywiki.woo=
ledge.org/ProcessManagement#" class=3D"nbcomment">Comments</a></li><li><a c=
lass=3D"nbinfo" href=3D"https://mywiki.wooledge.org/ProcessManagement?actio=
n=3Dinfo" rel=3D"nofollow">Info</a></li><li><a class=3D"nbattachments" href=
=3D"https://mywiki.wooledge.org/ProcessManagement?action=3DAttachFile" rel=
=3D"nofollow">Attachments</a></li><li>
<form class=3D"actionsmenu" method=3D"GET" action=3D"https://mywiki.wooledg=
e.org/ProcessManagement">
<div>
   =20
    <select name=3D"action">
        <option value=3D"show">More Actions:</option><option value=3D"raw">=
Raw Text</option>
<option value=3D"print">Print View</option>
<option value=3D"RenderAsDocbook">Render as Docbook</option>
<option value=3D"refresh">Delete Cache</option>
<option value=3D"show" disabled=3D"" class=3D"disabled">-------------------=
-----</option>
<option value=3D"SpellCheck">Check Spelling</option>
<option value=3D"LikePages">Like Pages</option>
<option value=3D"LocalSiteMap">Local Site Map</option>
<option value=3D"show" disabled=3D"" class=3D"disabled">-------------------=
-----</option>
<option value=3D"RenamePage" disabled=3D"" class=3D"disabled">Rename Page</=
option>
<option value=3D"DeletePage" disabled=3D"" class=3D"disabled">Delete Page</=
option>
<option value=3D"show" disabled=3D"" class=3D"disabled">-------------------=
-----</option>
<option value=3D"show" disabled=3D"" class=3D"disabled">Subscribe User</opt=
ion>
<option value=3D"show" disabled=3D"" class=3D"disabled">-------------------=
-----</option>
<option value=3D"show" disabled=3D"" class=3D"disabled">Remove Spam</option=
>
<option value=3D"show" disabled=3D"" class=3D"disabled">Revert to this revi=
sion</option>
<option value=3D"PackagePages">Package Pages</option>
<option value=3D"SyncPages">Sync Pages</option>
<option value=3D"show" disabled=3D"" class=3D"disabled">-------------------=
-----</option>
<option value=3D"Load">Load</option>
<option value=3D"Save">Save</option>
<option value=3D"SlideShow">SlideShow</option>
    </select>
   =20
   =20
</div>

</form>
</li></ul>

<ul id=3D"credits">
<li><a href=3D"http://moinmo.in/" title=3D"This site uses the MoinMoin Wiki=
 software.">MoinMoin Powered</a></li><li><a href=3D"http://moinmo.in/Python=
" title=3D"MoinMoin is written in Python.">Python Powered</a></li><li><a hr=
ef=3D"http://moinmo.in/GPL" title=3D"MoinMoin is GPL licensed.">GPL license=
d</a></li><li><a href=3D"http://validator.w3.org/check?uri=3Dreferer" title=
=3D"Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>



</body></html>
------MultipartBoundary--uHJylNfucSsbtqAgYnu36LXsxRoM5G8mG51sk2Zn04----
Content-Type: text/css
Content-Transfer-Encoding: quoted-printable
Content-Location: cid:css-5f91df71-67e2-4e18-8171-13de9f4e911a@mhtml.blink

@charset "utf-8";

.backtick { background-color: rgb(238, 238, 238); font-size: larger; }
------MultipartBoundary--uHJylNfucSsbtqAgYnu36LXsxRoM5G8mG51sk2Zn04----
Content-Type: text/css
Content-Transfer-Encoding: quoted-printable
Content-Location: https://mywiki.wooledge.org/moin_static198/modernized/css/common.css

@charset "utf-8";

html { background-color: white; color: black; font-family: sans-serif; font=
-size: 1em; }

body { margin: 0px; }

a { color: rgb(0, 68, 179); }

a:visited { color: rgb(255, 123, 179); }

a.nonexistent:visited, a.nonexistent, a.badinterwiki:visited, a.badinterwik=
i { color: gray; }

a.www::before { content: url("../img/moin-www.png"); margin: 0px 0.2em; }

a.http::before { content: url("../img/moin-www.png"); margin: 0px 0.2em; }

a.https::before { content: url("../img/moin-www.png"); margin: 0px 0.2em; }

a.file::before { content: url("../img/moin-ftp.png"); margin: 0px 0.2em; }

a.ftp::before { content: url("../img/moin-ftp.png"); margin: 0px 0.2em; }

a.nntp::before { content: url("../img/moin-news.png"); margin: 0px 0.2em; }

a.news::before { content: url("../img/moin-news.png"); margin: 0px 0.2em; }

a.telnet::before, a.ssh::before { content: url("../img/moin-telnet.png"); m=
argin: 0px 0.2em; }

a.irc::before, a.ircs::before { content: url("../img/moin-telnet.png"); mar=
gin: 0px 0.2em; }

a.mailto::before { content: url("../img/moin-email.png"); margin: 0px 0.2em=
; }

a.attachment::before { content: url("../img/moin-attach.png"); margin: 0px =
0.2em; }

a.badinterwiki::before { content: url("../img/moin-inter.png"); margin: 0px=
 0.2em; }

a.interwiki::before { content: url("../img/moin-inter.png"); margin: 0px 0.=
2em; }

a.action::before { content: url("../img/moin-action.png"); margin: 0px 0.2e=
m; }

li p { margin: 0.25em 0px; }

li.gap { margin-top: 0.5em; }

dt { margin-top: 0.5em; font-weight: bold; }

dd { margin-top: 0px; margin-bottom: 0px; }

dd p { margin: 0.25em 0px; }

a, img, img.drawing { border: 0px; }

pre { border: 1pt solid rgb(174, 189, 204); background-color: rgb(243, 245,=
 247); padding: 5pt; font-family: courier, monospace; white-space: pre-wrap=
; overflow-wrap: break-word; }

pre.comment { background-color: rgb(204, 204, 204); color: red; padding: 0p=
x; margin: 0px; border: 0px; }

pre.comment::before { content: url("../img/attention.png"); }

.comment { color: rgb(85, 85, 85); background-color: rgb(221, 221, 255); }

.red { background-color: rgb(255, 204, 204); }

.green { background-color: rgb(204, 255, 204); }

.blue { background-color: rgb(204, 204, 255); }

.yellow { background-color: rgb(255, 242, 159); }

.orange { background-color: rgb(255, 213, 155); }

.solid { border: 2px solid rgb(0, 0, 0); padding: 2px; }

.dashed { border: 2px dashed rgb(0, 0, 0); padding: 2px; }

.dotted { border: 2px dotted rgb(0, 0, 0); padding: 2px; }

.left { text-align: left; }

.center { text-align: center; }

.right { text-align: right; }

.justify { text-align: justify; }

table { margin: 0.5em 0px 0px 0.5em; border-collapse: collapse; }

th, td { padding: 0.25em 0.5em; border: 1pt solid rgb(173, 185, 204); }

td p { margin: 0px; padding: 0px; }

div.table-of-contents { border: 1px solid rgb(187, 187, 187); color: black;=
 background-color: rgb(238, 238, 238); font-size: 80%; text-align: left; ma=
rgin: 0.5em 0px 0.5em 1em; padding: 0.5em 0.75em 0.5em 0.5em; max-width: 50=
%; display: inline-table; }

div.table-of-contents ol { margin: 0px; padding: 0px 0px 0px 2em; }

div.table-of-contents ul { margin: 0px; list-style: none; }

div.table-of-contents li { margin: 0px; padding: 0px; }

p.table-of-contents-heading { font-weight: bold; padding: 0px; margin: 0px =
0px 0.5em; letter-spacing: 0.075em; }

table.navigation { background: rgb(255, 255, 255); margin: 0px; }

.footnotes div { width: 5em; border-top: 1pt solid gray; }

.footnotes ol { padding: 0px 2em; margin: 0px 0px 1em; }

.footnotes li { }

.info { float: right; font-size: 0.7em; color: gray; }

#pageinfo { margin-top: 2em; }

.seperator { color: gray; }

#pagebottom { clear: both; }

hr { height: 1pt; background-color: rgb(156, 156, 156); border: 0px; }

.hr1 { height: 2pt; }

.hr2 { height: 3pt; }

.hr3 { height: 4pt; }

.hr4 { height: 5pt; }

.hr5 { height: 6pt; }

.hr6 { height: 7pt; }

.u { text-decoration: underline; }

.strike { text-decoration: line-through; }

.warning { color: red; }

.error { color: red; }

strong.highlight { background-color: rgb(204, 224, 255); padding: 1pt; }

.rcrss { float: right; margin: 0px 7px 0px 14px; height: 0px; position: rel=
ative; top: 9px; }

[div=3D"rtl"] .rcrss { float: left; }

.recentchanges[dir=3D"rtl"] .rcrss { float: left; }

.recentchanges table { clear: both; border-collapse: collapse; border: 1px =
solid rgb(77, 125, 169); }

.recentchanges td { vertical-align: top; border: none; background: rgb(230,=
 234, 240); }

.recentchanges .rcdaybreak td { background: rgb(129, 187, 242); border: 1px=
 solid rgb(77, 125, 169); }

.rcdaybreak td a { font-size: 0.88em; }

.rcicon1, .rcicon2 { text-align: center; }

.rcpagelink { width: 33%; }

.rctime { font-size: 0.88em; white-space: nowrap; }

.rceditor { white-space: nowrap; font-size: 0.88em; }

.rccomment { width: 50%; color: gray; font-size: 0.88em; }

.userpref table, .userpref td { border: none; }

div.codemsg { margin: 0.5em 0px; padding: 0.5em 0.5em 0.5em 2.5em; backgrou=
nd: url("../img/alert.png") 0.5em 0.5em no-repeat rgb(247, 240, 224); borde=
r: 1pt solid rgb(204, 189, 174); color: black; }

div.codearea { margin: 0.5em 0px; padding: 0px; border: 1pt solid rgb(174, =
189, 204); background-color: rgb(243, 245, 247); color: black; }

div.codearea pre { margin: 0px; padding: 10pt; border: none; }

a.codenumbers { margin: 0px 10pt; font-size: 0.85em; color: gray; }

div.codearea pre span.LineNumber { color: gray; }

div.codearea pre span.ID { color: rgb(0, 0, 0); }

div.codearea pre span.Operator { color: rgb(0, 0, 192); }

div.codearea pre span.Char { color: rgb(0, 64, 128); }

div.codearea pre span.Comment { color: rgb(0, 128, 0); }

div.codearea pre span.Number { color: rgb(0, 128, 192); }

div.codearea pre span.String { color: rgb(0, 64, 128); }

div.codearea pre span.SPChar { color: rgb(0, 0, 192); }

div.codearea pre span.ResWord { color: rgb(160, 0, 0); }

div.codearea pre span.ConsWord { color: rgb(0, 128, 128); font-weight: bold=
; }

div.codearea pre span.Error { color: rgb(255, 128, 128); border: 1.5pt soli=
d rgb(255, 0, 0); }

div.codearea pre span.ResWord2 { color: rgb(0, 128, 255); font-weight: bold=
; }

div.codearea pre span.Special { color: rgb(0, 0, 255); }

div.codearea pre span.Preprc { color: rgb(128, 57, 153); }

div.codearea pre span.DiffAdded { color: rgb(72, 118, 255); }

div.codearea pre span.DiffRemoved { color: rgb(255, 0, 0); }

div.codearea pre span.DiffChanged { color: rgb(255, 127, 80); }

div.codearea pre span.DiffSeparator { color: rgb(34, 139, 34); font-weight:=
 bold; }

.advancedsearch { border: 1pt solid rgb(173, 185, 204); }

.advancedsearch td { vertical-align: top; background-color: rgb(231, 231, 2=
31); border: 0px; }

.advancedsearch td.searchfor { font-weight: bold; }

.advancedsearch input { border: 1px solid rgb(173, 185, 204); background-co=
lor: rgb(255, 255, 255); }

.advancedsearch input[disabled] { background-color: rgb(238, 238, 238); }

.advancedsearch td.submit { border-top: 1px solid rgb(173, 185, 204); backg=
round-color: rgb(255, 255, 255); text-align: right; }

.advancedsearch optioni, .advancedsearch select { border: 1px solid rgb(173=
, 185, 204); background-color: rgb(255, 255, 255); }

.searchresults dt { margin-top: 1em; font-weight: normal; }

.searchresults dd, .searchresults p { font-size: 0.85em; }

.searchresults .searchhitinfobar { color: rgb(0, 128, 0); margin-left: 15px=
; margin-top: 0px; }

p.searchstats { font-size: 0.8em; text-align: right; width: 100%; backgroun=
d-color: rgb(230, 234, 240); border-top: 1px solid rgb(144, 136, 220); padd=
ing: 2px; }

p.searchhint { background-color: rgb(230, 234, 240); border: 1px solid rgb(=
144, 136, 220); padding: 2px; }

.searchpages { margin-left: auto; margin-right: auto; }

.searchpages tr, .searchpages td { border: 0px; padding: 5px; margin: 0px; =
text-align: center; vertical-align: middle; color: rgb(185, 58, 88); font-w=
eight: bold; font-size: 1.05em; }

.searchpages td a, .searchpages td a:link { text-decoration: underline; }

a.cal-emptyday { color: rgb(119, 119, 119); text-align: center; }

a.cal-usedday { color: rgb(0, 0, 0); font-weight: bold; text-align: center;=
 }

td.cal-workday { background-color: rgb(221, 221, 255); text-align: center; =
}

td.cal-weekend { background-color: rgb(255, 221, 221); text-align: center; =
}

td.cal-today { background-color: rgb(204, 255, 204); border-style: solid; b=
order-width: 2pt; text-align: center; }

td.cal-invalidday { background-color: rgb(204, 204, 204); }

a.cal-link { color: rgb(0, 0, 0); text-decoration: none; }

th.cal-header { background-color: rgb(221, 187, 255); text-align: center; }

table.tip { color: black; background-color: rgb(255, 136, 136); font-size: =
small; font-weight: normal; border-style: solid; border-width: 1px; }

th.tip { background-color: rgb(255, 68, 68); font-weight: bold; text-align:=
 center; }

td.tip { text-align: left; }

[dir=3D"rtl"] td.tip { text-align: right; }

#message .hint { font-style: italic; }

#message .info { float: none; font-size: 1em; color: black; }

#message .info::before { content: url("../img/icon-info.png"); margin: 0px =
0.2em; }

#message .warning::before { content: url("../img/alert.png"); margin: 0px 0=
.2em; }

#message .error::before { content: url("../img/icon-error.png"); margin: 0p=
x 0.2em; }

#content div.caution, #content div.important, #content div.note, #content d=
iv.tip, #content div.warning { border: 1pt solid rgb(229, 229, 229); backgr=
ound-color: rgb(249, 249, 255); color: black; margin: 10pt 30pt; background=
-repeat: no-repeat; background-position: 8px 8px; min-height: 64px; padding=
-left: 64px; }

#content div.caution p, #content div.important p, #content div.note p, #con=
tent div.tip p, #content div.warning p { margin-top: 8px; }

#content div.tip { background-image: url("../img/admon-tip.png"); }

#content div.note { background-image: url("../img/admon-note.png"); }

#content div.important { background-image: url("../img/admon-important.png"=
); }

#content div.caution { background-image: url("../img/admon-caution.png"); }

#content div.warning { background-image: url("../img/admon-warning.png"); }
------MultipartBoundary--uHJylNfucSsbtqAgYnu36LXsxRoM5G8mG51sk2Zn04----
Content-Type: image/png
Content-Transfer-Encoding: base64
Content-Location: https://mywiki.wooledge.org/moin_static198/modernized/img/moin-www.png

iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBI
WXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH1QQaBywH5hnejwAAADV0RVh0Q29tbWVudAAoYykgMjAw
NCBKYWt1YiBTdGVpbmVyCgpDcmVhdGVkIHdpdGggVGhlIEdJTVCQ2YtvAAAC7ElEQVQ4y62TXWhb
ZRyHn/ec95xjkzRpm+ajjW3W0KIsuHWyyMSrKagwFG+UKd1FZTgQb4ShoLdSEMX7XYgVR0HE6Y1M
hjezMLWzlo12K67rXD+znCwfTXKSc5Kc1wvZxO3W5/r/ey7+/H6CBzj+3uwp4C1dyv0KLOX7DaVY
0HTt7NzM1BcP3ov7wfe/nDR17ceJsWTiyIE0Y6koAcuiXG+ytmmzuLLJjY3CZSHEybmZqav/Ebz2
7ue5YLjnt1eOHhQHJ+KU603snQ1kKA49/eDYpBJRFla2OT+/chchnr0nkQDRaOin55/JiicyA5SK
eQZHs0QGh3BabfKb60jfQ+s2eS6Xoeur6IVL188ATwNob3741UfJeH/4aG4cQ/PpyBBoAkNKTEMS
sCSJaC9D8RixviC57KOkhweOvPHB2WkALRwJnDycHaVSLnLHDRAf3odS4CtAaAjfY7fU4PuLy1yY
XyRiKfaPDwO8CiBrTjuWTvazcKNAZiKOr/79bL1S4qnJLEIIlFJs796h1WwyFIsAHAbQWl5HsywT
LRSnUm9h1zwct0vN8fDqNkL8oxNCkIhFubp6E8uQAAMAUtc1v9poacHWDiFpUWgMUjRMOl2fVqnD
ZLuN63r0hoI4jsO+VIxC0wMoAUhD0/K3torDh8aTZEaGuL25zfzaHh4mTS/Ip99ewRJd3n75ALVa
jaVrN6E3DfA7gKa63XNLq1t4vgQgPZLi2KEYu4USd6sNqq7gdtnHtm2q1SqP9KdYXc8DfAOgL/18
7vx47qXTQtfNSNCgx9T5ZXGZ5byi1nDZa7jsOS65EZ3CnsdW2efa2s6vczNT79wvUqVQPHHxsv+d
78OTjyX44UqVsmfidbq4XgfLEGxUFH8V2lz6Y60shDj10BaOTX/8+mhmZDYc6TMfzyRJDoaxLAOn
1WbXrvDnrTxbO8XrQpfHH9rCPfoGxswXTpye1a3Ai+iyD4RQyu+oTntdCe2zrz+ZPsP/zd9wbDf3
MdodlQAAAABJRU5ErkJggg==

------MultipartBoundary--uHJylNfucSsbtqAgYnu36LXsxRoM5G8mG51sk2Zn04----
Content-Type: text/css
Content-Transfer-Encoding: quoted-printable
Content-Location: https://mywiki.wooledge.org/moin_static198/modernized/css/screen.css

@charset "utf-8";

body { padding: 0px; border: 0px; }

a:link { color: rgb(68, 119, 255); text-decoration: none; }

a:link:hover, a:link:active { text-decoration: underline; color: green; }

a:visited { text-decoration: none; color: rgb(0, 68, 170); }

a:visited:hover { text-decoration: none; color: red; }

a.nonexistent:link { color: rgb(102, 102, 102); }

a.nonexistent:hover { color: black; text-decoration: underline; }

a.download { font-size: 120%; letter-spacing: 0.05em; font-weight: bold; ba=
ckground: rgb(231, 231, 231); border: 1px solid rgb(156, 156, 156); padding=
: 0.5em; text-align: center; }

input { }

textarea { font-size: 1em; font-family: monospace; }

.disabled { color: gray; }

#header { margin: 1px; padding: 1px; background: rgb(230, 234, 240); line-h=
eight: 1.1em; }

#logo { float: left; margin: 5px 10px; padding: 0px; font-size: 1.4em; line=
-height: 1em; font-weight: bold; }

[dir=3D"rtl"] #logo { float: right; }

#logo img { vertical-align: middle; }

#logo a { color: black; text-decoration: none; }

#username { display: block; margin: 8px 12px 4px; padding: 0px; font-size: =
0.82em; }

#username form { display: inline; }

#username input { display: inline; padding: 0px; margin: 0px; border: none;=
 background: transparent; color: blue; font-size: 0.82em; cursor: pointer; =
}

#username input:hover { color: red; }

#searchform { margin: 4px 0.5em 8px; padding: 0px; font-size: 0.82em; float=
: right; clear: right; text-align: right; }

[dir=3D"rtl"] #searchform { float: left; clear: left; text-align: left; }

#searchform input { font-size: 100%; vertical-align: middle; }

#pagetrail { clear: right; display: inline; margin: 0px 0.88em 0.25em; padd=
ing: 0px; font-size: 0.88em; }

[dir=3D"rtl"] #pagetrail { clear: left; }

#interwiki { font-size: 1em; }

#locationline { padding: 0px; font-size: 100%; font-weight: normal; margin:=
 0.25em 12px 5px; clear: right; }

[dir=3D"rtl"] #locationline { clear: left; }

#pagelocation { font-size: 1.5em; letter-spacing: 0.05em; }

[dir=3D"rtl"] #pagetrail span.sep { visibility: hidden; }

[dir=3D"rtl"] #pagetrail span.sep::after { content: " =C2=AB "; }

#navibar { clear: both; display: block; margin: 0px; padding: 0px 10px; fon=
t-size: 0.82em; zoom: 1; }

#navibar li { float: left; display: inline; margin: 0px 2px; padding: 2px 5=
px; border-top: 1px solid rgb(170, 204, 221); border-right: 1px solid rgb(1=
70, 204, 221); border-left: 1px solid rgb(170, 204, 221); border-image: ini=
tial; border-bottom: none; white-space: nowrap; }

[dir=3D"rtl"] #navibar li { float: right; }

#navibar li.wikilink { background: white; }

#navibar li.userlink { background: rgb(230, 234, 240); }

#navibar a, #navibar a:visited { color: black; text-decoration: none; }

#navibar li.current a { font-weight: bold; }

#navibar li:hover { background: rgb(214, 228, 249); }

#navibar li.current, #navibar li.current:hover { background: rgb(129, 187, =
242); border-width: 1px; border-style: solid; border-color: rgb(77, 125, 16=
9) rgb(77, 125, 169) rgb(129, 187, 242); border-image: initial; margin-bott=
om: -1px; }

#pageline { clear: both; margin: 0px; padding: 0px; width: 100%; height: 4p=
x; line-height: 4px; border-bottom: 1px solid rgb(77, 125, 169); border-top=
: 1px solid rgb(77, 125, 169); background: rgb(129, 187, 242); }

.editbar { clear: both; display: block; margin: -1px 0px 0px; padding: 2px =
8px; background: rgb(214, 228, 249); font-size: 0.8em; border-bottom: 1px s=
olid rgb(77, 125, 169); border-top: 1px solid rgb(77, 125, 169); }

.editbar form, .editbar form div { display: inline; margin: 0px; }

.editbar select { font-size: 100%; vertical-align: middle; }

.editbar li { display: inline; padding: 0px; margin: 4px 6px; }

.editbar a, .editbar a:visited { color: rgb(0, 68, 179); }

#message { clear: both; margin: 0px; padding: 5px 10px; border-bottom: 1px =
solid rgb(201, 201, 201); background: rgb(230, 234, 240); }

#message p { margin: 5px 0px; padding: 0px; }

#message div.buttons { font-weight: normal; }

.dialog form { margin: 0px 15px; }

.dialog td { border: none; padding: 5px; }

.dialog td.label { text-align: right; font-weight: bold; width: 25%; }

[dir=3D"rtl"] .dialog td.label { text-align: left; }

.dialog td.content input { width: 100%; }

#page { background-color: white; margin: 0px; padding: 2px 20px 20px; }

#editor-textarea, #editor-help { font-family: monospace; border: 1px solid =
rgb(140, 172, 187); color: black; background-color: white; padding: 3px; wi=
dth: 100%; margin-top: 0.5em; }

#editor-help { font-size: small; background-color: rgb(238, 238, 255); }

#editor-comment { font-size: 100%; border: 1px solid rgb(140, 172, 187); co=
lor: black; background-color: white; vertical-align: middle; padding: 1px; =
display: inline; width: 70%; }

#preview, #previewbelow { border: 1px solid rgb(108, 118, 128); padding: 3p=
x; width: 100%; background: url("../img/draft.png"); margin-top: 0.5em; }

#textcha { font-size: 100%; margin-top: 0.5em; border: 2px solid rgb(255, 1=
36, 136); color: black; vertical-align: middle; padding: 3px 2px; }

#textcha-answer { border: 2px solid rgb(0, 0, 0); padding: 3px 2px; }

input.button { }

#footer { clear: both; margin: 0px; padding: 0px; }

#credits, #version, #timings { margin: 5px 10px; padding: 0px; text-align: =
center; font-size: 0.88em; color: rgb(108, 118, 128); }

#credits li, #timings li { display: inline; padding: 0px 2px; margin: 0px 4=
px; }

#credits img { vertical-align: middle; }

.diff { width: 99%; table-layout: fixed; }

.diff-header { font-weight: bold; }

.diff-title { background-color: rgb(192, 192, 192); }

.diff-added { background-color: rgb(224, 255, 224); vertical-align: top; wi=
dth: 50%; white-space: pre-wrap; overflow-wrap: break-word; font-family: co=
urier, monospace; }

.diff-removed { background-color: rgb(255, 255, 224); vertical-align: top; =
width: 50%; white-space: pre-wrap; overflow-wrap: break-word; font-family: =
courier, monospace; }

.diff-added span { background-color: rgb(128, 255, 128); }

.diff-removed span { background-color: rgb(255, 255, 128); }

td.diff-info { vertical-align: top; }

div.diff-info { white-space: nowrap; }

div.diff-info-rev-comment span.diff-info-value { white-space: normal; }

div.diff-info-header { background-color: rgb(232, 232, 232); width: 100%; p=
adding: 0.25em 0.5em; margin: -0.25em -0.5em 0.25em; text-align: center; }

td.diff-same { text-align: center; border: 0px; }

table.navigation { float: right; margin: 2px; }

#openididentifier { background: url("../../common/openid.png") 0px 50% no-r=
epeat; padding-left: 18px; }
------MultipartBoundary--uHJylNfucSsbtqAgYnu36LXsxRoM5G8mG51sk2Zn04----
Content-Type: text/css
Content-Transfer-Encoding: quoted-printable
Content-Location: https://mywiki.wooledge.org/moin_static198/modernized/css/print.css

@charset "utf-8";

html { font-family: Times, serif; font-size: 12pt; }

body { margin: 1.5cm; }

a, a:visited, a.nonexistent, a.badinterwiki { color: black; text-decoration=
: none; }

a:hover { text-decoration: underline; }

.info a { color: gray; }

pre { font-size: 10pt; }

a.interwiki::before, a.badinterwiki::before { content: attr(title) ":"; }

a.interwiki img, a.badinterwiki img { display: none; }

.footnotes div { width: 5em; border-top: 1pt solid gray; }

#header, #sidebar, #footer, #timings, #credits, #interwiki, #pagelocation {=
 display: none; }
------MultipartBoundary--uHJylNfucSsbtqAgYnu36LXsxRoM5G8mG51sk2Zn04----
Content-Type: text/css
Content-Transfer-Encoding: quoted-printable
Content-Location: https://mywiki.wooledge.org/moin_static198/modernized/css/projection.css

@charset "utf-8";

@import url("screen.css");

html { line-height: 1.8em; }

body, b, em, a, span, div, p, td { font-size: 18pt; }

h1 { font-size: 26pt; }

h2 { font-size: 22pt; }

h3 { font-size: 20pt; }

h4 { font-size: 18pt; }

h5 { font-size: 16pt; }

h6 { font-size: 14pt; }

tt, pre { font-size: 16pt; }

sup, sub { font-size: 12pt; }

table.navigation { float: right; margin: 2px; }

.navigation td, .navigation a { font-size: 10pt; padding: 2px; }

#interwiki, #pagelocation, #pageinfo { display: none; }
------MultipartBoundary--uHJylNfucSsbtqAgYnu36LXsxRoM5G8mG51sk2Zn04----
Content-Type: image/png
Content-Transfer-Encoding: base64
Content-Location: https://mywiki.wooledge.org/moin_static198/common/moinmoin.png

iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAK
T2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AU
kSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXX
Pues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgAB
eNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAt
AGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3
AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dX
Lh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+
5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk
5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd
0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA
4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzA
BhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/ph
CJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5
h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+
Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhM
WE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQ
AkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+Io
UspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdp
r+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZ
D5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61Mb
U2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY
/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllir
SKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79u
p+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6Vh
lWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1
mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lO
k06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7Ry
FDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3I
veRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+B
Z7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/
0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5p
DoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5q
PNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIs
OpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5
hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQ
rAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9
rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1d
T1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aX
Dm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7
vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3S
PVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKa
RptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO
32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21
e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfV
P1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i
/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8
IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACA
gwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAMAUExURQAAAP///7W3u4G78qinqKOjpays
rmJiY/7+/8PDxJ6en6SlqbW2uoKDhq6vsr/Bxry+w8TGy9PW3Lm7v7e5vbS2urO1ucHDx7u9wXx9
f3+AgqCho8THzMLFys7R1srN0sfKz5OVmK+xtLK0t6eqrr3AxIG89oG79Hqs3XOdxnmhyHaZvHaZ
u3SVtWSAnFdqfmh+lFNkdW+BlFlmc15oclRcZFBXXmpzfFxiaGFnbVBUWFdbX3d5e05PUF9gYVhZ
WmZnaITD/4TF/4PD/oPD/YPB/IPB+4LA+oPA+YK/+IK+94TC+oK99oK99YG89IG884G783+58H22
7XWq3YPA9oK+9IC58Hy06Hqx5YG68YC573mu4YC47HOl1Xyy5IC36n+153Ghznan1oC15n2w4Hmq
2WyYwn2u3Xus2nys2Huq1Xqn0Xqmz2yTuHagx2iNsGaKrHObwGWIqHigxnKWuGSEonaZuW+Qrm6O
rF54kWyKpmqHoVhvhFtyiGiCmnOPqVtsfGN1hW6AkFFeal9temp0fWpze4XI/4XG/4bH/4bJ/3uz
44O97XGTsIXK/4bK/4fM/4jL/4fP/4nU/1tdXjY3N7W1s/r6+ejo5+Dg38/PzktKSPTz8VFPTGFf
XMLAvayppeHe2ldSTHx3cc3IwtLOyWVeVnZvZ4B5cWFXTWpgVm5kWlpTTG5mXnFpYUZBPKKYjmNd
V4eAeaefl66noLqzrIyHgqCblpiTjrOuqW1qZ9rW0nFvbX99e9TRzubj4Li2tGVkY/v59+fl42lo
Z/38+/r5+PDv7u3s61tOQl5SR3tuYnJmW2ZcU2JZUXZsY31zanRrY0I8N0tFQFJMR5mOhWhhW11X
UoF6dHBqZXJsZ4uEfsG5so6Ig2xnY2plYVlVUnhzb5uWksC7t/Pw7t3a2J6YlY+NjP37+vj29ff1
9JWSkWZlZWVkZObl5ePi4t3c3Jybm/7+/v39/fv7+/n5+fb29vHx8dbW1ry8vG9vb2xsbGZmZlJS
UkxMTP///xWf3yUAAAEAdFJOU///////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////wBT9wclAAAJMUlE
QVR42qxXe1BT6RU/997ckBeQECEYw6MuAl1FQDSgrMjDBoUEtdg7u9qZLrpW6djZHdfpTh2qu9uu
s9OK2t0qap21uqyPVKpjAgSEINooBhSfu4o8RMIjkEASIORBkv6R1w3K6s70/pPvO+d3Tr7n+X4/
xAWv/oyXIl16IQ4AdjUXGdoQOgsOeVWCybPiZv4f7JIqZy4AKNFiGf7XgVXyTcw3S3CclrpwvzSz
zyKxIPUAIHLRZLQoFbHncbtl++sT3B7jlZrTXkhkQXi1z1hot0pk0XcYFVpO+msS1M9RjD7OvxLC
kAIAFFrsQKPKAQAIs6mobmHYGp3oxxIYnwuyeeJ6thQAgBjPvMqn30hdDLfpboNBJNde08SGzpqg
gvu0Y2mdOxyKR0Rn3q1th9S1wzGNYW4bYchvi0/Ql86SoK9dNUfBc0OhWEddvpYaEY0MaB52Mhu5
HjOhXaPLTI3yB6G+1s1OpoLf5I0nDHRd4oqcdCYjvmhd4bkcowcl5TXxFczOmy+PYFJ+LDa5Wea1
x209+8edQQNcPXBdrBHlv+ft9oVIVt1/vkPsPRMUr1l5LGax2hcP/K7LHOYk6AH0MBodpuasbvC6
ZPRlrmMMyYwp1GXGprRKffHEOq4uZlzv6eFrdnTk+actbU2JzawLTNBsLUtW++IJyWKo62SNeftj
KA2nZxH+DOrkMmszeQ0M9X/+4JoMYLX9F4A0KrPWPRFE7wge8UUEP6npvZ9TV5+TB4AoGwEk2Sf/
JGL7E9yT0a6Fgq7g+pN8MBuXq7/flZQe0+UfdNh0b+eu0XBJeygGZt3K6nAwZlskKb5FrE/rGOBB
6n+Hh6ttHQlbdD178+I5XVy9f68osei3Ez+MCrlMSNw2HC7cTSj4UfUizwgsVz7fdhsyKsIPPirk
gaon2LHLiKD6gCPPtaN2Fb0v6B1QdS/6/YKk3UT6P/cW0dwJBk814cFppz4O3+BBW/C3pi16rhOf
MAMAREwjeu40W9BA8/ivxH41v33cnlMyFwBxQUvQdwK1AR05tcj3f01ZcaOmeWMRY046uGAKdVHZ
WoOd5vNf2h/uZAs1m60ZgLjgdEUoVn+gN5MgjbhhZZxL32YZKoqGvqqpjKQQSseN1SS/9FaU2uAw
lv4GKDDBNL+rLqjJCiFPuetzqlx9PvTiiRxoekD/tiEq+QSV7A/h1NDYwm+YEywUzm1Iq5ZauFeH
yIDNv/rbBWUYymkrKFA3YcpKiVK6mewfusq1SKvTNpwDFNbsT+yDabwxngxgbUu8PAXVjgWlv0ug
ytYPr8NKWGR/fCM+DX2J+9cAZbxNunVJJ+C3KQHbRjNXui5EJLXdXXmdzx8uC5nzdmAhu40DLAmq
XMRGHdzMK1KgGj4xB9Y6xqLB4ufSi18TPTndizgxMyq6+RMDFaSyTK6DcnmwjwZAE14wzSzYIpA7
R59LFJPvR79UzE0T4haAoH5VNyXyazYLQJ5hmb65YiZMPMtrBLc0NpAD4BMXv4Bn+w5hGIbFH0pu
pSFv+Jnbyv4ej2EYdmjfM7SlygIAkFazQPHwKLzRd7Shtr0+DQDAUtWC8pwIAICU807HjRTPDhhe
mWmo13OWU3Qdq5lSAADEyYOenbkYhmEYllNi07hHaD1Sderlcfd9f8TqbmlsJTnumNydPRTSu3A9
0fM+jNy/19C5I+Dvx2TFKfw+L9Bvd6GvGqxjARpeMkG2TDCTnQscr8KiiL+d5flNahTvXR5sJcOs
ecs/FzcmzQACAII+U7qfW0JkUnuGWF6SXMrKeEBOcB4JK00uKfdMUW0Sue++SPkM1aIuAADCyHib
/5YbsKUyyITfTSInIO5iTq51nbszP/znmIFwr4AWzSimAQBM5WskYTw3gL7JQMeYvxz2xw8XYy6H
ZrPA3Yu8VlSZPwUAQCvOgNoluUUYhn257dFV/5ZZnHh0xMoXJndvaMSBRs9z9vv9/Y+2fIlhWFHu
klp0aCPNDiBxqRES9aBrzWhbqaBaXtGsVcpN3Asa9LlW4PcLkDsuCYCdsTGXsv5BbwfAVCtLS54z
53i5c/DgwI0DMQ8KF2cKEFv58Q/Ifi2rdQrAuiDTjGJ6VREBttB9ARXJVHivDK2OnHP6C6mYza9G
y+4VGsn+7n2hNiAkKj2GBi8lrHcBwbUBFekZakq3RLZbUpKSVjnbI2XpBjSATIkTcATuWomlwSgo
9jyJApedJycDUvnbjL3pwrkVHR0VPGF69Oh2fkDVlj+1uyDqyR4FoPDepTuFBG78LCbggOalileM
aDVV2dlVGu3gp+uFeS1k//zPjDhReOfSe0AB1iSjFmMsO88PuDsoX/KoGj7MNEGIqimRmTynUUf2
8ybEtw21jEkWUAASKr4T3ELSXBr/Po2FqBj4ImvwqAuD0WVUHUYJYo9P0f101CVEqKs0m60AKEBG
ZFj1eMviTf2+W1qxbh5vfNTimKSYxsZMVjNKGeuiCvBjXv+/Qk4vbBmvDovMcFMcTtxgPrVu66Ug
zzrKGQ58eg7ox4b1AAD6YZMeuChFQFccBQA4qki8HF5HzR+M43gZSn3aRwORusLu1iO9ONinDlL/
IUZtIwH0gK2bVH9orpzWgODpgbS42rAh/uE7ogCKw5rKVUcEU2B6fOA/Sbvw7cg4Kd4W9JWt54Vx
LhsDh6EnT8nyURx3RYpNOCOy1ahHI5kqFXPeRNb7LeXfvAj2J7Cxmg+30Xsm+YzmZgbfoa6ZEp1J
iCUz1WajIl4tBRA7AZUDYc6gGxI+8k8i/PDTIJqSJQUogBoAIIQda0JXBVDdumUfk4giEOm9v15r
8752Ibii8me3SF7h/fLWfHcb+9TDjRtqLUs4j72Qxw4nUtLovT+8kw9/uO8/6sSy+72CgplsPXdH
7wOhxAdqFB7n9kdzuABcTnQ/97iw0U+2hQ96d+S+rBduRoSVJXjVBkB+9tnj8+NQKticnd3bN13z
cmPCkP/0L6PDK14rOAh9zvhvW5fgYL+77ERw06yCY3bJQxhEj/k1ONgLBhbWs2eVPAFlpNSYIMjm
CQ1sKQBIid1Z8eFsMLC6ThEe0SWUn/xR0fWS7JPYXIBQZW8u+/4PwtMvffvNJOnLmPfG0tcnvlUX
SeJ7Y+ZPEN8/Tf7/bwCjifFn9/6JuwAAAABJRU5ErkJggg==

------MultipartBoundary--uHJylNfucSsbtqAgYnu36LXsxRoM5G8mG51sk2Zn04------
